I"¯<h2 id="cocoapodsæ–¹å¼é›†æˆ">CocoaPodsæ–¹å¼é›†æˆ</h2>

<p>ç¼–è¾‘ Podfile æ–‡ä»¶ï¼Œæ·»åŠ  <code class="language-plaintext highlighter-rouge">pod 'OpenCV2'</code>ï¼Œä¿å­˜æ‰§è¡Œ <code class="language-plaintext highlighter-rouge">pod install</code> å³å¯ã€‚</p>

<p>ä¹Ÿè®¸ä½ ä¼šé—®ï¼Œä¸ºä»€ä¹ˆä¸æ˜¯ <code class="language-plaintext highlighter-rouge">pod 'OpenCV'</code>ï¼ŸOpenCV ç‰ˆæœ¬äº2006å¹´é¢ä¸–ï¼Œä¸»è¦åŸºäºCè¯­è¨€ï¼›2009å¹´å‘å¸ƒ OpenCV2ï¼Œä¸»è¦åŸºäºC++ï¼Œç›®å‰æœ€æ–°ç‰ˆæœ¬æ˜¯åŸºäº OpenCV2 çš„ã€‚ä½¿ç”¨ CocoaPods é›†æˆ OpenCV1.0 æœ‰å¤´æ–‡ä»¶é‡å¤ç­‰é—®é¢˜ï¼Œä½†é›†æˆ OpenCV2 æ˜¯æ²¡æœ‰é—®é¢˜äº†ï¼Œæ‰€ä»¥æ¨èä½¿ç”¨ CocoaPods é›†æˆ OpenCV2ã€‚</p>

<h3 id="æ”¹ä¸º-objective-c-ä¸-c-æ··ç¼–">æ”¹ä¸º Objective-C ä¸ C++ æ··ç¼–</h3>

<p>å¯¼å…¥ OpenCV å¤´æ–‡ä»¶ä½¿ç”¨å³å¯ã€‚æ³¨æ„çš„æ˜¯ï¼Œå‡¡æ˜¯å¯¼å…¥ OpenCV å¤´æ–‡ä»¶çš„ç±»ï¼Œéƒ½éœ€è¦æŠŠç›¸åº”ç±»åç¼€å .m æ”¹ä¸º .mmã€‚</p>

<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#import &lt;opencv2/opencv.hpp&gt;
#import &lt;opencv2/imgproc/types_c.h&gt;
#import &lt;opencv2/imgcodecs/ios.h&gt;
</span></code></pre></div></div>

<h2 id="ç›´æ¥ä¸‹è½½-framework-é›†æˆ">ç›´æ¥ä¸‹è½½ Framework é›†æˆ</h2>

<p>ç›´æ¥é›†æˆ OpenCV äº¦å¾ˆç®€å•ï¼Œä»<a href="http://opencv.org">OpenCV å®˜ç½‘</a>ä¸‹è½½æ¡†æ¶ï¼Œæ‹–å…¥ Xcode é¡¹ç›®ã€‚ç„¶åå¯¼å…¥ OpenCV ä¾èµ–çš„ç³»ç»Ÿåº“ã€‚</p>

<p>å¯¼å…¥è·¯å¾„ï¼šé€‰æ‹©é¡¹ç›® Targetsâ€”&gt;Generalâ€”&gt;Linked Frameworks and Libraiesï¼Œç‚¹å‡»â€+â€æ·»åŠ ä¸‹æ–¹ä¾èµ–åº“ã€‚</p>

<blockquote>
  <ul>
    <li>libc++.tbd</li>
    <li>AVFoundation.framework</li>
    <li>CoreImage.framework</li>
    <li>CoreGraphics.framework</li>
    <li>QuartzCore.framework</li>
    <li>Accelerate.framework</li>
    <li>CoreVideo.framework</li>
    <li>CoreMedia.framework</li>
    <li>AssetsLibrary.framework</li>
  </ul>
</blockquote>

<h2 id="å·²ç»è¸©è¿‡çš„æ·±å‘">å·²ç»è¸©è¿‡çš„<code class="language-plaintext highlighter-rouge">æ·±å‘</code></h2>

<h3 id="å¯¼å…¥å¤´æ–‡ä»¶çš„æ·±å‘">å¯¼å…¥å¤´æ–‡ä»¶çš„æ·±å‘</h3>

<p>å¯¼å…¥<code class="language-plaintext highlighter-rouge">#import &lt;opencv2/opencv.hpp&gt;</code>æŠ¥ Expected identitier çš„é”™è¯¯ã€‚è¿™æ˜¯ç”±äº opencv çš„ import è¦å†™åœ¨<code class="language-plaintext highlighter-rouge">#import &lt;UIKit/UIKit.h&gt;ã€#import &lt;Foundation/Foundation.h&gt;</code>è¿™äº›ç³»ç»Ÿåº“ <code class="language-plaintext highlighter-rouge">å‰é¢</code>ï¼Œå¦åˆ™ä¼šå‡ºç°é‡å‘½åçš„å†²çªã€‚</p>

<p><img src="/images/posts/opencv/OpenCVSetError/OpenCVSetError1.png" alt="å¯¼å…¥å¤´æ–‡ä»¶é”™è¯¯" /></p>

<h3 id="objective-c-å’Œ-c-çš„æ··ç¼–çš„æ·±å‘">Objective-C å’Œ C++ çš„æ··ç¼–çš„æ·±å‘</h3>

<p>OpenCV æ¡†æ¶æä¾›æ˜¯ C++ çš„ API æ¥å£ï¼Œå‡¡æ˜¯ä½¿ç”¨ OpenCV çš„åœ°æ–¹ï¼Œç±»çš„æ–‡ä»¶ç±»å‹å¿…é¡»ç”± .m ç±»å‹æ”¹ä¸º .mm ç±»å‹ï¼Œè¿™æ—¶å€™ç¼–è¯‘å™¨æŒ‰ç…§ OC ä¸ C++ æ··ç¼–è¿›è¡Œç¼–è¯‘ã€‚</p>

<p>å‡è®¾ä½ ä½¿ç”¨ OpenCV çš„ç±»ä¸º A.mmï¼Œé‚£å¦‚æœä½ åœ¨ Objective-C çš„ç±» B.m ä¸­å¯¼å…¥ä½¿ç”¨ï¼Œæ­¤æ—¶ç¼–è¯‘å™¨ä¼šè®¤ä¸ºæ­¤æ—¶ A.mm ä¹ŸæŒ‰ç…§ Objective-C ç±»å‹ç¼–è¯‘ï¼Œä½ å¿…é¡»æŠŠ B.m ç±»å‹æ›´æ”¹ä¸º B.mm ç±»å‹æ‰ä¸ä¼šæŠ¥é”™ï¼Œä»¥æ­¤ç±»æ¨ï¼Œä½ åœ¨ C.m ä¸­ä½¿ç”¨ B.mmï¼Œé‚£ C ä¹Ÿå¿…é¡»æ›´æ”¹ä¸º C.mm ç±»å‹â€¦â€¦ï¼›æœ‰äººæ¯”å–»è¿™æ ·è”“å»¶çš„æœ‰ç‚¹åƒæ£®æ—å¤§ç«ï¼Œä¸€ä¸ªæ¥ä¸€ä¸ªï¼Œå¾ˆå½¢è±¡ã€‚</p>

<p><strong>è§£å†³åŠæ³•</strong>ï¼šåœ¨å¯¼å…¥ OpenCV å¤´æ–‡ä»¶çš„æ—¶å€™ï¼Œ<code class="language-plaintext highlighter-rouge">#import &lt;opencv2/opencv.hpp&gt;</code>å‰é¢åŠ ä¸Š<code class="language-plaintext highlighter-rouge">#ifdef __cplusplus</code>ï¼ŒæŒ‡æ˜ç¼–è¯‘å™¨åªæœ‰ä½¿ç”¨äº† OpenCV çš„ .mm ç±»å‹æ–‡ä»¶ï¼Œæ‰æŒ‰ç…§ C++ ç±»å‹ç¼–è¯‘ã€‚å¦‚ä¸‹å³å¯è§£å†³:</p>

<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#ifdef __cplusplus
#import &lt;opencv2/opencv.hpp&gt;
#import &lt;opencv2/imgproc/types_c.h&gt;
#import &lt;opencv2/imgcodecs/ios.h&gt;
#endif
</span></code></pre></div></div>

<h3 id="ç¼–è¯‘è­¦å‘Š">ç¼–è¯‘è­¦å‘Š</h3>

<p>å¯¼å…¥ OpenCV ä½¿ç”¨æ—¶ï¼ŒXcode8 æˆ– Xcode9 å¯èƒ½ä¼šæœ‰ä¸€å †ç±»ä¼¼<code class="language-plaintext highlighter-rouge">warning: empty paragraph passed to '@param' command [-Wdocumentation]</code>çš„æ–‡æ¡£è­¦å‘Šï¼ŒXcode10 å·²ç»æ²¡æœ‰æ²¡æœ‰æ­¤æ–‡æ¡£è­¦å‘Šã€‚</p>

<p><img src="/images/posts/opencv/OpenCVSetError/OpenCVSetError2.png" alt="æ–‡æ¡£è­¦å‘Š" /></p>

<p>å¦‚æœç¼–è¯‘å™¨æŠ¥æ–‡æ¡£è­¦å‘Šï¼Œæœ‰å¼ºè¿«ç—‡çš„å°ä¼™ä¼´ä¸èƒ½å¿ã€‚è§£å†³åŠæ³•ï¼šå¯¼å…¥å¤´æ–‡ä»¶çš„æ—¶å€™ï¼Œå¿½ç•¥æ–‡æ¡£è­¦å‘Šå³å¯ï¼›åŒæ—¶åªåœ¨éœ€è¦çš„åœ°æ–¹å¯¼å…¥ C++ ç±»ï¼Œåˆ™åŠ ä¸Šç¼–è¯‘å™¨å¿½ç•¥æ–‡æ¡£è­¦å‘Šå³å¯ï¼Œè§£å†³åŠæ³•å¦‚ä¸‹ï¼š</p>

<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wdocumentation"
</span>
<span class="cp">#ifdef __cplusplus
#import &lt;opencv2/opencv.hpp&gt;
#import &lt;opencv2/imgproc/types_c.h&gt;
#import &lt;opencv2/imgcodecs/ios.h&gt;
#endif
</span>
<span class="cp">#pragma clang pop
</span></code></pre></div></div>

<h3 id="uiimage-ä¸-cvmat-è½¬æ¢æŠ¥é”™">UIImage ä¸ cv::Mat è½¬æ¢æŠ¥é”™ã€‚</h3>

<p>è¯»å–è§†é¢‘å¸§ï¼Œè½¬æ¢ä¸º UIImage æ—¶æŠ¥ <code class="language-plaintext highlighter-rouge">_CMSampleBufferGetImageBuffer", referenced from:</code> çš„é”™è¯¯ï¼Œæ˜¯ç”±äºç¼ºå°‘ <code class="language-plaintext highlighter-rouge">CoreMedia.framework</code> æ¡†æ¶ï¼Œåœ¨ <code class="language-plaintext highlighter-rouge">Targetsâ€”&gt;Generalâ€”&gt;Linked Frameworks and Libraies</code> å¯¼å…¥ <code class="language-plaintext highlighter-rouge">CoreMedia.framework</code> æ¡†æ¶å³å¯ã€‚</p>

<hr />

<p>å¦‚æœæ‚¨è§‰å¾—æœ‰æ‰€å¸®åŠ©ï¼Œè¯·åœ¨<a href="https://github.com/muzipiao/OOB">GitHub OOB</a>ä¸Šèµä¸ªStar â­ï¸ï¼Œæ‚¨çš„é¼“åŠ±æ˜¯æˆ‘å‰è¿›çš„åŠ¨åŠ›</p>
:ET