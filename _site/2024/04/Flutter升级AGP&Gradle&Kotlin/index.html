<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>Flutterå‡çº§AGP&amp;Gradle&amp;Kotlin</title>
  <meta name="description" content="AGP &amp; Gradle &amp; Kotlin å…³ç³»">
  <meta name="author" content="leopardpan">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Flutterå‡çº§AGP&amp;Gradle&amp;Kotlin">
  <meta name="twitter:description" content="AGP &amp; Gradle &amp; Kotlin å…³ç³»">
  
  <meta property="og:type" content="article">
  <meta property="og:title" content="Flutterå‡çº§AGP&amp;Gradle&amp;Kotlin">
  <meta property="og:description" content="AGP &amp; Gradle &amp; Kotlin å…³ç³»">
  
  <link rel="icon" type="image/png" href="/images/favicon.png" />
  <link href="/images/favicon.png" rel="shortcut icon" type="image/png">
  
  <link rel="stylesheet" href="/css/main.css">
  <link href="//libs.baidu.com/fontawesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="canonical" href="http://localhost:4000/2024/04/Flutter%E5%8D%87%E7%BA%A7AGP&Gradle&Kotlin/">
  <link rel="alternate" type="application/rss+xml" title="cocoafei" href="http://localhost:4000/feed.xml">

<!-- ç™¾åº¦ç»Ÿè®¡ -->
  

<!-- google ç»Ÿè®¡ -->
  

</head>


  <body>

    <span class="mobile btn-mobile-menu">        
      <div class="nav_container">
         <nav class="nav-menu-item" style = "float:right">
            <i class="nav-menu-item">
              <a href="/#blog" title="" class="blog-button">  åšå®¢ä¸»é¡µ
              </a>
            </i>
            
                <i class="nav-menu-item">

                  <a href="/archive" title="archive" class="btn-mobile-menu__icon">
                      æ‰€æœ‰æ–‡ç« 
                  </a>
                </i>
            
                <i class="nav-menu-item">

                  <a href="/tags" title="tags" class="btn-mobile-menu__icon">
                      æ ‡ç­¾
                  </a>
                </i>
            
                <i class="nav-menu-item">

                  <a href="/about" title="about" class="btn-mobile-menu__icon">
                      å…³äºæˆ‘
                  </a>
                </i>
            
          </nav>
      </div>
    </span>
    
    <header class="panel-cover panel-cover--collapsed" style="background-image: url('/images/background-cover.png')">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">
        <!-- å¤´åƒæ•ˆæœ-start -->
        <div class="ih-item circle effect right_to_left">            
            <a href="/#blog" title="å‰å¾€ cocoafei çš„ä¸»é¡µ" class="blog-button">
                <div class="img"><img src="/images/avatar.jpg" alt="img"></div>
                <div class="info">
                    <div class="info-back">
                        <h2> 
                            
                                cocoafei
                            
                        </h2>
                        <p>
                           
                                iOS / Python
                            
                        </p>
                    </div>
                </div>
            </a>
        </div>
        <!-- å¤´åƒæ•ˆæœ-end -->
        <h1 class="panel-cover__title panel-title"><a href="/#blog" title="link to homepage for cocoafei" class="blog-button">cocoafei</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">ä¸ªäººç«™</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">æ¬¢è¿æ¥åˆ°æˆ‘çš„Blog~</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        
        
        

        <div class="navigation-wrapper">
          <div>
            <nav class="cover-navigation cover-navigation--primary">
              <ul class="navigation">
                <li class="navigation__item"><a href="/#blog" title="" class="blog-button">åšå®¢ä¸»é¡µ</a></li>
                
                  <li class="navigation__item"><a href="/archive" title="archive">æ‰€æœ‰æ–‡ç« </a></li>
                
                  <li class="navigation__item"><a href="/tags" title="tags">æ ‡ç­¾</a></li>
                
                  <li class="navigation__item"><a href="/about" title="about">å…³äºæˆ‘</a></li>
                
              </ul>
            </nav>
          </div>          
        </div>


        </div>
      </div>
    </div>
    
    
    <div class="panel-cover--overlay cover-clear"></div>
    
  </div>
</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title">Flutterå‡çº§AGP&Gradle&Kotlin</h1>
    <div class="post-meta">
      <img src="/images/calendar.png" width="20px" style="vertical-align:middle;"/> 
      <time datetime="2024-04-25 00:00:00 +0800" itemprop="datePublished" class="post-meta__date date" style="vertical-align:middle;">2024-04-25</time>
    </p>  
    </div>
  </header>

  <section class="post">
    <h2 id="agp--gradle--kotlin-å…³ç³»">AGP &amp; Gradle &amp; Kotlin å…³ç³»</h2>

<p>è·¨å¹³å°æ‰«ç›²ï¼Œä¸ç†Ÿæ‚‰è¿™å‡ æ ·çš„åŒå­¦äº†è§£ä¸€ä¸‹ã€‚é Android å¼€å‘å‡ºèº«ï¼Œæœ‰æ€»ç»“é”™è¯¯çš„åœ°æ–¹ï¼Œè°¢è°¢æŒ‡æ­£ã€‚</p>

<ol>
  <li>Android Studioï¼Œå¼€å‘ Android çš„ SDKï¼Œå¤§å®¶éƒ½ä¸é™Œç”Ÿï¼Œå¯¹åº” iOS å¼€å‘ä¸­ Xcodeï¼›</li>
  <li>AGP(Android Gradle Plugin)ï¼Œç”¨äºæ‰©å±• Gradle åŠŸèƒ½çš„æ’ä»¶ï¼Œä»¥æ”¯æŒ Android é¡¹ç›®çš„æ„å»ºï¼›</li>
  <li>Kotlin å¼€å‘è¯­è¨€ï¼Œæ˜¯ä¸€ç§ä¸ Android å…¼å®¹çš„è¯­è¨€ï¼Œç±»ä¼¼ iOS å¼€å‘ä¸­çš„ Swiftï¼›</li>
  <li>ä¸åŒç‰ˆæœ¬ Android Studio çš„ AGP æ’ä»¶ä¸åŒï¼ŒAGP å¯¹åº” Gradle ç‰ˆæœ¬ä¸åŒï¼›</li>
  <li>Android Studio å‡çº§æ—¶å¯èƒ½ä¼šå‡çº§ AGPï¼Œæ¯ä¸ª AGP ç‰ˆæœ¬éƒ½å¯¹åº”ä¸€ä¸ªå…¼å®¹çš„ Gradle ç‰ˆæœ¬èŒƒå›´ï¼›</li>
  <li>Android Studio ä¼šæ†ç»‘ä¸€ä¸ª Kotlin ç‰ˆæœ¬ï¼Œä¸€èˆ¬ä¸ºå½“å‰æœ€æ–°ç¨³å®šç‰ˆã€‚</li>
</ol>

<p><strong>å…·ä½“å¯¹åº”å…³ç³»å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š</strong></p>

<ul>
  <li><a href="https://developer.android.google.cn/build/releases/gradle-plugin?hl=zh-cn">Android Gradle æ’ä»¶å…¼å®¹åˆ—è¡¨</a></li>
  <li><a href="https://developer.android.com/build/kotlin-support?hl=zh-cn">Kotlin ç‰ˆæœ¬æ‰€éœ€çš„ D8 å’Œ R8 ç¼–è¯‘å™¨ç‰ˆæœ¬</a></li>
</ul>

<h2 id="flutter-ç¼–è¯‘-android-æŠ¥é”™">Flutter ç¼–è¯‘ Android æŠ¥é”™</h2>

<p>Flutter å‡çº§è‡³ 3.19.6 åï¼Œç¼–è¯‘ Android æŠ¥é”™<code class="language-plaintext highlighter-rouge">Failed to transform kotlin-stdlib-1.9.10.jar</code>ï¼Œå¼€å§‹ä»¥ä¸ºæ˜¯ Flutter çš„é—®é¢˜ï¼Œè°ƒç ”å‘ç°æ˜¯ Android Studio å‡çº§å¯¼è‡´ã€‚</p>

<p><strong>åŸå› ï¼š</strong> AGP(Android Gradle Plugin) &amp; Gradle &amp; Kotlin ä¹‹é—´ç‰ˆæœ¬æœ‰å¯¹åº”çš„å…³ç³»ï¼Œå‡çº§ Android Studioï¼Œå¯¼è‡´ AGP ç‰ˆæœ¬å‡é«˜ï¼Œå¯¹åº”å…¼å®¹çš„æœ€ä½ Gradle ç‰ˆæœ¬å’Œ Kotlin ç‰ˆæœ¬ä¹Ÿå‡é«˜ï¼Œå¦‚æœé¡¹ç›®è®¾ç½®çš„ç‰ˆæœ¬ä¸åŒ¹é…ï¼Œå°±ä¼šç¼–è¯‘æŠ¥é”™ã€‚è¿™å¯¹äºä¸ç†Ÿæ‚‰ Android å¼€å‘å’Œ Gradle çš„äººæ¥è¯´ï¼Œè§£å†³èµ·æ¥æŒºéº»çƒ¦ã€‚</p>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">FAILURE:</span> <span class="n">Build</span> <span class="n">failed</span> <span class="n">with</span> <span class="n">an</span> <span class="n">exception</span><span class="o">.</span>

<span class="o">*</span> <span class="n">What</span> <span class="n">went</span> <span class="nl">wrong:</span>
<span class="n">Execution</span> <span class="n">failed</span> <span class="k">for</span> <span class="n">task</span> <span class="s1">':app:mergeExtDexDebug'</span><span class="o">.</span>
<span class="o">&gt;</span> <span class="n">Could</span> <span class="n">not</span> <span class="n">resolve</span> <span class="n">all</span> <span class="n">files</span> <span class="k">for</span> <span class="n">configuration</span> <span class="s1">':app:debugRuntimeClasspath'</span><span class="o">.</span>
   <span class="o">&gt;</span> <span class="n">Failed</span> <span class="n">to</span> <span class="n">transform</span> <span class="n">kotlin</span><span class="o">-</span><span class="n">stdlib</span><span class="o">-</span><span class="mf">1.9</span><span class="o">.</span><span class="mi">10</span><span class="o">.</span><span class="na">jar</span> <span class="o">(</span><span class="n">org</span><span class="o">.</span><span class="na">jetbrains</span><span class="o">.</span><span class="na">kotlin</span><span class="o">:</span><span class="n">kotlin</span><span class="o">-</span><span class="nl">stdlib:</span><span class="mf">1.9</span><span class="o">.</span><span class="mi">10</span><span class="o">)</span> <span class="n">to</span> <span class="n">match</span> <span class="n">attributes</span> <span class="o">{</span><span class="n">artifactType</span><span class="o">=</span><span class="n">android</span><span class="o">-</span><span class="n">dex</span><span class="o">,</span> <span class="n">asm</span><span class="o">-</span><span class="n">transformed</span><span class="o">-</span><span class="n">variant</span><span class="o">=</span><span class="n">NONE</span><span class="o">,</span> <span class="n">dexing</span><span class="o">-</span><span class="n">enable</span><span class="o">-</span><span class="n">desugaring</span><span class="o">=</span><span class="kc">true</span><span class="o">,</span> <span class="n">dexing</span><span class="o">-</span><span class="n">enable</span><span class="o">-</span><span class="n">jacoco</span><span class="o">-</span><span class="n">instrumentation</span><span class="o">=</span><span class="kc">false</span><span class="o">,</span> <span class="n">dexing</span><span class="o">-</span><span class="n">is</span><span class="o">-</span><span class="n">debuggable</span><span class="o">=</span><span class="kc">true</span><span class="o">,</span> <span class="n">dexing</span><span class="o">-</span><span class="n">min</span><span class="o">-</span><span class="n">sdk</span><span class="o">=</span><span class="mi">19</span><span class="o">,</span> <span class="n">org</span><span class="o">.</span><span class="na">gradle</span><span class="o">.</span><span class="na">category</span><span class="o">=</span><span class="n">library</span><span class="o">,</span> <span class="n">org</span><span class="o">.</span><span class="na">gradle</span><span class="o">.</span><span class="na">libraryelements</span><span class="o">=</span><span class="n">jar</span><span class="o">,</span> <span class="n">org</span><span class="o">.</span><span class="na">gradle</span><span class="o">.</span><span class="na">status</span><span class="o">=</span><span class="n">release</span><span class="o">,</span> <span class="n">org</span><span class="o">.</span><span class="na">gradle</span><span class="o">.</span><span class="na">usage</span><span class="o">=</span><span class="n">java</span><span class="o">-</span><span class="n">runtime</span><span class="o">}.</span>
      <span class="o">&gt;</span> <span class="n">Execution</span> <span class="n">failed</span> <span class="k">for</span> <span class="nl">DexingWithClasspathTransform:</span> <span class="s">/Users/</span><span class="n">lifei</span><span class="s">/.gradle/</span><span class="n">caches</span><span class="s">/transforms-3/</span><span class="mi">29</span><span class="n">afff73df66b7b192e6a6f531b855cf</span><span class="s">/transformed/</span><span class="n">jetified</span><span class="o">-</span><span class="n">kotlin</span><span class="o">-</span><span class="n">stdlib</span><span class="o">-</span><span class="mf">1.9</span><span class="o">.</span><span class="mi">10</span><span class="o">.</span><span class="na">jar</span><span class="o">.</span>
         <span class="o">&gt;</span> <span class="n">Error</span> <span class="k">while</span> <span class="n">dexing</span><span class="o">.</span>

<span class="o">*</span> <span class="nl">Try:</span>
<span class="o">&gt;</span> <span class="n">Run</span> <span class="n">with</span> <span class="o">--</span><span class="n">stacktrace</span> <span class="n">option</span> <span class="n">to</span> <span class="n">get</span> <span class="n">the</span> <span class="n">stack</span> <span class="n">trace</span><span class="o">.</span>
<span class="o">&gt;</span> <span class="n">Run</span> <span class="n">with</span> <span class="o">--</span><span class="n">info</span> <span class="n">or</span> <span class="o">--</span><span class="n">debug</span> <span class="n">option</span> <span class="n">to</span> <span class="n">get</span> <span class="n">more</span> <span class="n">log</span> <span class="n">output</span><span class="o">.</span>
<span class="o">&gt;</span> <span class="n">Run</span> <span class="n">with</span> <span class="o">--</span><span class="n">scan</span> <span class="n">to</span> <span class="n">get</span> <span class="n">full</span> <span class="n">insights</span><span class="o">.</span>

<span class="o">*</span> <span class="n">Get</span> <span class="n">more</span> <span class="n">help</span> <span class="n">at</span> <span class="nl">https:</span><span class="c1">//help.gradle.org</span>

<span class="n">BUILD</span> <span class="n">FAILED</span> <span class="k">in</span> <span class="mi">10</span><span class="n">m</span> <span class="mi">15</span><span class="n">s</span>

<span class="err">â”Œâ”€</span> <span class="n">Flutter</span> <span class="n">Fix</span> <span class="err">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="err">â”‚</span> <span class="o">[!]</span> <span class="n">The</span> <span class="n">shrinker</span> <span class="n">may</span> <span class="n">have</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">optimize</span> <span class="n">the</span> <span class="n">Java</span> <span class="n">bytecode</span><span class="o">.</span>            <span class="err">â”‚</span>
<span class="err">â”‚</span> <span class="n">To</span> <span class="n">disable</span> <span class="n">the</span> <span class="n">shrinker</span><span class="o">,</span> <span class="n">pass</span> <span class="n">the</span> <span class="err">`</span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">shrink</span><span class="err">`</span> <span class="n">flag</span> <span class="n">to</span> <span class="k">this</span> <span class="n">command</span><span class="o">.</span>      <span class="err">â”‚</span>
<span class="err">â”‚</span> <span class="n">To</span> <span class="n">learn</span> <span class="n">more</span><span class="o">,</span> <span class="nl">see:</span> <span class="nl">https:</span><span class="c1">//developer.android.com/studio/build/shrink-code â”‚</span>
<span class="err">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
<span class="nl">Error:</span> <span class="n">Gradle</span> <span class="n">task</span> <span class="n">assembleDebug</span> <span class="n">failed</span> <span class="n">with</span> <span class="n">exit</span> <span class="n">code</span> <span class="mi">1</span>
</code></pre></div></div>

<h2 id="å‡çº§é¡¹ç›®-agp">å‡çº§é¡¹ç›® AGP</h2>

<p>æ—¢ç„¶ç‰ˆæœ¬ä¸åŒ¹é…é—®é¢˜ï¼Œé™¤äº†é™ä½ Android Studio ç‰ˆæœ¬å¤–ï¼Œé‚£å°±æ˜¯åˆ©ç”¨ Android Studio ä¸­ AGP å‡çº§åŠ©æ‰‹<code class="language-plaintext highlighter-rouge">AGP Upgrade Assistant...</code>å¿«é€Ÿå‡çº§ AGPã€‚</p>

<ol>
  <li>ä»¥ Android æ¨¡å¼æ‰“å¼€ Flutter é¡¹ç›®ï¼ˆæŠŠé¡¹ç›®çš„ Android æ–‡ä»¶å¤¹æ‹–å…¥ Android Studioï¼‰ï¼Œç‚¹å‡»<code class="language-plaintext highlighter-rouge">Android Studio -&gt; AGP Upgrade Assistant...</code>ï¼›</li>
  <li>å‡ºç°ä¸€ä¸ªå¼¹çª—ï¼Œé€‰æ‹©<code class="language-plaintext highlighter-rouge">Upgrade Android Gradle Plugin from version 7.4.2 to 8.3.2</code>ï¼Œé€‰æ‹©è¦å‡çº§çš„ç‰ˆæœ¬è¿™é‡Œé€‰æ‹©<code class="language-plaintext highlighter-rouge">8.3.2</code>ï¼›</li>
  <li>ç‚¹å‡»<code class="language-plaintext highlighter-rouge">Run selected steps</code>å‡çº§å³å¯ã€‚</li>
</ol>

<p><strong>ä¸€åˆ‡é¡ºåˆ©=è‰å±¥è™«æ•™ç¨‹ï¼Œä½†å¯èƒ½ä¼šå‡ºç°å¦‚ä¸‹æŠ¥é”™ï¼š</strong></p>

<p><img src="/images/posts/upgrade-agp/agp1.png" alt="AGPå‡çº§æŠ¥é”™" /></p>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Namespace</span> <span class="n">not</span> <span class="n">specified</span><span class="o">.</span> <span class="n">Specify</span> <span class="n">a</span> <span class="n">namespace</span> <span class="k">in</span> <span class="n">the</span> <span class="n">module</span><span class="err">'</span><span class="n">s</span> <span class="n">build</span> <span class="n">file</span><span class="o">.</span> <span class="n">See</span> <span class="nl">https:</span><span class="c1">//d.android.com/r/tools/upgrade-assistant/set-namespace for information about setting the namespace.</span>

<span class="n">If</span> <span class="n">you</span><span class="err">'</span><span class="n">ve</span> <span class="n">specified</span> <span class="n">the</span> <span class="kn">package</span> <span class="nn">attribute</span> <span class="k">in</span> <span class="n">the</span> <span class="n">source</span> <span class="n">AndroidManifest</span><span class="o">.</span><span class="na">xml</span><span class="o">,</span> <span class="n">you</span> <span class="n">can</span> <span class="n">use</span> <span class="n">the</span> <span class="n">AGP</span> <span class="n">Upgrade</span> <span class="n">Assistant</span> <span class="n">to</span> <span class="n">migrate</span> <span class="n">to</span> <span class="n">the</span> <span class="n">namespace</span> <span class="n">value</span> <span class="k">in</span> <span class="n">the</span> <span class="n">build</span> <span class="n">file</span><span class="o">.</span> <span class="n">Refer</span> <span class="n">to</span> <span class="nl">https:</span><span class="c1">//d.android.com/r/tools/upgrade-assistant/agp-upgrade-assistant for general information about using the AGP Upgrade Assistant.</span>
</code></pre></div></div>

<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>

<p>è¿™æ˜¯ç”±äº Android ä¸»å·¥ç¨‹æ›´æ–°<code class="language-plaintext highlighter-rouge">Android Gradle Plugin 8.0</code>ä»¥åä¼šå¼ºåˆ¶è¦æ±‚åœ¨æ¯ä¸€ä¸ª library æ¨¡å—çš„ build.gradle ä¸­æ ‡æ˜å‘½åç©ºé—´namespaceï¼Œå¦‚æœæ²¡æœ‰æ ‡æ³¨ä¼šç›´æ¥æŠ›å‡ºå¼‚å¸¸ã€‚æˆ‘çš„ Flutter é¡¹ç›®æœ‰ä¸€ä¸ªè‡ªå®šä¹‰ OpenCV æ’ä»¶ï¼Œä¿®æ”¹<code class="language-plaintext highlighter-rouge">/plugins/opencv_utils/android/build.gradle</code>æ·»åŠ ç‰ˆæœ¬å³å¯ã€‚</p>

<div class="language-gradle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">android</span> <span class="o">{</span>
    <span class="c1">// è¿™é‡Œæ·»åŠ  namespaceï¼Œå’ŒåŒ…åä¸€è‡´å³å¯</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">project</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">hasProperty</span><span class="o">(</span><span class="s2">"namespace"</span><span class="o">))</span> <span class="o">{</span>
        <span class="n">namespace</span> <span class="s1">'com.lf.opencv.opencv_utils'</span>
    <span class="o">}</span>
    <span class="n">compileSdkVersion</span> <span class="mi">33</span>
    <span class="o">......</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>å‡çº§ AGP æ’ä»¶ç‰ˆæœ¬è‡³ 8.3.2ï¼Œé€šè¿‡ Git æˆ‘ä»¬æ£€æŸ¥æ›´æ”¹å¦‚ä¸‹(+å·æ–°å¢-å·ç§»é™¤)ï¼š</strong></p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// android/build.gradle ä¿®æ”¹äº† gradle æ’ä»¶ç‰ˆæœ¬
<span class="gd">- classpath 'com.android.tools.build:gradle:7.4.2'
</span><span class="gi">+ classpath 'com.android.tools.build:gradle:8.3.2'
</span><span class="err">
</span>// android/gradle.properties æ–°å¢å¦‚ä¸‹å†…å®¹
<span class="gi">+ android.defaults.buildfeatures.buildconfig=true
+ android.nonTransitiveRClass=false
+ android.nonFinalResIds=false
</span><span class="err">
</span>// android/app/src/main/AndroidManifest.xml ç§»é™¤äº† package
<span class="gd">- &lt;manifest xmlns:android="http://schemas.android.com/apk/res/android" package="com.xx.yy"&gt;
</span><span class="gi">+ &lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"&gt;
</span><span class="err">
</span>// android/gradle/wrapper/gradle-wrapper.properties ä¿®æ”¹äº† Gradle ç‰ˆæœ¬
<span class="gd">- distributionUrl=https\://services.gradle.org/distributions/gradle-7.5-all.zip
</span><span class="gi">+ distributionUrl=https\://services.gradle.org/distributions/gradle-8.4-all.zip
</span></code></pre></div></div>

<h2 id="å‡çº§-kotlin-ç‰ˆæœ¬">å‡çº§ Kotlin ç‰ˆæœ¬</h2>

<p>å‡çº§å®Œ AGP åå¹¶æ²¡æœ‰ç»“æŸï¼Œè¿˜éœ€è¦å‡çº§ Kotlin ç‰ˆæœ¬ï¼Œå› ä¸ºä¸åŒçš„ Android Studio æ†ç»‘ Kotlin ç‰ˆæœ¬ä¸åŒã€‚</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// ä¿®æ”¹ android/build.gradle æ–‡ä»¶ä¸­ç‰ˆæœ¬ä¸º 1.9.20
<span class="gd">- ext.kotlin_version = '1.8.0'
</span><span class="gi">+ ext.kotlin_version = '1.9.20'
</span></code></pre></div></div>

<p>ä¿®æ”¹æ–‡ä»¶<code class="language-plaintext highlighter-rouge">android/app/build.gradle</code>è®¾ç½® <strong>minSdkVersionã€compileSdkVersion</strong>ã€‚<code class="language-plaintext highlighter-rouge">com.xx.yy</code>ä¿®æ”¹ä¸ºè‡ªå·±çš„åŒ…åã€‚</p>

<div class="language-gradle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">android</span> <span class="o">{</span>
    <span class="n">namespace</span> <span class="s2">"com.xx.yy"</span>
    <span class="c1">// è®¾ç½®ç¼–è¯‘çš„ SDK ç‰ˆæœ¬ä¸º flutter.compileSdkVersion</span>
    <span class="n">compileSdkVersion</span> <span class="n">flutter</span><span class="o">.</span><span class="na">compileSdkVersion</span>
<span class="o">......</span>

<span class="n">defaultConfig</span> <span class="o">{</span>
    <span class="n">applicationId</span> <span class="s2">"com.xx.yy"</span>
    <span class="c1">// è®¾ç½®æœ€å°å…¼å®¹ç‰ˆæœ¬ä¸º flutter.minSdkVersion</span>
    <span class="n">minSdkVersion</span> <span class="n">flutter</span><span class="o">.</span><span class="na">minSdkVersion</span>
    <span class="n">targetSdkVersion</span> <span class="n">flutter</span><span class="o">.</span><span class="na">targetSdkVersion</span>
<span class="o">......</span>
</code></pre></div></div>

<p><strong>å¦‚æœæƒ³æŸ¥çœ‹ Flutter å¯¹åº”å…¼å®¹ç‰ˆæœ¬ã€‚</strong></p>

<div class="language-gradle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ä¿®æ”¹æ–‡ä»¶`android/app/build.gradle`ï¼Œæ‰“å° Gradle å’Œ Flutter ç‰ˆæœ¬</span>
<span class="n">println</span> <span class="s2">"gradle.gradleVersion: $gradle.gradleVersion"</span>
<span class="n">println</span> <span class="s2">"android.buildToolsVersion: $android.buildToolsVersion"</span>
<span class="n">println</span> <span class="s2">"flutter.compileSdkVersion: $flutter.compileSdkVersion"</span>
<span class="n">println</span> <span class="s2">"flutter.targetSdkVersion: $flutter.targetSdkVersion"</span>
<span class="n">println</span> <span class="s2">"flutter.minSdkVersion: $flutter.minSdkVersion"</span>
<span class="n">println</span> <span class="s2">"flutter.ndkVersion: $flutter.ndkVersion"</span>

<span class="n">android</span> <span class="o">{</span>
<span class="o">......</span>
</code></pre></div></div>

<p>åˆ°è¿™é‡Œé—®é¢˜è§£å†³ï¼Œç¼–è¯‘é€šè¿‡è¿è¡Œæ— è­¦å‘ŠğŸ‰ğŸ‰</p>

<h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</h2>

<ul>
  <li><a href="https://developer.android.com/studio/build/dependencies?hl=zh-cn#groovy">android æ·»åŠ  build ä¾èµ–é¡¹</a></li>
  <li><a href="https://www.cnblogs.com/inexbot/p/17593347.html">Flutter å‡çº§ Gradle å’Œ Gradle Plugin</a></li>
  <li><a href="https://github.com/juliansteenbakker/mobile_scanner/issues/729">Failed to transform kotlin-stdlib-1.9.0.jaré”™è¯¯è§£å†³</a></li>
  <li><a href="https://zhuanlan.zhihu.com/p/668428076">Android Studio Gradle 8.0å‡çº§è®°å½•</a></li>
  <li><a href="https://developer.android.google.cn/build/releases/gradle-plugin?hl=zh-cn">Android Gradle æ’ä»¶å…¼å®¹åˆ—è¡¨</a></li>
  <li><a href="https://developer.android.com/build/kotlin-support?hl=zh-cn">Kotlin ç‰ˆæœ¬æ‰€éœ€çš„ D8 å’Œ R8 ç¼–è¯‘å™¨ç‰ˆæœ¬</a></li>
</ul>


  </section>
</article>

<section>

    <div style="text-align:center;margin:50px 0; font:normal 14px/24px 'MicroSoft YaHei';"></div>

    <ul class="pager">
        
        <li class="previous">
            <a href="/2021/01/XCFramework-%E6%98%AF%E7%94%A8%E6%9D%A5%E5%B9%B2%E4%BB%80%E4%B9%88%E7%9A%84/" data-toggle="tooltip"
                data-placement="top" title="XCFramework æ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„">ä¸Šä¸€ç¯‡ï¼š <span>XCFramework æ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„</span>
            </a>
        </li>
        
        
    </ul>
</section>
<section class="post-comments">

</section>


            <section class="footer">
    <footer>
        <div class = "footer_div">
            <nav class="cover-navigation navigation--social">
                <ul class="navigation">
                    
                    
                    <!-- Github -->
                    <li class="navigation__item_social">
                        <a href="https://github.com/muzipiao" title="@muzipiao çš„ Github" target="_blank">
                            <div class="footer-social-icon" style="background-image:url(/images/github.png);"></div>
                        </a>
                    </li>
                    
                    
                    
                    
                    
                    <!-- Zhihu -->
                    <li class="navigation__item_social">
                        <a href="https://juejin.cn/user/5b2f1c51f265da59ad439f69" title="@5b2f1c51f265da59ad439f69" target="_blank">
                            <div class="footer-social-icon" style="background-image:url(/images/juejin.png);"></div>
                        </a>
                    </li>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <!-- Email -->
                    <li class="navigation__item_social">
                        <a href="mailto:lifei_zdjl@126.com" title="Contact me">
                            <div class="footer-social-icon" style="background-image:url(/images/email.png);"></div>
                        </a>
                    </li>
                    
                    
                    <!-- RSS -->
                    <li class="navigation__item_social">
                        <a href="/feed.xml" rel="author" title="RSS" target="_blank">
                            <div class="footer-social-icon" style="background-image:url(/images/rss.png);"></div>
                            <span class="label">RSS</span>
                        </a>
                    </li>
                    
                </ul>
            </nav>
        </div>
        <div><br><br></div>
        <div class="footer__copyright" >
            <br>
            <span>Â©2024&nbsp;cocoafei&nbsp;</span>
        </div>
    </footer>
</section>

        </div>
    </div>
    
    <script type="text/javascript" src="//libs.baidu.com/jquery/1.11.3/jquery.min.js"></script>
<script type="text/javascript" src="/js/main.js"></script>

<script type="text/javascript" src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>



    
  </body>

</html>
