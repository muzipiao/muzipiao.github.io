<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>è‡ªå»ºå±€åŸŸç½‘ OTA æœåŠ¡å™¨</title>
  <meta name="description" content="  ç¬¬ä¸€æ­¥ ç¼–è¾‘å‰çš„å‡†å¤‡  ç¬¬äºŒæ­¥ é…ç½®HttpæœåŠ¡  ç¬¬ä¸‰æ­¥ ç”Ÿæˆè‡ªç­¾åè¯ä¹¦  ç¬¬å››æ­¥ é…ç½®HTTPSæœåŠ¡  ç¬¬äº”æ­¥ æ”¾ç½®èµ„æºæ–‡ä»¶  å‚è€ƒé“¾æ¥">
  <meta name="author" content="leopardpan">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="è‡ªå»ºå±€åŸŸç½‘ OTA æœåŠ¡å™¨">
  <meta name="twitter:description" content="  ç¬¬ä¸€æ­¥ ç¼–è¾‘å‰çš„å‡†å¤‡  ç¬¬äºŒæ­¥ é…ç½®HttpæœåŠ¡  ç¬¬ä¸‰æ­¥ ç”Ÿæˆè‡ªç­¾åè¯ä¹¦  ç¬¬å››æ­¥ é…ç½®HTTPSæœåŠ¡  ç¬¬äº”æ­¥ æ”¾ç½®èµ„æºæ–‡ä»¶  å‚è€ƒé“¾æ¥">
  
  <meta property="og:type" content="article">
  <meta property="og:title" content="è‡ªå»ºå±€åŸŸç½‘ OTA æœåŠ¡å™¨">
  <meta property="og:description" content="  ç¬¬ä¸€æ­¥ ç¼–è¾‘å‰çš„å‡†å¤‡  ç¬¬äºŒæ­¥ é…ç½®HttpæœåŠ¡  ç¬¬ä¸‰æ­¥ ç”Ÿæˆè‡ªç­¾åè¯ä¹¦  ç¬¬å››æ­¥ é…ç½®HTTPSæœåŠ¡  ç¬¬äº”æ­¥ æ”¾ç½®èµ„æºæ–‡ä»¶  å‚è€ƒé“¾æ¥">
  
  <link rel="icon" type="image/png" href="/images/favicon.png" />
  <link href="/images/favicon.png" rel="shortcut icon" type="image/png">
  
  <link rel="stylesheet" href="/css/main.css">
  <link href="//libs.baidu.com/fontawesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="canonical" href="http://localhost:4000/2018/11/%E8%87%AA%E5%BB%BA%E5%B1%80%E5%9F%9F%E7%BD%91-OTA-%E6%9C%8D%E5%8A%A1%E5%99%A8/">
  <link rel="alternate" type="application/rss+xml" title="cocoafei" href="http://localhost:4000/feed.xml">

<!-- ç™¾åº¦ç»Ÿè®¡ -->
  

<!-- google ç»Ÿè®¡ -->
  

</head>


  <body>

    <span class="mobile btn-mobile-menu">        
      <div class="nav_container">
         <nav class="nav-menu-item" style = "float:right">
            <i class="nav-menu-item">
              <a href="/#blog" title="" class="blog-button">  åšå®¢ä¸»é¡µ
              </a>
            </i>
            
                <i class="nav-menu-item">

                  <a href="/archive" title="archive" class="btn-mobile-menu__icon">
                      æ‰€æœ‰æ–‡ç« 
                  </a>
                </i>
            
                <i class="nav-menu-item">

                  <a href="/tags" title="tags" class="btn-mobile-menu__icon">
                      æ ‡ç­¾
                  </a>
                </i>
            
                <i class="nav-menu-item">

                  <a href="/about" title="about" class="btn-mobile-menu__icon">
                      å…³äºæˆ‘
                  </a>
                </i>
            
          </nav>
      </div>
    </span>
    
    <header class="panel-cover panel-cover--collapsed" style="background-image: url('/images/background-cover.png')">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">
        <!-- å¤´åƒæ•ˆæœ-start -->
        <div class="ih-item circle effect right_to_left">            
            <a href="/#blog" title="å‰å¾€ cocoafei çš„ä¸»é¡µ" class="blog-button">
                <div class="img"><img src="/images/avatar.jpg" alt="img"></div>
                <div class="info">
                    <div class="info-back">
                        <h2> 
                            
                                cocoafei
                            
                        </h2>
                        <p>
                           
                                iOS / Python
                            
                        </p>
                    </div>
                </div>
            </a>
        </div>
        <!-- å¤´åƒæ•ˆæœ-end -->
        <h1 class="panel-cover__title panel-title"><a href="/#blog" title="link to homepage for cocoafei" class="blog-button">cocoafei</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">ä¸ªäººç«™</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">æ¬¢è¿æ¥åˆ°æˆ‘çš„Blog~</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        
        
        

        <div class="navigation-wrapper">
          <div>
            <nav class="cover-navigation cover-navigation--primary">
              <ul class="navigation">
                <li class="navigation__item"><a href="/#blog" title="" class="blog-button">åšå®¢ä¸»é¡µ</a></li>
                
                  <li class="navigation__item"><a href="/archive" title="archive">æ‰€æœ‰æ–‡ç« </a></li>
                
                  <li class="navigation__item"><a href="/tags" title="tags">æ ‡ç­¾</a></li>
                
                  <li class="navigation__item"><a href="/about" title="about">å…³äºæˆ‘</a></li>
                
              </ul>
            </nav>
          </div>          
        </div>


        </div>
      </div>
    </div>
    
    
    <div class="panel-cover--overlay cover-clear"></div>
    
  </div>
</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title">è‡ªå»ºå±€åŸŸç½‘ OTA æœåŠ¡å™¨</h1>
    <div class="post-meta">
      <img src="/images/calendar.png" width="20px" style="vertical-align:middle;"/> 
      <time datetime="2018-11-10 00:00:00 +0800" itemprop="datePublished" class="post-meta__date date" style="vertical-align:middle;">2018-11-10</time>
    </p>  
    </div>
  </header>

  <section class="post">
    <ul>
  <li><a href="#1_0">ç¬¬ä¸€æ­¥ ç¼–è¾‘å‰çš„å‡†å¤‡</a></li>
  <li><a href="#2_0">ç¬¬äºŒæ­¥ é…ç½®HttpæœåŠ¡</a></li>
  <li><a href="#3_0">ç¬¬ä¸‰æ­¥ ç”Ÿæˆè‡ªç­¾åè¯ä¹¦</a></li>
  <li><a href="#4_0">ç¬¬å››æ­¥ é…ç½®HTTPSæœåŠ¡</a></li>
  <li><a href="#5_0">ç¬¬äº”æ­¥ æ”¾ç½®èµ„æºæ–‡ä»¶</a></li>
  <li><a href="#6_0">å‚è€ƒé“¾æ¥</a></li>
</ul>

<h2 id="ç¬¬ä¸€æ­¥-ç¼–è¾‘å‰çš„å‡†å¤‡"><a id="1_0"></a>ç¬¬ä¸€æ­¥ ç¼–è¾‘å‰çš„å‡†å¤‡</h2>

<h4 id="11-macè‡ªå¸¦-apache-æœåŠ¡å™¨">1.1 Macè‡ªå¸¦ Apache æœåŠ¡å™¨</h4>

<p>Mac è‡ªå¸¦ Apache æœåŠ¡å™¨ï¼Œæˆ‘ä»¬åœ¨ç»ˆç«¯è¾“å…¥<code class="language-plaintext highlighter-rouge"> sudo apachectl -k start </code>æ‰“å¼€ç½‘é¡µè¾“å…¥<code class="language-plaintext highlighter-rouge"> localhost</code>ï¼Œå‘ç°ç½‘é¡µä¼šæ˜¾ç¤ºå¦‚ä¸‹ï¼š</p>

<h5 id="it-works">It works!</h5>

<p>Apache æœåŠ¡å™¨å¯åŠ¨æˆåŠŸã€‚</p>

<h4 id="12-ä¿®æ”¹ç³»ç»Ÿæ–‡ä»¶å‰å…ˆå¤‡ä»½">1.2 ä¿®æ”¹ç³»ç»Ÿæ–‡ä»¶å‰å…ˆå¤‡ä»½</h4>

<p>ä¾‹å¦‚éœ€è¦ä¿®æ”¹<code class="language-plaintext highlighter-rouge"> /etc/apache2 </code>æ–‡ä»¶å¤¹ä¸‹ http.conf æ–‡ä»¶</p>

<ol>
  <li>åˆ‡æ¢å·¥ä½œç›®å½•ä¸‹ï¼š</li>
</ol>

<p><code class="language-plaintext highlighter-rouge"> cd /etc/apache2 </code></p>

<ol>
  <li>å¤‡ä»½æ–‡ä»¶ï¼Œåªéœ€è¦æ‰§è¡Œä¸€æ¬¡ï¼š</li>
</ol>

<p><code class="language-plaintext highlighter-rouge"> sudo cp httpd.conf httpd.conf.bak </code></p>

<ol>
  <li>å¦‚æœæ“ä½œå‡ºç°é”™è¯¯ï¼å¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼Œæ¢å¤å¤‡ä»½çš„ httpd.conf æ–‡ä»¶ï¼š</li>
</ol>

<p><code class="language-plaintext highlighter-rouge"> sudo cp httpd.conf.bak httpd.conf </code></p>

<h4 id="13-é€šè¿‡-xcode-æˆ–è€…-vim-ä¿®æ”¹ç³»ç»Ÿæ–‡ä»¶">1.3 é€šè¿‡ Xcode æˆ–è€… vim ä¿®æ”¹ç³»ç»Ÿæ–‡ä»¶</h4>

<p>é€šè¿‡ Xcode ä¿®æ”¹æ¯”è¾ƒç®€å•ï¼Œå°†æ–‡ä»¶è„±å‡ºåˆ°æ¡Œé¢ä¸€ä»½ï¼Œä¿®æ”¹åæ‹–å›åŸæ¥çš„æ–‡ä»¶å¤¹è¦†ç›–å³å¯ã€‚</p>

<p>æ³¨æ„çš„æ˜¯ï¼Œåœ¨<strong>ç³»ç»Ÿç›®å½•ä¸‹æ˜¯ä¸å¯ä»¥ç›´æ¥ç”¨ Xcode ä¿®æ”¹</strong>çš„ï¼Œå¯å°†æ–‡ä»¶å¤åˆ¶åˆ°æ¡Œé¢ä¸Šï¼Œç”¨ Xcode æ‰“å¼€ä¿®æ”¹ï¼Œç„¶åæ‹–å…¥ç³»ç»Ÿç›®å½•ä¸‹è¦†ç›–å³å¯ã€‚</p>

<p>é€šè¿‡ vim ä¿®æ”¹æ–‡ä»¶ï¼Œå¯ç›´æ¥ä¿®æ”¹ç³»ç»Ÿæ–‡ä»¶ï¼Œä¿®æ”¹æ¯”è¾ƒæ–¹ä¾¿ã€‚ä»¥ä¸‹ä¿®æ”¹ç³»ç»Ÿé…ç½®æ–‡ä»¶ç”¨åˆ°vimï¼Œå¦‚æœä¸ä¹ æƒ¯ä½¿ç”¨vimä¿®æ”¹ï¼Œå¯ä½¿ç”¨ Xcode ç¼–è¾‘ä¿®æ”¹ã€‚</p>

<h4 id="14-vim-ç®€å•æ“ä½œ">1.4 vim ç®€å•æ“ä½œ</h4>

<ol>
  <li>ä¾‹å¦‚å½“å‰ç›®å½•ä¸‹æœ‰ä¸€ä¸ª httpd.conf æ–‡ä»¶ï¼Œéœ€è¦ä¿®æ”¹ç¬¬ 100 è¡Œä¸º abcdefã€‚</li>
  <li>è¾“å…¥å‘½ä»¤<code class="language-plaintext highlighter-rouge"> sudo vim httpd.conf </code>ã€‚</li>
  <li>é¼ æ ‡æ»šåŠ¨æˆ–è€…æŒ‰ä¸Šä¸‹é”®å…‰æ ‡ç§»åŠ¨åˆ°ç¬¬ 100 è¡Œï¼ŒæŒ‰ i é”®è¿›å…¥ç¼–è¾‘æ¨¡å¼
å°†ç¬¬ 100 è¡Œå†…å®¹åˆ é™¤å¹¶æ›¿æ¢ä¸º abcdef ã€‚</li>
  <li>æŒ‰<code class="language-plaintext highlighter-rouge"> esc </code>é”®é€€å‡ºç¼–è¾‘ã€‚</li>
  <li>è¾“å…¥<code class="language-plaintext highlighter-rouge"> :wq </code>é€€å‡ºå¹¶ä¿å­˜ï¼›å¦‚æœç¼–è¾‘é”™è¯¯è¾“å…¥<code class="language-plaintext highlighter-rouge">:q! </code>ä¸ä¿å­˜æ–‡ä»¶ï¼Œå¼ºåˆ¶é€€å‡ºviã€‚</li>
</ol>

<h2 id="ç¬¬äºŒæ­¥-é…ç½®httpæœåŠ¡"><a id="2_0"></a>ç¬¬äºŒæ­¥ é…ç½®HttpæœåŠ¡</h2>

<h4 id="21-åˆ›å»º-web-æ–‡ä»¶å¤¹">2.1 åˆ›å»º web æ–‡ä»¶å¤¹</h4>

<p>æˆ‘ä»¬åœ¨å½“å‰ç”¨æˆ·æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªwebæ–‡ä»¶å¤¹ï¼Œç„¶åæ”¾å…¥ä¸€äº›æ–‡ä»¶ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p>

<p><img src="/images/posts/ota/ota2.1.png" alt="web æ–‡ä»¶å¤¹" /></p>

<h4 id="22-ç¼–è¾‘-httpconf-æ–‡ä»¶">2.2 ç¼–è¾‘ http.conf æ–‡ä»¶</h4>

<ol>
  <li>åˆ‡æ¢å·¥ä½œç›®å½•ä¸‹ï¼š<code class="language-plaintext highlighter-rouge"> cd /etc/apache2 </code></li>
  <li>å¤‡ä»½æ–‡ä»¶ï¼š<code class="language-plaintext highlighter-rouge"> sudo cp httpd.conf httpd.conf.bak </code></li>
  <li>
    <p>ç”¨vimç¼–è¾‘httpd.confæ–‡ä»¶ï¼š<code class="language-plaintext highlighter-rouge"> sudo vim httpd.conf </code></p>
  </li>
  <li>å°†ä¸‹é¢è·¯å¾„æ›´æ”¹ä¸ºä½ è‡ªå·±webç½‘é¡µè·¯å¾„ï¼ˆçº¦245è¡Œï¼‰</li>
</ol>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DocumentRoot <span class="s2">"/Library/WebServer/Documents"</span>
&lt;Directory <span class="s2">"/Library/WebServer/Documentsâ€&gt;

ä¿®æ”¹ä¸ºæˆ‘å½“å‰ç”¨æˆ·ç›®å½•ä¸‹å»ºç«‹çš„ä¸€ä¸ª web æ–‡ä»¶å¤¹

DocumentRoot "</span>/Users/lf/web<span class="s2">"
&lt;Directory "</span>/Users/lf/webâ€&gt;
</code></pre></div></div>

<ol>
  <li>ä¸ºäº†ä¾¿äºæµè§ˆ web æ–‡ä»¶å¤¹ï¼Œæ·»åŠ  Indexes å­—æ®µ</li>
</ol>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Options FollowSymLinks Multiviews

ä¿®æ”¹ä¸º

Options Indexes FollowSymLinks Multiviews
</code></pre></div></div>

<p><img src="/images/posts/ota/ota2.2.5.png" alt="ä¿®æ”¹httpd" /></p>

<ol>
  <li>å°†ä¸‹é¢çš„#å·æ³¨é‡Šå»æ‰ï¼Œå¼€å¯PHPï¼ˆçº¦177è¡Œï¼‰</li>
</ol>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#LoadModule php7_module libexec/apache2/libphp7.so</span>

ä¿®æ”¹ä¸º

LoadModule php7_module libexec/apache2/libphp7.so

è¾ƒæ—§çš„ç³»ç»Ÿä¸ºï¼ˆ#LoadModule php5_module libexec/apache2/libphp5.soï¼‰
</code></pre></div></div>

<p><img src="/images/posts/ota/ota2.2.6.png" alt="å¼€å¯PHP" /></p>

<ol>
  <li>
    <p>ç„¶åæŒ‰ ESC é”®é€€å‡ºç¼–è¾‘ï¼Œè¾“å…¥<code class="language-plaintext highlighter-rouge"> :wq </code>ä¿å­˜é€€å‡ºã€‚</p>
  </li>
  <li>
    <p>ç»ˆç«¯ä¸­è¾“å…¥<code class="language-plaintext highlighter-rouge"> sudo apachectl -k restart </code>é‡å¯ Apache æœåŠ¡å™¨ã€‚</p>
  </li>
  <li>
    <p>å¼€å¯ apache æœåŠ¡å™¨.æ‰“å¼€æµè§ˆå™¨,æœç´¢æ¡†ä¸­è¾“å…¥<code class="language-plaintext highlighter-rouge"> 127.0.0.1 </code>æˆ–è€…<code class="language-plaintext highlighter-rouge"> localhost </code>å°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä¹‹å‰æ·»åŠ çš„ç½‘ç»œèµ„æºã€‚</p>
  </li>
</ol>

<p><img src="/images/posts/ota/ota2.2.9.png" alt="å¼€å¯HTTPæœåŠ¡æˆåŠŸ" /></p>

<h4 id="23-apache-å¸¸ç”¨æ“ä½œå‘½ä»¤">2.3 Apache å¸¸ç”¨æ“ä½œå‘½ä»¤</h4>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># å¯åŠ¨ apache æœåŠ¡å™¨</span>
<span class="nb">sudo </span>apachectl <span class="nt">-k</span> start

<span class="c"># é‡æ–°å¯åŠ¨ apache æœåŠ¡å™¨</span>
<span class="nb">sudo </span>apachectl <span class="nt">-k</span> restart

<span class="c"># å…³é—­ apache æœåŠ¡å™¨</span>
<span class="nb">sudo </span>apachectl <span class="nt">-k</span> stop
</code></pre></div></div>

<h4 id="24-é‡å¯æ—¶æŠ¥é”™">2.4 é‡å¯æ—¶æŠ¥é”™</h4>

<p>é‡å¯çš„æ—¶å€™å‘ç°æŠ¥é”™ï¼Œä½†ä¸å½±å“ä½¿ç”¨</p>

<p><img src="/images/posts/ota/ota2.4.png" alt="ServerNameé”™è¯¯" /></p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>AH00558: httpd: Could not reliably determine the server's fully

qualified domain name, using LFdeMacBook-Pro.local. Set the

'ServerName' directive globally to suppress this message
</code></pre></div></div>

<p>å¦‚æœæƒ³è§£å†³æ­¤æŠ¥é”™ï¼Œå¯å†æ¬¡ç¼–è¾‘ httpd.conf æ–‡ä»¶</p>

<p><code class="language-plaintext highlighter-rouge"> sudo vim httpd.conf </code></p>

<p>å°†ä¸‹é¢çš„#å·æ³¨é‡Šå»æ‰ï¼Œå¹¶ä¿®æ”¹ï¼ˆçº¦221è¡Œï¼‰</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#ServerName www.example.com:80</span>

ä¿®æ”¹ä¸º

ServerName localhost:80
</code></pre></div></div>

<p>ç„¶åç»ˆç«¯è¾“å…¥ä¸‹é¢æŒ‡ä»¤é‡å¯å³å¯ã€‚</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apachectl <span class="nt">-k</span> restart
</code></pre></div></div>

<h2 id="ç¬¬ä¸‰æ­¥-ç”Ÿæˆè‡ªç­¾åè¯ä¹¦"><a id="3_0"></a>ç¬¬ä¸‰æ­¥ ç”Ÿæˆè‡ªç­¾åè¯ä¹¦</h2>

<blockquote>
  <p>iOS7.1 ä»¥åï¼Œ Apple ä¸å†æ”¯æŒ HTTP æ–¹å¼çš„ OTA ï¼Œæ‰€ä»¥éœ€è¦ä¸º Apache å¼€å¯ HTTPS æœåŠ¡ï¼Œå¹¶åˆ©ç”¨ OpenSSL åˆ¶ä½œè‡ªç­¾åè¯ä¹¦ã€‚</p>
</blockquote>

<h4 id="31-ç”ŸæˆæœåŠ¡å™¨ç§é’¥-serverkey">3.1 ç”ŸæˆæœåŠ¡å™¨ç§é’¥ server.key</h4>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo mkdir</span> /private/etc/apache2/ssl 

<span class="nb">cd</span> /private/etc/apache2/ssl

<span class="nb">sudo </span>openssl genrsa <span class="nt">-out</span> server.key 1024
</code></pre></div></div>

<p>ç”Ÿæˆå¦‚ä¸‹æ‰€ç¤ºæ–‡ä»¶</p>

<p><img src="/images/posts/ota/ota3.1.png" alt="æœåŠ¡å™¨ç§é’¥" /></p>

<h4 id="32-ç”Ÿæˆç­¾ç½²ç”³è¯·">3.2 ç”Ÿæˆç­¾ç½²ç”³è¯·</h4>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>openssl req <span class="nt">-new</span> <span class="nt">-key</span> server.key <span class="nt">-out</span> server.csr
</code></pre></div></div>

<p>æ³¨æ„ï¼šéœ€è¦å®Œæ•´å¡«å†™å„é¡¹ä¿¡æ¯ï¼Œæ³¨æ„<code class="language-plaintext highlighter-rouge"> Common Name </code>å¿…é¡»æ˜¯æœåŠ¡å™¨ ip æˆ–åŸŸåï¼Œå…¶ä»–ä¿¡æ¯å¯ä»¥éšæ„å¡«å†™ã€‚ä¾‹å¦‚æˆ‘éœ€è¦æŠŠ ipa å®‰è£…åŒ…æ”¾åœ¨ 192.168.1.188 çš„å†…ç½‘æœåŠ¡å™¨ä¸Šï¼Œåˆ™<code class="language-plaintext highlighter-rouge"> Common Name </code>å°±å¡«å†™ 192.168.1.188 ã€‚å¦‚æœè¿™ä¸€æ­¥æ¼å¡«ä¿¡æ¯ï¼Œå¯èƒ½ä¼šå¯¼è‡´æœ€åç”Ÿæˆçš„ ca æ–‡ä»¶æ˜¯ç©ºçš„ã€‚</p>

<p><img src="/images/posts/ota/ota3.2.png" alt="ç”Ÿæˆserver.csr" /></p>

<h4 id="33-ç”Ÿæˆ-ca-ç§é’¥cacrt">3.3 ç”Ÿæˆ CA ç§é’¥ca.crt</h4>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>openssl req  <span class="nt">-new</span> <span class="nt">-x509</span> <span class="nt">-days</span> 365 <span class="nt">-key</span> server.key <span class="nt">-out</span> ca.crt
</code></pre></div></div>

<p>å¡«å†™ä¿¡æ¯å’Œä¸Šé¢çš„å¡«å†™çš„ä¸€æ ·å³å¯ï¼Œæ³¨æ„<code class="language-plaintext highlighter-rouge"> Common Name </code>å¿…é¡»å¡«å†™ï¼Œè¿™é‡Œè¿˜æ˜¯å¡«å†™192.168.1.188å³å¯ã€‚</p>

<p><img src="/images/posts/ota/ota3.3.png" alt="ç”Ÿæˆca.crt" /></p>

<h4 id="34-åˆ›å»ºæ–‡ä»¶å’Œæ–‡ä»¶å¤¹">3.4 åˆ›å»ºæ–‡ä»¶å’Œæ–‡ä»¶å¤¹</h4>

<p>åœ¨ ssl ç›®å½•ä¸‹åˆ›å»º demoCA æ–‡ä»¶å¤¹ï¼Œç„¶åè¿›å…¥ demoCA ï¼Œåˆ›å»ºä¸€ä¸ª index.txt å’Œ serialæ–‡ä»¶ï¼Œindex.txt ä¸ºç©ºï¼Œ serial å†…å®¹ä¸º01ï¼Œç„¶ååœ¨ demoCA ä¸­å†åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ newcerts</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo mkdir </span>demoCA <span class="o">&amp;&amp;</span> <span class="nb">cd </span>demoCA

<span class="nb">sudo mkdir </span>newcerts

<span class="nb">sudo touch </span>index.txt

<span class="nb">sudo touch </span>serial
</code></pre></div></div>

<p>ä½¿ç”¨ Xcode æˆ–è€… vim ç¼–è¾‘ serial æ–‡ä»¶ï¼Œç¬¬ä¸€è¡Œå†™å…¥ 01 ä¿å­˜å³å¯ã€‚</p>

<h4 id="35-ç­¾åç”Ÿæˆservercrt">3.5 ç­¾åç”Ÿæˆserver.crt</h4>

<p>æ‰§è¡Œå‘½ä»¤ï¼Œè¿”å›åˆ°sslæ–‡ä»¶å¤¹ä¸‹é¢</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> /private/etc/apache2/ssl
</code></pre></div></div>

<p>ç„¶åæ‰§è¡Œå‘½ä»¤ï¼Œç”¨caè¿›è¡Œç­¾åç”Ÿæˆserver.crt</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>openssl ca <span class="nt">-in</span> server.csr <span class="nt">-out</span> server.crt <span class="nt">-cert</span> ca.crt <span class="nt">-keyfile</span> server.key
</code></pre></div></div>

<p>è¿™ä¸€æ­¥å¯èƒ½ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Using configuration from /private/etc/ssl/openssl.cnf

variable lookup failed for ca::default_ca140736040362952:

error:0E06D06C:configuration file routines:NCONF_get_string:

no value:/BuildRoot/Library/Caches/com.apple.xbs/Sources/libressl/

libressl-22.50.2/libressl/crypto/conf/conf_lib.c:323:group=ca name=default_ca
</code></pre></div></div>

<p>è¿™æ˜¯ç”±äº<code class="language-plaintext highlighter-rouge"> /private/etc/ssl/ </code>æ–‡ä»¶å¤¹ä¸‹ç¼ºå°‘ openssl.cnf çš„é—®é¢˜ï¼Œè§£å†³åŠæ³•æ˜¯æ‹·è´ä¸€ä»½ï¼Œè¾“å…¥å‘½ä»¤</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cp</span> /usr/local/etc/openssl/openssl.cnf /private/etc/ssl/openssl.cnf
</code></pre></div></div>

<p>ä½¿ç”¨Xcodeæˆ–è€…vimä¿®æ”¹<code class="language-plaintext highlighter-rouge"> /private/etc/ssl/openssl.cnf </code>æ–‡ä»¶ï¼Œè¿™é‡Œä½¿ç”¨vimç›´æ¥ä¿®æ”¹</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>vim /private/etc/ssl/openssl.cnf
</code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">dir</span>        <span class="o">=</span> ./demoCA        <span class="c"># Where everything is kept</span>
ä¿®æ”¹ä¸ºå½“å‰ä½ çš„demoCAè·¯å¾„
<span class="nb">dir</span>        <span class="o">=</span>  /private/etc/apache2/ssl/demoCA
</code></pre></div></div>

<p>ä¿®æ”¹å®Œæˆåå†æ‰§è¡Œå‘½ä»¤</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>openssl ca <span class="nt">-in</span> server.csr <span class="nt">-out</span> server.crt <span class="nt">-cert</span> ca.crt <span class="nt">-keyfile</span> server.key
</code></pre></div></div>

<p>ä¼šæç¤ºæœ‰æ•ˆæœŸå’Œç”Ÿæˆè¯ä¹¦ï¼Œéƒ½è¾“å…¥yå³å¯ã€‚</p>

<p><img src="/images/posts/ota/ota3.5.1.png" alt="ç”Ÿæˆè¯ä¹¦æˆåŠŸæç¤º" /></p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Certificate is to be certified until Nov 10 06:39:36 2019 GMT (365 days)
Sign the certificate? [y/n]:y
ï¼ˆç¿»è¯‘ï¼‰è¯ä¹¦æœ‰æ•ˆæœŸè‡³11æœˆ10æ—¥06:39:36 2019 GMT(365å¤©)
1 out of 1 certificate requests certified, commit? [y/n]y
ç­¾ç½²çš„è¯ä¹¦å—?
ï¼ˆç¿»è¯‘ï¼‰1 / 1çš„è¯ä¹¦è¯·æ±‚è¢«è®¤è¯ï¼Œæäº¤?
</code></pre></div></div>

<p>æ­¤æ—¶æˆ‘ä»¬çœ‹åˆ° HTTPS è¯ä¹¦å·²ç»ç”Ÿæˆå®Œæˆã€‚</p>

<p><img src="/images/posts/ota/ota3.5.2.png" alt="è¯ä¹¦åˆ—è¡¨" /></p>

<h2 id="ç¬¬å››æ­¥-é…ç½®httpsæœåŠ¡"><a id="4_0"></a>ç¬¬å››æ­¥ é…ç½®HTTPSæœåŠ¡</h2>

<h4 id="41-ç¼–è¾‘-httpdconf-æ–‡ä»¶">4.1 ç¼–è¾‘ httpd.conf æ–‡ä»¶</h4>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>vim /private/etc/apache2/httpd.conf
</code></pre></div></div>

<p>æŠŠä»¥ä¸‹å››è¡Œä»£ç å‰å¤´çš„æ³¨é‡Šå»æ‰</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LoadModule ssl_module libexec/apache2/mod_ssl.so

LoadModule socache_shmcb_module

libexec/apache2/mod_socache_shmcb.so

Include /private/etc/apache2/extra/httpd-ssl.conf

Include /private/etc/apache2/extra/httpd-vhosts.conf
</code></pre></div></div>

<p>æ³¨æ„ï¼šå¦‚æœä½ çš„ httpd.conf ä¸­ç¼ºå°‘äº†æŸè¡Œï¼Œä½ å¯ä»¥è‡ªè¡Œæ·»åŠ è¿›å»å³å¯ã€‚</p>

<h4 id="42-ç¼–è¾‘-httpd-sslconf-æ–‡ä»¶">4.2 ç¼–è¾‘ httpd-ssl.conf æ–‡ä»¶</h4>

<p>ç¼–è¾‘å‰å…ˆå¤‡ä»½ httpd-ssl.conf æ–‡ä»¶</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> /private/etc/apache2/extra/ <span class="o">&amp;&amp;</span> <span class="nb">sudo cp </span>httpd-ssl.conf httpd-ssl.conf.bak

<span class="nb">sudo </span>vim /private/etc/apache2/extra/httpd-ssl.conf
</code></pre></div></div>

<p>æŠŠä»¥ä¸‹ä¸¤è¡Œä»£ç çš„æ³¨é‡Šå»æ‰ï¼Œå¹¶ç¼–è¾‘ä¸ºä½ çš„è¯ä¹¦è·¯å¾„</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SSLCertificateFile "/private/etc/apache2/server.crt"
SSLCertificateKeyFile "/private/etc/apache2/server.key"

ç„¶åä¿®æ”¹è·¯å¾„ï¼Œæ”¹æˆä½ çš„è¯ä¹¦æ–‡ä»¶è·¯å¾„

SSLCertificateFile "/private/etc/apache2/ssl/server.crt"
SSLCertificateKeyFile "/private/etc/apache2/ssl/server.key"
</code></pre></div></div>

<h4 id="43-ç¼–è¾‘-httpd-vhostsconf-æ–‡ä»¶">4.3 ç¼–è¾‘ httpd-vhosts.conf æ–‡ä»¶</h4>

<p>ç¼–è¾‘å‰å…ˆå¤‡ä»½ httpd-vhosts.conf æ–‡ä»¶</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> /private/etc/apache2/extra/ <span class="o">&amp;&amp;</span> <span class="nb">sudo cp </span>httpd-vhosts.conf httpd-vhosts.conf.bak

<span class="nb">sudo </span>vim /private/etc/apache2/extra/httpd-vhosts.conf
</code></pre></div></div>

<p>å°† &lt;VirtualHost *:80&gt; ä¸­çš„ç¬¬äºŒä¸ªä¿®æ”¹</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;VirtualHost *:80&gt;
ServerAdmin 192.168.1.188
DocumentRoot "/Users/lf/web"
ServerName 192.168.1.188
ErrorLog "/private/var/log/apache2/dummy-host2.example.com-error_log"
CustomLog "/private/var/log/apache2/dummy-host2.example.com-access_log" common
&lt;/VirtualHost&gt;
</code></pre></div></div>

<p>ç„¶ååœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ  443 ç«¯å£æœåŠ¡</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;VirtualHost *:443&gt; 
SSLEngine on 
SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP:+eNULL
SSLCertificateFile /private/etc/apache2/ssl/server.crt
SSLCertificateKeyFile /private/etc/apache2/ssl/server.key
ServerName 192.168.1.188
DocumentRoot "/Users/lf/web"
&lt;/VirtualHost&gt;
</code></pre></div></div>

<p>æ³¨æ„ï¼š</p>

<ul>
  <li>SSLCertificateFile å¡«å†™ç”Ÿæˆçš„ server.crt</li>
  <li>SSLCertificateKeyFile å¡«å†™ç”Ÿæˆçš„ server.key</li>
  <li>ServerName å¡«å†™ä½ çš„ ip</li>
  <li>DocumentRoot å¡«å†™ä½ çš„ç«™ç‚¹è·¯å¾„</li>
</ul>

<h4 id="44-æ£€æŸ¥-apache-é…ç½®">4.4 æ£€æŸ¥ Apache é…ç½®</h4>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apachectl configtest
</code></pre></div></div>

<p>å¦‚æœå®ƒæç¤ºï¼š<code class="language-plaintext highlighter-rouge"> Syntax OK </code>ï¼Œé‚£å°±å®Œæˆ90%äº†ï¼Œå¦‚æœå®ƒæç¤ºæœ‰é”™ï¼Œé‚£å°±è¦æ ¹æ®é”™è¯¯æç¤ºè‡ªè¡Œè§£å†³äº†ã€‚</p>

<p>æˆ‘åœ¨è¿™ä¸ªç¯èŠ‚é‡åˆ°äº†ä¸€ä¸ªé”™è¯¯</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SSLSessionCache: 'shmcb' session cachenot supported 
(known names: ). Maybe you need toload the appropriate
socache module (mod_socache_shmcb?).
</code></pre></div></div>

<p>è§£å†³åŠæ³•å¦‚ä¸‹ï¼š</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>vim /private/etc/apache2/httpd.conf
</code></pre></div></div>

<p>ç„¶åæŠŠä»¥ä¸‹ä»£ç çš„æ³¨é‡Šå»æ‰</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>LoadModule socache_shmcb_module libexec/apache2/mod_socache_shmcb.so
</code></pre></div></div>

<p>å»æ‰æ³¨é‡Šåï¼Œä¿å­˜ï¼Œé‡æ–°æ£€æŸ¥é…ç½®ï¼Œç›´åˆ°æˆåŠŸã€‚</p>

<p>æ³¨æ„ï¼š
ä»ç½‘ä¸ŠæŸ¥æ‰¾çš„è·¯å¾„å¯èƒ½æ˜¯<code class="language-plaintext highlighter-rouge"> LoadModule socache_shmcb_module modules/mod_socache_shmcb.so </code>ï¼Œ
ä½†æˆ‘çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œè·¯å¾„è·Ÿä¸Šè¿°çš„ä¸ä¸€è‡´ï¼Œä½†ç»“å°¾éƒ½æ˜¯<code class="language-plaintext highlighter-rouge"> mod_socache_shmcb.so </code>å°±å¯¹äº†ã€‚</p>

<p>è§£å†³æ–¹æ¡ˆæ˜¯å‚è€ƒè¿™ç¯‡æ–‡ç« çš„<a href="http://stackoverflow.com/questions/20127138/apache-2-4-configuration-for-ssl-not-working">stackoverflowé—®ç­”</a>ã€‚</p>

<p>é‡å¯ Apache æœåŠ¡<code class="language-plaintext highlighter-rouge"> sudo apachectl -k restart </code>ï¼Œ
è¿™æ ·å°±å¯ä»¥ç”¨ https è®¿é—®æœ¬åœ°æœåŠ¡å™¨äº†ã€‚</p>

<h2 id="ç¬¬äº”æ­¥-æ”¾ç½®èµ„æºæ–‡ä»¶"><a id="5_0"></a>ç¬¬äº”æ­¥ æ”¾ç½®èµ„æºæ–‡ä»¶</h2>

<h4 id="51-ç½‘ç«™èµ„æºæ–‡ä»¶">5.1 ç½‘ç«™èµ„æºæ–‡ä»¶</h4>

<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨<code class="language-plaintext highlighter-rouge"> /Users/lf/web </code>æ–‡ä»¶å¤¹ä¸‹æ”¾ç½®çš„èµ„æºå¦‚ä¸‹ï¼š</p>

<p><img src="/images/posts/ota/ota5.1.png" alt="èµ„æºæ–‡ä»¶å¤¹" /></p>

<p>æ–‡ä»¶å¤¹åç§°å¯ä»»æ„å–ï¼Œåªè¦åœ¨ index.html å’Œ plist æ–‡ä»¶å¤¹ä¸­è·¯å¾„å¯¹åº”å³å¯ã€‚index.html ä¸è¦æ”¹åå­—ï¼Œé»˜è®¤ã€‚</p>

<ul>
  <li>ca.crt  CAè¯ä¹¦ï¼Œå°†<code class="language-plaintext highlighter-rouge"> /private/etc/apache2/ssl/ca.crt </code>æ‹·è´ä¸€ä»½åˆ°å½“å‰ web æ–‡ä»¶å¤¹ä¸‹</li>
  <li>ipa æ–‡ä»¶å¤¹ï¼Œæ”¾ç½® ipa èµ„æºåŒ…</li>
  <li>plist æ–‡ä»¶å¤¹ï¼Œæ”¾ç½® plist æ–‡ä»¶</li>
  <li>index.html ç´¢å¼•ç½‘é¡µï¼Œæ”¾ç½®é“¾æ¥ä¸‹è½½å®‰è£…è¯ä¹¦å’Œipa</li>
  <li>images æ–‡ä»¶å¤¹ï¼ŒæŒ‰ç…§ Xcode è¦æ±‚æ”¾ç½®ä¸€ä¸ª 57Ã—57 å’Œ 512Ã—512 çš„ png å›¾ç‰‡ï¼Œè¿˜æ²¡å‘ç°ä»€ä¹ˆç”¨é€”ã€‚</li>
</ul>

<h4 id="52-æ”¾ç½®-ipa-åŒ…">5.2 æ”¾ç½® ipa åŒ…</h4>
<p>APP æ‰“åŒ…ï¼Œå¯¼å‡º ipa åŒ…å°±æ²¡å¿…è¦å¤šè¯´äº†ï¼Œå¯ä»¥å¯¼å‡º Ad Hoc æˆ–è€… Development çš„ ipa åŒ…ï¼Œå°† ipa æ”¾åœ¨æ”¾åœ¨ web æ–‡ä»¶å¤¹ä¸‹ ipa æ–‡ä»¶å¤¹ä¸­ã€‚</p>

<h4 id="53-æ”¾ç½®plistæ–‡ä»¶">5.3 æ”¾ç½®plistæ–‡ä»¶</h4>

<p>æƒ³åœ¨çº¿å®‰è£…ï¼Œè¿˜éœ€è¦ä¸€ä¸ª plist æ–‡ä»¶ï¼Œæ¯ä¸ª ipa åŒ…å¯¹åº”ä¸€ä¸ª plist æ–‡ä»¶ï¼Œå°†<code class="language-plaintext highlighter-rouge"> https://192.168.1.188/ipa/LFDev_4.2.1.ipa </code>æ›´æ”¹ä¸ºç”Ÿæˆè¯ä¹¦æ—¶çš„ ip æˆ–è€…åŸŸåï¼Œç„¶åå¯¹åº” ipa æ–‡ä»¶è·¯å¾„å³å¯ï¼Œä¾‹å¦‚è¿™é‡Œçš„è·¯ç»æ˜¯ï¼Œåœ¨å½“å‰ web æ–‡ä»¶å¤¹ä¸‹çš„ ipa æ–‡ä»¶å¤¹ä¸­ï¼Œåç§°ä¸º LFDev_4.2.1.ipa çš„ ipa æ–‡ä»¶ã€‚</p>

<p>plist æ–‡ä»¶æ ¼å¼å¦‚ä¸‹ï¼š</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="cp">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span>
<span class="nt">&lt;plist</span> <span class="na">version=</span><span class="s">"1.0"</span><span class="nt">&gt;</span>
<span class="nt">&lt;dict&gt;</span>
<span class="nt">&lt;key&gt;</span>items<span class="nt">&lt;/key&gt;</span>
<span class="nt">&lt;array&gt;</span>
<span class="nt">&lt;dict&gt;</span>
<span class="nt">&lt;key&gt;</span>assets<span class="nt">&lt;/key&gt;</span>
<span class="nt">&lt;array&gt;</span>
<span class="nt">&lt;dict&gt;</span>
<span class="nt">&lt;key&gt;</span>kind<span class="nt">&lt;/key&gt;</span>
<span class="nt">&lt;string&gt;</span>software-package<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;key&gt;</span>url<span class="nt">&lt;/key&gt;</span>
<span class="nt">&lt;string&gt;</span>https://192.168.1.188/ipa/LFDev_4.2.1.ipa<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;/dict&gt;</span>
<span class="nt">&lt;dict&gt;</span>
<span class="nt">&lt;key&gt;</span>kind<span class="nt">&lt;/key&gt;</span>
<span class="nt">&lt;string&gt;</span>display-image<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;key&gt;</span>url<span class="nt">&lt;/key&gt;</span>
<span class="nt">&lt;string&gt;</span>https://192.168.1.188/images/image_57Ã—57.png<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;/dict&gt;</span>
<span class="nt">&lt;dict&gt;</span>
<span class="nt">&lt;key&gt;</span>kind<span class="nt">&lt;/key&gt;</span>
<span class="nt">&lt;string&gt;</span>full-size-image<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;key&gt;</span>url<span class="nt">&lt;/key&gt;</span>
<span class="nt">&lt;string&gt;</span>https://192.168.1.188/images/image_512Ã—512.png<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;/dict&gt;</span>
<span class="nt">&lt;/array&gt;</span>
<span class="nt">&lt;key&gt;</span>metadata<span class="nt">&lt;/key&gt;</span>
<span class="nt">&lt;dict&gt;</span>
<span class="nt">&lt;key&gt;</span>bundle-identifier<span class="nt">&lt;/key&gt;</span>
<span class="nt">&lt;string&gt;</span>com.xxx.yyy<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;key&gt;</span>bundle-version<span class="nt">&lt;/key&gt;</span>
<span class="nt">&lt;string&gt;</span>4.2.0<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;key&gt;</span>kind<span class="nt">&lt;/key&gt;</span>
<span class="nt">&lt;string&gt;</span>software<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;key&gt;</span>title<span class="nt">&lt;/key&gt;</span>
<span class="nt">&lt;string&gt;</span>Cxx<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;/dict&gt;</span>
<span class="nt">&lt;/dict&gt;</span>
<span class="nt">&lt;/array&gt;</span>
<span class="nt">&lt;/dict&gt;</span>
<span class="nt">&lt;/plist&gt;</span>
</code></pre></div></div>

<ul>
  <li>bundle-identifierçš„å€¼com.xxx.yyyæ›´æ”¹ä¸ºä½ åº”ç”¨çš„Bundle ID</li>
  <li>bundle-versionçš„å€¼4.2.0æ›´æ”¹ä¸ºä½ åº”ç”¨çš„ç‰ˆæœ¬version</li>
  <li>titleçš„å€¼Cxxæ›´æ”¹ä¸ºä½ åº”ç”¨çš„åç§°ï¼Œä¸‹è½½æ—¶ä¼šå¼¹å‡ºå®‰è£…æç¤ºæ­¤åç§°</li>
</ul>

<h4 id="54-åˆ›å»ºç´¢å¼•ä¸‹è½½ç½‘é¡µ-indexhtml">5.4 åˆ›å»ºç´¢å¼•ä¸‹è½½ç½‘é¡µ index.html</h4>

<p>åœ¨<code class="language-plaintext highlighter-rouge"> /Users/lf/web </code>æ–‡ä»¶å¤¹ä¸‹è¿˜éœ€è¦ä¸€ä¸ª index.html æ–‡ä»¶ï¼Œ
æ‰‹æœºé¦–æ¬¡ä½¿ç”¨ OTA å®‰è£…ï¼Œå¿…é¡»å…ˆä¸‹è½½å®‰è£… ca.crt è¯ä¹¦ï¼Œç„¶åå†ç‚¹å‡»å®‰è£… ipaã€‚
url ä¸­å¿…é¡»å¡«å†™ https å¼€å¤´çš„ plist æ–‡ä»¶ä¸‹è½½åœ°å€ï¼Œplist æ–‡ä»¶ä¸­å¯¹åº” ipa æ–‡ä»¶çš„ä¸‹è½½åœ°å€ã€‚</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span><span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=2.0, user-scalable=yes"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"Content-Type"</span> <span class="na">content=</span><span class="s">"text/html; charset=UTF-8"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;h4&gt;</span>æ‰‹æœºé¦–æ¬¡ä¸‹è½½è¯·å…ˆ"ç‚¹å‡»å®‰è£…SSLè¯ä¹¦"ï¼Œå¹¶æ ¹æ®æç¤ºå®‰è£…ä¿¡ä»»è¯ä¹¦<span class="nt">&lt;/h4&gt;</span>
åœ¨ iOS 10.3 åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œæ‰‹åŠ¨å®‰è£…åŒ…å«è¯ä¹¦æœ‰æ•ˆè´Ÿè½½çš„æè¿°æ–‡ä»¶æ—¶ï¼Œè¿™ä¸ªè¯ä¹¦ä¸ä¼šè‡ªåŠ¨å— SSL ä¿¡ä»»ã€‚
å½“å®‰è£…é€šè¿‡ç”µå­é‚®ä»¶å‘é€æˆ–ä»ç½‘ç«™ä¸‹è½½çš„æè¿°æ–‡ä»¶æ—¶ï¼Œæ‚¨å¿…é¡»æ‰‹åŠ¨å¼€å¯å— SSL ä¿¡ä»»ã€‚
è¦ä¸ºè¿™ä¸ªè¯ä¹¦å¼€å¯å— SSL ä¿¡ä»»ï¼Œè¯·å‰å¾€â€œè®¾ç½®â€&gt;â€œé€šç”¨â€&gt;â€œå…³äºæœ¬æœºâ€&gt;â€œè¯ä¹¦ä¿¡ä»»è®¾ç½®â€ã€‚åœ¨â€œé’ˆå¯¹æ ¹è¯ä¹¦å¯ç”¨å®Œå…¨ä¿¡ä»»â€ä¸‹ï¼Œå¼€å¯ä¿¡ä»»è¿™ä¸ªè¯ä¹¦ã€‚
<span class="nt">&lt;a</span> <span class="na">title=</span><span class="s">"iPhone"</span> <span class="na">href=</span><span class="s">"https://192.168.1.188/ca.crt"</span><span class="nt">&gt;</span>ğŸ‘‰ç‚¹å‡»å®‰è£…SSLè¯ä¹¦ğŸ‘ˆ<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;hr&gt;</span>
<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"itms-services://?action=download-manifest&amp;url=https://192.168.1.188/plist/LFAdHoc_4.2.0.plist"</span> <span class="na">class=</span><span class="s">"app_link"</span><span class="nt">&gt;</span>ğŸ‘‰ç‚¹å‡»å®‰è£…4.2.0ç”Ÿäº§ç‰ˆæœ¬ğŸ‘ˆ<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;hr&gt;</span>
<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"itms-services://?action=download-manifest&amp;url=https://192.168.1.188/plist/LFDev_4.2.1.plist"</span> <span class="na">class=</span><span class="s">"app_link"</span><span class="nt">&gt;</span>ğŸ‘‰ç‚¹å‡»å®‰è£…4.2.1å¼€å‘ç‰ˆæœ¬ğŸ‘ˆ<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;hr&gt;</span>
<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"itms-services://?action=download-manifest&amp;url=https://192.168.1.188/plist/LFVali_4.2.1.plist"</span> <span class="na">class=</span><span class="s">"app_link"</span><span class="nt">&gt;</span>ğŸ‘‰ç‚¹å‡»å®‰è£…4.2.1éªŒè¯ç‰ˆæœ¬ğŸ‘ˆ<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;hr&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p>å¦‚æœæ˜¯æƒ³ ipa æ”¾åœ¨å±€åŸŸç½‘ç”µè„‘ä¸Šé¢ï¼Œåˆ™å°†å½“åšæ‰“åŒ…æœåŠ¡å™¨çš„ç”µè„‘ ip æ‰‹åŠ¨è®¾ç½®å›ºå®š ipï¼š192.168.1.188ï¼Œç„¶åæ‰‹æœºå’Œç”µè„‘è¿æ¥åŒä¸€ä¸ªè·¯ç”±å™¨ï¼Œiphone çš„ Safari æµè§ˆå™¨ä¸­è¾“å…¥ 192.168.1.188 æˆ–è€… 192.168.1.188/index.html å³å¯ï¼Œç‚¹å‡»å®‰è£… SSL è¯ä¹¦ï¼Œç„¶åç‚¹å‡»å®‰è£… ipa åŒ…ã€‚</p>

<h4 id="55-ios-103-åå¿…é¡»è®¾ç½®è¯ä¹¦ä¿¡ä»»">5.5 iOS 10.3 åå¿…é¡»è®¾ç½®è¯ä¹¦ä¿¡ä»»</h4>

<p>å¦‚æœä¸‹è½½ ipa æ—¶å‡ºç°æ— æ³•è¿æ¥åˆ°<code class="language-plaintext highlighter-rouge"> 192.168.*.* </code>çš„é”™è¯¯ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨è®¾ç½®ä¿¡ä»»ã€‚</p>

<p>iOS7.0 ä»¥åå¿…é¡»ä½¿ç”¨ HTTPS è¿›è¡Œï¼ŒiOS 10 ä¹‹å‰çš„è®¾å¤‡ï¼Œç›´æ¥å®‰è£…è‡ªç­¾åæ ¹è¯ä¹¦åå°±å¯ä»¥å®‰è£… iOS åº”ç”¨ï¼Œä½†æ˜¯åœ¨ iOS 10.3 ä»¥ä¸Šçš„è®¾å¤‡ä¸Šï¼Œå®‰è£…åè¿˜éœ€è¦åˆ°â€œå…³äºæœ¬æœºâ€é‚£é‡Œæ‰‹åŠ¨å¼€å¯ä¿¡ä»»ã€‚</p>

<p>è‹¹æœå®˜ç½‘æç¤ºï¼Œåœ¨ iOS ä¸­ä¿¡ä»»æ‰‹åŠ¨å®‰è£…çš„è¯ä¹¦æè¿°æ–‡ä»¶ <a href="https://support.apple.com/zh-cn/HT204477">https://support.apple.com/zh-cn/HT204477</a></p>

<blockquote>
  <p>åœ¨ iOS 10.3 åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œæ‰‹åŠ¨å®‰è£…åŒ…å«è¯ä¹¦æœ‰æ•ˆè´Ÿè½½çš„æè¿°æ–‡ä»¶æ—¶ï¼Œ
è¿™ä¸ªè¯ä¹¦ä¸ä¼šè‡ªåŠ¨å— SSL ä¿¡ä»»ã€‚
å½“å®‰è£…é€šè¿‡ç”µå­é‚®ä»¶å‘é€æˆ–ä»ç½‘ç«™ä¸‹è½½çš„æè¿°æ–‡ä»¶æ—¶ï¼Œ
æ‚¨å¿…é¡»æ‰‹åŠ¨å¼€å¯å— SSL ä¿¡ä»»ã€‚
è¦ä¸ºè¿™ä¸ªè¯ä¹¦å¼€å¯å— SSL ä¿¡ä»»ï¼Œ
è¯·å‰å¾€â€œè®¾ç½®â€&gt;â€œé€šç”¨â€&gt;â€œå…³äºæœ¬æœºâ€&gt;â€œè¯ä¹¦ä¿¡ä»»è®¾ç½®â€ã€‚
åœ¨â€œé’ˆå¯¹æ ¹è¯ä¹¦å¯ç”¨å®Œå…¨ä¿¡ä»»â€ä¸‹ï¼Œå¼€å¯ä¿¡ä»»è¿™ä¸ªè¯ä¹¦ã€‚</p>
</blockquote>

<h2 id="å‚è€ƒé“¾æ¥"><a id="6_0"></a>å‚è€ƒé“¾æ¥</h2>

<p><code class="language-plaintext highlighter-rouge">http://stackoverflow.com/questions/20127138/apache-2-4-configuration-for-ssl-not-working</code></p>


  </section>
</article>

<section>

            <div class="content-play">
              <p><a href="javascript:void(0)" onclick="dashangToggle()" class="dashang" title="æ‰“èµï¼Œæ”¯æŒä¸€ä¸‹">æ”¯æŒä½œè€…</a></p>
              <div class="hide_box-play"></div>
              <div class="shang_box-play">
                <a class="shang_close-play" href="javascript:void(0)" onclick="dashangToggle()" title="å…³é—­"><img src="/images/payimg/close.jpg" alt="å–æ¶ˆ" /></a>
                <div class="shang_tit-play">
                  <p>æ„Ÿè°¢æ‚¨çš„æ”¯æŒï¼Œæˆ‘ä¼šç»§ç»­åŠªåŠ›çš„!</p>
                </div>
                <div class="shang_payimg">
                    <img src="/images/payimg/alipayimg.jpg" alt="æ‰«ç æ”¯æŒ" title="æ‰«ä¸€æ‰«" />
                </div>
              <div class="shang_payimg">    
                    <img src="/images/payimg/weipayimg.jpg" alt="æ‰«ç æ”¯æŒ" title="æ‰«ä¸€æ‰«" />
                </div>
                <div class="pay_explain">è°¢è°¢æ‚¨çš„å’–å•¡â˜•ï¸</div>
                <div class="shang_payselect">
                  <div class="pay_item checked" data-id="alipay">
                    <span class="pay_logo"><img src="/images/payimg/alipay.jpg" alt="æ”¯ä»˜å®" /></span>
                  </div>
                  <div class="pay_item" data-id="weipay">
                    <span class="pay_logo"><img src="/images/payimg/wechat.jpg" alt="å¾®ä¿¡" /></span>
                  </div>
                </div>
                <div class="shang_info-play">
                  <p>æ‰“å¼€<span id="shang_pay_txt">æ”¯ä»˜å®</span>æ‰«ä¸€æ‰«ï¼Œå³å¯è¿›è¡Œæ‰«ç æ‰“èµå“¦</p>
                </div>
              </div>
            </div>
            <script type="text/javascript">
            function dashangToggle(){
              $(".hide_box-play").fadeToggle();
              $(".shang_box-play").fadeToggle();
            }
            </script>

            <div style="text-align:center;margin:50px 0; font:normal 14px/24px 'MicroSoft YaHei';"></div>

            <style type="text/css">
              .content-play{width:80%;margin-top: 20px;margin-bottom: 10px;height:40px;}
              .hide_box-play{z-index:999;filter:alpha(opacity=50);background:#666;opacity: 0.5;-moz-opacity: 0.5;left:0;top:0;height:99%;width:100%;position:fixed;display:none;}
              .shang_box-play{width:540px;height:540px;padding:10px;background-color:#fff;border-radius:10px;position:fixed;z-index:1000;left:50%;top:50%;margin-left:-280px;margin-top:-280px;border:1px dotted #dedede;display:none;}
              .shang_box-play img{border:none;border-width:0;}
              .dashang{display:block;width:100px;margin:5px auto;height:25px;line-height:25px;padding:10px;background-color:#E74851;color:#fff;text-align:center;text-decoration:none;border-radius:10px;font-weight:bold;font-size:16px;transition: all 0.3s;}
              .dashang:hover{opacity:0.8;padding:15px;font-size:18px;}
              .shang_close-play{float:right;display:inline-block;
                margin-right: 10px;margin-top: 20px;
              }
              .shang_logo{display:block;text-align:center;margin:20px auto;}
              .shang_tit-play{width: 100%;height: 75px;text-align: center;line-height: 66px;color: #a3a3a3;font-size: 16px;background: url('/images/payimg/cy-reward-title-bg.jpg');font-family: 'Microsoft YaHei';margin-top: 7px;margin-right:2px;}
              .shang_tit-play p{color:#a3a3a3;text-align:center;font-size:16px;}
              .shang_payimg{width:140px;padding:10px;padding-left: 80px; /*border:6px solid #EA5F00;**/margin:0 auto;border-radius:3px;height:140px;display:inline-block;}
              .shang_payimg img{display:inline-block;margin-right:10px;float:left;text-align:center;width:140px;height:140px; }
              .pay_explain{text-align:center;margin:10px auto;font-size:12px;color:#545454;}
              .shang_payselect{text-align:center;margin:0 auto;margin-top:40px;cursor:pointer;height:60px;width:500px;margin-left:110px;}
              .shang_payselect .pay_item{display:inline-block;margin-right:140px;float:left;}
              .shang_info-play{clear:both;}
              .shang_info-play p,.shang_info-play a{color:#C3C3C3;text-align:center;font-size:12px;text-decoration:none;line-height:2em;}
            </style>

       <ul class="pager">
        
        <li class="previous">
            <a href="/2018/10/%E8%AE%B0%E4%B8%80%E4%BA%9B%E5%8D%B0%E8%B1%A1%E6%B7%B1%E5%88%BB%E7%9A%84-Bug/" data-toggle="tooltip" data-placement="top" title="è®°ä¸€äº›å°è±¡æ·±åˆ»çš„ Bug">ä¸Šä¸€ç¯‡ï¼š  <span>è®°ä¸€äº›å°è±¡æ·±åˆ»çš„ Bug</span>
            </a>
        </li>
        
        
        <li class="next">
            <a href="/2019/06/iOS-%E5%A6%82%E4%BD%95%E5%87%86%E7%A1%AE%E6%98%BE%E7%A4%BA%E8%A7%92%E6%A0%87/" data-toggle="tooltip" data-placement="top" title="iOS å¦‚ä½•å‡†ç¡®æ˜¾ç¤ºè§’æ ‡">ä¸‹ä¸€ç¯‡ï¼š  <span>iOS å¦‚ä½•å‡†ç¡®æ˜¾ç¤ºè§’æ ‡</span>
            </a>
        </li>
        
    </ul>
</section>

<section class="post-comments">

</section>


            <section class="footer">
    <footer>
        <div class = "footer_div">
            <nav class="cover-navigation navigation--social">
                <ul class="navigation">
                    
                    
                    <!-- Github -->
                    <li class="navigation__item_social">
                        <a href="https://github.com/muzipiao" title="@muzipiao çš„ Github" target="_blank">
                            <div class="footer-social-icon" style="background-image:url(/images/github.png);"></div>
                        </a>
                    </li>
                    
                    
                    
                    
                    
                    <!-- Zhihu -->
                    <li class="navigation__item_social">
                        <a href="https://juejin.im/user/5b2f1c51f265da59ad439f69" title="@5b2f1c51f265da59ad439f69" target="_blank">
                            <div class="footer-social-icon" style="background-image:url(/images/juejin.png);"></div>
                        </a>
                    </li>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <!-- Email -->
                    <li class="navigation__item_social">
                        <a href="mailto:lifei_zdjl@126.com" title="Contact me">
                            <div class="footer-social-icon" style="background-image:url(/images/email.png);"></div>
                        </a>
                    </li>
                    
                    
                    <!-- RSS -->
                    <li class="navigation__item_social">
                        <a href="/feed.xml" rel="author" title="RSS" target="_blank">
                            <div class="footer-social-icon" style="background-image:url(/images/rss.png);"></div>
                            <span class="label">RSS</span>
                        </a>
                    </li>
                    
                </ul>
            </nav>
        </div>
        <div class="footer__copyright" >
            <span>Â©2020&nbsp;cocoafei&nbsp;</span>
            <a href="http://beian.miit.gov.cn/" target="_blank">äº¬ICPå¤‡2020033870å·</a>
        </div>
    </footer>
</section>

        </div>
    </div>
    
    <script type="text/javascript" src="//libs.baidu.com/jquery/1.11.3/jquery.min.js"></script>
<script type="text/javascript" src="/js/main.js"></script>

<script type="text/javascript" src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>



    
  </body>

</html>
