<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>cocoafei</title>
    <description>æ¬¢è¿æ¥åˆ°æˆ‘çš„Blog~</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Tue, 23 Jul 2024 11:02:28 +0800</pubDate>
    <lastBuildDate>Tue, 23 Jul 2024 11:02:28 +0800</lastBuildDate>
    <generator>Jekyll v4.3.3</generator>
    
      <item>
        <title>Flutterå‡çº§AGP&amp;Gradle&amp;Kotlin</title>
        <description>&lt;h2 id=&quot;agp--gradle--kotlin-å…³ç³»&quot;&gt;AGP &amp;amp; Gradle &amp;amp; Kotlin å…³ç³»&lt;/h2&gt;

&lt;p&gt;è·¨å¹³å°æ‰«ç›²ï¼Œä¸ç†Ÿæ‚‰è¿™å‡ æ ·çš„åŒå­¦äº†è§£ä¸€ä¸‹ã€‚é Android å¼€å‘å‡ºèº«ï¼Œæœ‰æ€»ç»“é”™è¯¯çš„åœ°æ–¹ï¼Œè°¢è°¢æŒ‡æ­£ã€‚&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Android Studioï¼Œå¼€å‘ Android çš„ SDKï¼Œå¤§å®¶éƒ½ä¸é™Œç”Ÿï¼Œå¯¹åº” iOS å¼€å‘ä¸­ Xcodeï¼›&lt;/li&gt;
  &lt;li&gt;AGP(Android Gradle Plugin)ï¼Œç”¨äºæ‰©å±• Gradle åŠŸèƒ½çš„æ’ä»¶ï¼Œä»¥æ”¯æŒ Android é¡¹ç›®çš„æ„å»ºï¼›&lt;/li&gt;
  &lt;li&gt;Kotlin å¼€å‘è¯­è¨€ï¼Œæ˜¯ä¸€ç§ä¸ Android å…¼å®¹çš„è¯­è¨€ï¼Œç±»ä¼¼ iOS å¼€å‘ä¸­çš„ Swiftï¼›&lt;/li&gt;
  &lt;li&gt;ä¸åŒç‰ˆæœ¬ Android Studio çš„ AGP æ’ä»¶ä¸åŒï¼ŒAGP å¯¹åº” Gradle ç‰ˆæœ¬ä¸åŒï¼›&lt;/li&gt;
  &lt;li&gt;Android Studio å‡çº§æ—¶å¯èƒ½ä¼šå‡çº§ AGPï¼Œæ¯ä¸ª AGP ç‰ˆæœ¬éƒ½å¯¹åº”ä¸€ä¸ªå…¼å®¹çš„ Gradle ç‰ˆæœ¬èŒƒå›´ï¼›&lt;/li&gt;
  &lt;li&gt;Android Studio ä¼šæ†ç»‘ä¸€ä¸ª Kotlin ç‰ˆæœ¬ï¼Œä¸€èˆ¬ä¸ºå½“å‰æœ€æ–°ç¨³å®šç‰ˆã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;å…·ä½“å¯¹åº”å…³ç³»å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://developer.android.google.cn/build/releases/gradle-plugin?hl=zh-cn&quot;&gt;Android Gradle æ’ä»¶å…¼å®¹åˆ—è¡¨&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://developer.android.com/build/kotlin-support?hl=zh-cn&quot;&gt;Kotlin ç‰ˆæœ¬æ‰€éœ€çš„ D8 å’Œ R8 ç¼–è¯‘å™¨ç‰ˆæœ¬&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;flutter-ç¼–è¯‘-android-æŠ¥é”™&quot;&gt;Flutter ç¼–è¯‘ Android æŠ¥é”™&lt;/h2&gt;

&lt;p&gt;Flutter å‡çº§è‡³ 3.19.6 åï¼Œç¼–è¯‘ Android æŠ¥é”™&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Failed to transform kotlin-stdlib-1.9.10.jar&lt;/code&gt;ï¼Œå¼€å§‹ä»¥ä¸ºæ˜¯ Flutter çš„é—®é¢˜ï¼Œè°ƒç ”å‘ç°æ˜¯ Android Studio å‡çº§å¯¼è‡´ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;åŸå› ï¼š&lt;/strong&gt; AGP(Android Gradle Plugin) &amp;amp; Gradle &amp;amp; Kotlin ä¹‹é—´ç‰ˆæœ¬æœ‰å¯¹åº”çš„å…³ç³»ï¼Œå‡çº§ Android Studioï¼Œå¯¼è‡´ AGP ç‰ˆæœ¬å‡é«˜ï¼Œå¯¹åº”å…¼å®¹çš„æœ€ä½ Gradle ç‰ˆæœ¬å’Œ Kotlin ç‰ˆæœ¬ä¹Ÿå‡é«˜ï¼Œå¦‚æœé¡¹ç›®è®¾ç½®çš„ç‰ˆæœ¬ä¸åŒ¹é…ï¼Œå°±ä¼šç¼–è¯‘æŠ¥é”™ã€‚è¿™å¯¹äºä¸ç†Ÿæ‚‰ Android å¼€å‘å’Œ Gradle çš„äººæ¥è¯´ï¼Œè§£å†³èµ·æ¥æŒºéº»çƒ¦ã€‚&lt;/p&gt;

&lt;div class=&quot;language-groovy highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nl&quot;&gt;FAILURE:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Build&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;failed&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;an&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exception&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;What&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;went&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;wrong:&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Execution&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;failed&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;task&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;:app:mergeExtDexDebug&apos;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Could&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resolve&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;all&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;files&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;configuration&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;:app:debugRuntimeClasspath&apos;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;
   &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Failed&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;transform&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kotlin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stdlib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.9&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;jar&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;org&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;jetbrains&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;kotlin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kotlin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;stdlib:&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.9&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;match&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;attributes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;artifactType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;android&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asm&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;transformed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;variant&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NONE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dexing&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;enable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;desugaring&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dexing&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;enable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;jacoco&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instrumentation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dexing&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;is&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;debuggable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dexing&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sdk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;org&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;gradle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;category&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;org&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;gradle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;libraryelements&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;jar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;org&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;gradle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;release&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;org&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;gradle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;usage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;java&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;runtime&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}.&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Execution&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;failed&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;DexingWithClasspathTransform:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/Users/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lifei&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/.gradle/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;caches&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/transforms-3/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;29&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;afff73df66b7b192e6a6f531b855cf&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/transformed/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;jetified&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kotlin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stdlib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.9&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;jar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;
         &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Error&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dexing&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;Try:&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Run&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stacktrace&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;option&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stack&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Run&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;info&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;debug&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;option&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;more&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;log&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Run&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scan&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;full&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;insights&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Get&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;more&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;help&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;at&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;https:&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//help.gradle.org&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;BUILD&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FAILED&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;

&lt;span class=&quot;err&quot;&gt;â”Œâ”€&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Flutter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Fix&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;â”‚&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[!]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;The&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;shrinker&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;may&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;have&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;failed&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;optimize&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Java&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bytecode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;            &lt;span class=&quot;err&quot;&gt;â”‚&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;â”‚&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;To&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;disable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;shrinker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pass&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;no&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shrink&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;`&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;flag&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;      &lt;span class=&quot;err&quot;&gt;â”‚&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;â”‚&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;To&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;learn&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;more&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;see:&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;https:&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//developer.android.com/studio/build/shrink-code â”‚&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜&lt;/span&gt;
&lt;span class=&quot;nl&quot;&gt;Error:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Gradle&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;task&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assembleDebug&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;failed&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exit&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;code&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;å‡çº§é¡¹ç›®-agp&quot;&gt;å‡çº§é¡¹ç›® AGP&lt;/h2&gt;

&lt;p&gt;æ—¢ç„¶ç‰ˆæœ¬ä¸åŒ¹é…é—®é¢˜ï¼Œé™¤äº†é™ä½ Android Studio ç‰ˆæœ¬å¤–ï¼Œé‚£å°±æ˜¯åˆ©ç”¨ Android Studio ä¸­ AGP å‡çº§åŠ©æ‰‹&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AGP Upgrade Assistant...&lt;/code&gt;å¿«é€Ÿå‡çº§ AGPã€‚&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;ä»¥ Android æ¨¡å¼æ‰“å¼€ Flutter é¡¹ç›®ï¼ˆæŠŠé¡¹ç›®çš„ Android æ–‡ä»¶å¤¹æ‹–å…¥ Android Studioï¼‰ï¼Œç‚¹å‡»&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Android Studio -&amp;gt; AGP Upgrade Assistant...&lt;/code&gt;ï¼›&lt;/li&gt;
  &lt;li&gt;å‡ºç°ä¸€ä¸ªå¼¹çª—ï¼Œé€‰æ‹©&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Upgrade Android Gradle Plugin from version 7.4.2 to 8.3.2&lt;/code&gt;ï¼Œé€‰æ‹©è¦å‡çº§çš„ç‰ˆæœ¬è¿™é‡Œé€‰æ‹©&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;8.3.2&lt;/code&gt;ï¼›&lt;/li&gt;
  &lt;li&gt;ç‚¹å‡»&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Run selected steps&lt;/code&gt;å‡çº§å³å¯ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;ä¸€åˆ‡é¡ºåˆ©=è‰å±¥è™«æ•™ç¨‹ï¼Œä½†å¯èƒ½ä¼šå‡ºç°å¦‚ä¸‹æŠ¥é”™ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/upgrade-agp/agp1.png&quot; alt=&quot;AGPå‡çº§æŠ¥é”™&quot; /&gt;&lt;/p&gt;

&lt;div class=&quot;language-groovy highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;Namespace&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;specified&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Specify&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;build&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;See&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;https:&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//d.android.com/r/tools/upgrade-assistant/set-namespace for information about setting the namespace.&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;If&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;you&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ve&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;specified&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;package&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;attribute&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AndroidManifest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;xml&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;you&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;can&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AGP&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Upgrade&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Assistant&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;migrate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;build&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Refer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;https:&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//d.android.com/r/tools/upgrade-assistant/agp-upgrade-assistant for general information about using the AGP Upgrade Assistant.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;è¿™æ˜¯ç”±äº Android ä¸»å·¥ç¨‹æ›´æ–°&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Android Gradle Plugin 8.0&lt;/code&gt;ä»¥åä¼šå¼ºåˆ¶è¦æ±‚åœ¨æ¯ä¸€ä¸ª library æ¨¡å—çš„ build.gradle ä¸­æ ‡æ˜å‘½åç©ºé—´namespaceï¼Œå¦‚æœæ²¡æœ‰æ ‡æ³¨ä¼šç›´æ¥æŠ›å‡ºå¼‚å¸¸ã€‚æˆ‘çš„ Flutter é¡¹ç›®æœ‰ä¸€ä¸ªè‡ªå®šä¹‰ OpenCV æ’ä»¶ï¼Œä¿®æ”¹&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/plugins/opencv_utils/android/build.gradle&lt;/code&gt;æ·»åŠ ç‰ˆæœ¬å³å¯ã€‚&lt;/p&gt;

&lt;div class=&quot;language-gradle highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;android&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// è¿™é‡Œæ·»åŠ  namespaceï¼Œå’ŒåŒ…åä¸€è‡´å³å¯&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;android&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;hasProperty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;namespace&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;com.lf.opencv.opencv_utils&apos;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;compileSdkVersion&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;33&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;......&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;å‡çº§ AGP æ’ä»¶ç‰ˆæœ¬è‡³ 8.3.2ï¼Œé€šè¿‡ Git æˆ‘ä»¬æ£€æŸ¥æ›´æ”¹å¦‚ä¸‹(+å·æ–°å¢-å·ç§»é™¤)ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-diff highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;// android/build.gradle ä¿®æ”¹äº† gradle æ’ä»¶ç‰ˆæœ¬
&lt;span class=&quot;gd&quot;&gt;- classpath &apos;com.android.tools.build:gradle:7.4.2&apos;
&lt;/span&gt;&lt;span class=&quot;gi&quot;&gt;+ classpath &apos;com.android.tools.build:gradle:8.3.2&apos;
&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;
&lt;/span&gt;// android/gradle.properties æ–°å¢å¦‚ä¸‹å†…å®¹
&lt;span class=&quot;gi&quot;&gt;+ android.defaults.buildfeatures.buildconfig=true
+ android.nonTransitiveRClass=false
+ android.nonFinalResIds=false
&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;
&lt;/span&gt;// android/app/src/main/AndroidManifest.xml ç§»é™¤äº† package
&lt;span class=&quot;gd&quot;&gt;- &amp;lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; package=&quot;com.xx.yy&quot;&amp;gt;
&lt;/span&gt;&lt;span class=&quot;gi&quot;&gt;+ &amp;lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&amp;gt;
&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;
&lt;/span&gt;// android/gradle/wrapper/gradle-wrapper.properties ä¿®æ”¹äº† Gradle ç‰ˆæœ¬
&lt;span class=&quot;gd&quot;&gt;- distributionUrl=https\://services.gradle.org/distributions/gradle-7.5-all.zip
&lt;/span&gt;&lt;span class=&quot;gi&quot;&gt;+ distributionUrl=https\://services.gradle.org/distributions/gradle-8.4-all.zip
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;å‡çº§-kotlin-ç‰ˆæœ¬&quot;&gt;å‡çº§ Kotlin ç‰ˆæœ¬&lt;/h2&gt;

&lt;p&gt;å‡çº§å®Œ AGP åå¹¶æ²¡æœ‰ç»“æŸï¼Œè¿˜éœ€è¦å‡çº§ Kotlin ç‰ˆæœ¬ï¼Œå› ä¸ºä¸åŒçš„ Android Studio æ†ç»‘ Kotlin ç‰ˆæœ¬ä¸åŒã€‚&lt;/p&gt;

&lt;div class=&quot;language-diff highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;// ä¿®æ”¹ android/build.gradle æ–‡ä»¶ä¸­ç‰ˆæœ¬ä¸º 1.9.20
&lt;span class=&quot;gd&quot;&gt;- ext.kotlin_version = &apos;1.8.0&apos;
&lt;/span&gt;&lt;span class=&quot;gi&quot;&gt;+ ext.kotlin_version = &apos;1.9.20&apos;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¿®æ”¹æ–‡ä»¶&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;android/app/build.gradle&lt;/code&gt;è®¾ç½® &lt;strong&gt;minSdkVersionã€compileSdkVersion&lt;/strong&gt;ã€‚&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;com.xx.yy&lt;/code&gt;ä¿®æ”¹ä¸ºè‡ªå·±çš„åŒ…åã€‚&lt;/p&gt;

&lt;div class=&quot;language-gradle highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;android&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;com.xx.yy&quot;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// è®¾ç½®ç¼–è¯‘çš„ SDK ç‰ˆæœ¬ä¸º flutter.compileSdkVersion&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;compileSdkVersion&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;flutter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;compileSdkVersion&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;......&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;defaultConfig&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;applicationId&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;com.xx.yy&quot;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// è®¾ç½®æœ€å°å…¼å®¹ç‰ˆæœ¬ä¸º flutter.minSdkVersion&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;minSdkVersion&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;flutter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;minSdkVersion&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;targetSdkVersion&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;flutter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;targetSdkVersion&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;......&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;å¦‚æœæƒ³æŸ¥çœ‹ Flutter å¯¹åº”å…¼å®¹ç‰ˆæœ¬ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-gradle highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// ä¿®æ”¹æ–‡ä»¶`android/app/build.gradle`ï¼Œæ‰“å° Gradle å’Œ Flutter ç‰ˆæœ¬&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;println&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;gradle.gradleVersion: $gradle.gradleVersion&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;println&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;android.buildToolsVersion: $android.buildToolsVersion&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;println&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;flutter.compileSdkVersion: $flutter.compileSdkVersion&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;println&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;flutter.targetSdkVersion: $flutter.targetSdkVersion&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;println&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;flutter.minSdkVersion: $flutter.minSdkVersion&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;println&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;flutter.ndkVersion: $flutter.ndkVersion&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;android&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;......&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åˆ°è¿™é‡Œé—®é¢˜è§£å†³ï¼Œç¼–è¯‘é€šè¿‡è¿è¡Œæ— è­¦å‘ŠğŸ‰ğŸ‰&lt;/p&gt;

&lt;h2 id=&quot;å‚è€ƒé“¾æ¥&quot;&gt;å‚è€ƒé“¾æ¥&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://developer.android.com/studio/build/dependencies?hl=zh-cn#groovy&quot;&gt;android æ·»åŠ  build ä¾èµ–é¡¹&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.cnblogs.com/inexbot/p/17593347.html&quot;&gt;Flutter å‡çº§ Gradle å’Œ Gradle Plugin&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/juliansteenbakker/mobile_scanner/issues/729&quot;&gt;Failed to transform kotlin-stdlib-1.9.0.jaré”™è¯¯è§£å†³&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/668428076&quot;&gt;Android Studio Gradle 8.0å‡çº§è®°å½•&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://developer.android.google.cn/build/releases/gradle-plugin?hl=zh-cn&quot;&gt;Android Gradle æ’ä»¶å…¼å®¹åˆ—è¡¨&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://developer.android.com/build/kotlin-support?hl=zh-cn&quot;&gt;Kotlin ç‰ˆæœ¬æ‰€éœ€çš„ D8 å’Œ R8 ç¼–è¯‘å™¨ç‰ˆæœ¬&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Thu, 25 Apr 2024 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2024/04/Flutter%E5%8D%87%E7%BA%A7AGP&Gradle&Kotlin/</link>
        <guid isPermaLink="true">http://localhost:4000/2024/04/Flutter%E5%8D%87%E7%BA%A7AGP&Gradle&Kotlin/</guid>
        
        <category>Flutter</category>
        
        
      </item>
    
      <item>
        <title>XCFramework æ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„</title>
        <description>&lt;p&gt;æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸ª Xcode 12 ç¼–è¯‘æ—¶çš„å¸¸è§é”™è¯¯ï¼ŒGMObjC.framework åŒæ—¶åŒ…å« &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;x86_64 arm64&lt;/code&gt; æ¶æ„ï¼Œåœ¨ Xcode 12 ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œç¼–è¯‘æ—¶å¹¶ä¸ä¼šæŠ¥é”™ï¼Œä½†ç°åœ¨å´æŠ¥é”™å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# å½“åœ¨çœŸæœºè¿è¡Œæ—¶ï¼Œç¼–è¯‘æŠ¥é”™
xx.xcodeproj Building for iOS, but the linked and embedded framework &apos;GMObjC.framework&apos; was built for iOS + iOS Simulator.
# å½“åœ¨æ¨¡æ‹Ÿå™¨è¿è¡Œæ—¶ï¼Œç¼–è¯‘æŠ¥é”™
xx.xcodeproj Building for iOS Simulator, but the linked and embedded framework &apos;GMObjC.framework&apos; was built for iOS + iOS Simulator.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¾ˆæ˜æ˜¾ï¼Œæ–°ç‰ˆæœ¬ Xcode åœ¨ä½¿ç”¨åŒ…å«å¤šæ¶æ„çš„åº“æ—¶ä¼šæŠ¥é”™ã€‚ä» stackoverflow å¾ˆå®¹æ˜“æ‰¾åˆ°è§£å†³æ–¹æ¡ˆï¼Œåœ¨å·¥ç¨‹çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Build Settings -&amp;gt; Excluded Architectures&lt;/code&gt; ä¾æ¬¡æ·»åŠ ç¼–è¯‘å¯¹åº”æ¶æ„æ—¶ï¼Œéœ€è¦æ’é™¤çš„æ¶æ„ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥åŒ…å« &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;x86_64 arm64&lt;/code&gt; æ¶æ„çš„ GMObjC.framework ä¸ºä¾‹ï¼Œåœ¨ç¼–è¯‘æ¨¡æ‹Ÿå™¨æ—¶ï¼Œéœ€è¦ç§»é™¤ arm64 æ¶æ„ï¼›åŒç†ç¼–è¯‘çœŸæœºæ—¶ï¼Œéœ€è¦ç§»é™¤ x86_64 æ¶æ„ã€‚é€‰æ‹© &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Excluded Architectures&lt;/code&gt;ï¼Œç‚¹å‡»åŠ å·â€â•â€œï¼Œä¾æ¬¡æ·»åŠ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Any iOS Simulator&lt;/code&gt; å€¼ä¸º arm64ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Any iOS&lt;/code&gt; å€¼ä¸º x86_64ï¼Œå†æ¬¡ç¼–è¯‘å³å¯é€šè¿‡ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/xcframework/xcframework1.png&quot; alt=&quot;Xcode 12 æŠ¥é”™è§£å†³&quot; /&gt;&lt;/p&gt;

&lt;p&gt;é‚£ Xcode ä¸ºä»€ä¹ˆä¼šç¼–è¯‘æŠ¥é”™å‘¢ï¼Œè€Œä¹‹å‰ä¸ä¼šã€‚å’Œ UIWebViewã€UIAlertView ç±»ä¼¼ï¼Œè‹¹æœåœ¨ç£ä¿ƒæˆ‘ä»¬å¼€å‘è€…æ”¾å¼ƒæ—§ç±»å‹ï¼Œä½¿ç”¨æ–°ç±»å‹ XCFrameworkã€‚&lt;/p&gt;

&lt;h2 id=&quot;xcframework-æ˜¯ä»€ä¹ˆ&quot;&gt;XCFramework æ˜¯ä»€ä¹ˆ&lt;/h2&gt;

&lt;p&gt;é¦–å…ˆå›é¡¾ä¸€ä¸‹ iOS å¼€å‘ä¸­çš„é™æ€åº“å’ŒåŠ¨æ€åº“ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;é™æ€åº“(.a/.framework)ï¼šé“¾æ¥æ—¶å®Œæ•´åœ°æ‹·è´è‡³å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œè¢«å¤šæ¬¡ä½¿ç”¨å°±æœ‰å¤šä»½å†—ä½™æ‹·è´ï¼›&lt;/li&gt;
  &lt;li&gt;åŠ¨æ€åº“(.dylib/.tbd/.framework)ï¼šç¨‹åºè¿è¡Œæ—¶ç”±ç³»ç»ŸåŠ¨æ€åŠ è½½åˆ°å†…å­˜ï¼Œç³»ç»ŸåŠ¨æ€åº“å¯è¢«å¤šä¸ªç¨‹åºå…±äº«ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;XCFramework æ˜¯è‹¹æœæ–°å‡ºçš„åº“ç±»å‹ï¼Œåœ¨ Xcode 11 åŠ cocoapods 1.9 ä»¥ä¸Šç‰ˆæœ¬è¢«æ”¯æŒï¼Œä¸æ™®é€šåŠ¨æ€åº“/é™æ€åº“æœ€å¤§çš„åŒºåˆ«æ˜¯å°†&lt;strong&gt;å¤šä¸ªå¹³å°&lt;/strong&gt;çš„äºŒè¿›åˆ¶åº“ï¼Œæ†ç»‘åˆ°ä¸€ä¸ªå¯åˆ†å‘çš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.xcframework&lt;/code&gt;æ†ç»‘åŒ…ä¸­ï¼Œæ”¯æŒæ‰€æœ‰çš„è‹¹æœå¹³å°å’Œæ¶æ„ã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œçš„å…³é”®è¯æ˜¯&lt;strong&gt;å¤šä¸ªå¹³å°&lt;/strong&gt;ï¼ˆiOS, macOS, tvOS, watchOS, iPadOS, carPlayOSï¼‰ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ™®é€šåŠ¨æ€åº“/é™æ€åº“å±äº&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fat file&lt;/code&gt;ï¼Œä»…ä»…æ˜¯åŒ…å«å¤šä¸ªæ¶æ„ï¼Œå¦‚&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;armv7 armv7s arm64 arm64e x86_64&lt;/code&gt;ç­‰ï¼Œè€Œ XCFramework å¯ä»¥åŒ…å« iOS è®¾å¤‡ï¼ŒiOS æ¨¡æ‹Ÿå™¨å’Œ Mac Catalyst ç­‰å¤šä¸ªå¹³å°çš„äºŒè¿›åˆ¶åº“ã€‚&lt;/p&gt;

&lt;p&gt;è‹¹æœå¼•å…¥ XCFramework æ”¯æŒæ‰€æœ‰è‹¹æœå¹³å°ï¼Œä»¥æ”¯æŒè‹¹æœæƒ³å®ç°&lt;strong&gt;å¤§ä¸€ç»Ÿ&lt;/strong&gt;çš„è§„åˆ’ï¼Œè€Œä¸” XCFramework ç¼–è¯‘çš„ Swift åº“ï¼Œä½¿ç”¨è€…ä¸å†éœ€è¦ä½¿ç”¨ç›¸åŒ Xcode ç‰ˆæœ¬ç¼–è¯‘å™¨ï¼ˆä½¿ç”¨ Swift åº“å®ç°ç»„ä»¶åŒ–çš„å¼€å‘è€…åº”è¯¥æ·±æœ‰æ„Ÿè§¦ï¼‰ï¼Œå¯¹æ¯”ä½¿ç”¨ .framework æ ¼å¼ï¼Œä½¿ç”¨ .xcframework æ ¼å¼ APP åŒ…å¤§å°å’Œå¯åŠ¨é€Ÿåº¦éƒ½æœ‰æå‡ã€‚&lt;/p&gt;

&lt;h2 id=&quot;åˆ¶ä½œ-xcframework&quot;&gt;åˆ¶ä½œ XCFramework&lt;/h2&gt;

&lt;p&gt;åˆ¶ä½œ XCFramework å¾ˆç®€å•ï¼Œé€šè¿‡&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcodebuild -create-xcframework&lt;/code&gt;å‘½ä»¤å³å¯å®Œæˆï¼Œæˆ‘é€šè¿‡åˆå¹¶ GMObjC åº“çš„æ¨¡æ‹Ÿå™¨å’ŒçœŸæœºç‰ˆæœ¬æ¥æ¼”ç¤ºã€‚&lt;/p&gt;

&lt;p&gt;å½“å‰æ–‡ä»¶å¤¹ä¸‹æœ‰ç¼–è¯‘å¥½çš„ GMObjC.framework åˆ†åˆ«æ˜¯çœŸæœºç‰ˆæœ¬å’Œæ¨¡æ‹Ÿå™¨ç‰ˆæœ¬ã€‚&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;.
â”œâ”€â”€ Release-iphoneos
â”‚Â Â  â”œâ”€â”€ 0CD1FB8D-9D63-3092-B68B-2E579A306D3F.bcsymbolmap
â”‚Â Â  â”œâ”€â”€ GMObjC.framework
â”‚Â Â  â””â”€â”€ GMObjC.framework.dSYM
â””â”€â”€ Release-iphonesimulator
    â”œâ”€â”€ GMObjC.framework
    â””â”€â”€ GMObjC.framework.dSYM
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;é€šè¿‡&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcodebuild -create-xcframework&lt;/code&gt;å‘½ä»¤æ¥åˆå¹¶ä¸º XCFrameworkã€‚&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# åˆ›å»ºåˆå¹¶åŒ… GMObjC.xcframework&lt;/span&gt;
xcodebuild &lt;span class=&quot;nt&quot;&gt;-create-xcframework&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-framework&lt;/span&gt; Release-iphoneos/GMObjC.framework &lt;span class=&quot;nt&quot;&gt;-framework&lt;/span&gt; Release-iphonesimulator/GMObjC.framework &lt;span class=&quot;nt&quot;&gt;-output&lt;/span&gt; GMObjC.xcframework
&lt;span class=&quot;c&quot;&gt;# æˆ–è€…æ¢è¡Œå±•ç¤ºæ›´æ¸…æ™°&lt;/span&gt;
xcodebuild &lt;span class=&quot;nt&quot;&gt;-create-xcframework&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
           &lt;span class=&quot;nt&quot;&gt;-framework&lt;/span&gt; Release-iphoneos/GMObjC.framework &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
           &lt;span class=&quot;nt&quot;&gt;-framework&lt;/span&gt; Release-iphonesimulator/GMObjC.framework &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
           &lt;span class=&quot;nt&quot;&gt;-output&lt;/span&gt; GMObjC.xcframework
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åˆå¹¶åçš„ GMObjC.xcframework ç›®å½•ç»“æ„å¦‚ä¸‹ï¼ŒåŒ…å« arm64 å’Œ x86_64 ç‰ˆæœ¬ï¼Œè¿™å’Œ lipo æ“ä½œç±»ä¼¼ï¼Œåˆå¹¶å…¶ä»–å¹³å°æ—¶æ“ä½œç±»ä¼¼ã€‚&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;GMObjC.xcframework
â”œâ”€â”€ Info.plist
â”œâ”€â”€ ios-arm64
â”‚Â Â  â””â”€â”€ GMObjC.framework
â””â”€â”€ ios-x86_64-simulator
    â””â”€â”€ GMObjC.framework
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¦‚æœæ˜¯é™æ€åº“ .a æ–‡ä»¶ï¼Œåˆ™éœ€è¦ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-library&lt;/code&gt;å’Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-headers&lt;/code&gt;æ¥æŒ‡å®šé™æ€åº“å’Œå¤´æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;xcodebuild &lt;span class=&quot;nt&quot;&gt;-create-xcframework&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
           &lt;span class=&quot;nt&quot;&gt;-library&lt;/span&gt; Release-iphoneos/GMObjC.a &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
           &lt;span class=&quot;nt&quot;&gt;-headers&lt;/span&gt; Release-iphoneos/include/GMObjC &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
           &lt;span class=&quot;nt&quot;&gt;-library&lt;/span&gt; Release-iphonesimulator/GMObjC.a &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
           &lt;span class=&quot;nt&quot;&gt;-headers&lt;/span&gt; Release-iphonesimulator/include/GMObjC &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
           &lt;span class=&quot;nt&quot;&gt;-output&lt;/span&gt; GMObjC.xcframework
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;ä½¿ç”¨-xcframework&quot;&gt;ä½¿ç”¨ XCFramework&lt;/h2&gt;

&lt;p&gt;å¦‚ä½•ä½¿ç”¨ .xcframework æ–‡ä»¶ï¼Œé€‰æ‹©å½“å‰å·¥ç¨‹ Targetï¼Œé€‰æ‹© General ç›®å½•ä¸‹çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Frameworks,Libraries,and Embedded Content&lt;/code&gt; æ‹–å…¥ .xcframework æ–‡ä»¶å³å¯ï¼Œå’Œä½¿ç”¨ .framework æ–‡ä»¶å‡ ä¹ä¸€æ ·ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/xcframework/xcframework2.png&quot; alt=&quot;XCFramework é…ç½®&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ä¸€é”®ç¼–è¯‘-xcframework&quot;&gt;ä¸€é”®ç¼–è¯‘ XCFramework&lt;/h2&gt;

&lt;p&gt;ç¼–è¯‘ XCFramework éœ€è¦ä½¿ç”¨å‘½ä»¤ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcodebuild -create-xcframework&lt;/code&gt;ï¼Œå†™æˆ shell æ–‡ä»¶æ›´æ–¹ä¾¿ï¼Œæ”¾åœ¨ .xcodeproj æ–‡ä»¶åŒçº§ç›®å½•ä¸‹ï¼Œå¡«å…¥ scheme åç§°ï¼Œæ‹–å…¥ç»ˆç«¯å›è½¦å³å¯ç”Ÿæˆã€‚&lt;/p&gt;

&lt;p&gt;è„šæœ¬åªå†™äº† iPhone çœŸæœºå’Œæ¨¡æ‹Ÿå™¨çš„åˆå¹¶ï¼Œå…¶ä»–å¹³å°ç±»ä¼¼ï¼Œè‡ªè¡Œæ·»åŠ ä¿®æ”¹å³å¯ï¼ŒæŸ¥çœ‹ç¤ºä¾‹åœ¨ &lt;a href=&quot;https://github.com/muzipiao/GMObjC&quot;&gt;GMObjCFramework&lt;/a&gt; æ–‡ä»¶å¤¹ä¸­ï¼Œä¸‹è½½åè„šæœ¬æ‹–å…¥ç»ˆç«¯è¿è¡Œï¼Œå¯çœ‹åˆ°ç”Ÿæˆçš„ GMObjC.xcframework åœ¨ build ç›®å½•ä¸‹ã€‚&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/sh&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# æ”¾åœ¨ä¸ .xcodeproj æ–‡ä»¶åŒçº§ç›®å½•ä¸‹ï¼Œç”Ÿæˆç»“æœåœ¨ build ç›®å½•ä¸‹&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# éœ€è¦ç¼–è¯‘çš„ scheme&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;scheme&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;GMObjCFramework&quot;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-z&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$scheme&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$scheme&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
     &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;è¯·å¡«å…¥ scheme åç§°&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;fi

&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;scheme: &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$scheme&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;dirname&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$0&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;exit &lt;/span&gt;0

xcodebuild archive &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;-scheme&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$scheme&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;-sdk&lt;/span&gt; iphoneos &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;-archivePath&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;archives/ios_devices.xcarchive&quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;BUILD_LIBRARY_FOR_DISTRIBUTION&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;YES &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;SKIP_INSTALL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;NO

xcodebuild archive &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;-scheme&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$scheme&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;-sdk&lt;/span&gt; iphonesimulator &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;-archivePath&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;archives/ios_simulators.xcarchive&quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;BUILD_LIBRARY_FOR_DISTRIBUTION&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;YES &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;SKIP_INSTALL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;NO

&lt;span class=&quot;c&quot;&gt;# ä¼˜å…ˆä» archive æ–‡ä»¶å¤¹ä¸‹è¯»å–&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;product_list&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls &lt;/span&gt;archives/ios_devices.xcarchive/Products/Library/Frameworks&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;file_name &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$product_list&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;do
    &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;full_product_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$file_name&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;break
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# è¯»å–ä¸åˆ°å°±ä» showBuildSettings è¯»å–&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-z&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$full_product_name&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$full_product_name&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;name_dict&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;xcodebuild &lt;span class=&quot;nt&quot;&gt;-showBuildSettings&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;FULL_PRODUCT_NAME&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;full_product_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;name_dict&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;#*= &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;fi

&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;product_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;full_product_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%.*&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;

xcodebuild &lt;span class=&quot;nt&quot;&gt;-create-xcframework&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;-framework&lt;/span&gt; archives/ios_devices.xcarchive/Products/Library/Frameworks/&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$full_product_name&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;-framework&lt;/span&gt; archives/ios_simulators.xcarchive/Products/Library/Frameworks/&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$full_product_name&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;-output&lt;/span&gt; build/&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$product_name&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;.xcframework
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Wed, 06 Jan 2021 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2021/01/XCFramework-%E6%98%AF%E7%94%A8%E6%9D%A5%E5%B9%B2%E4%BB%80%E4%B9%88%E7%9A%84/</link>
        <guid isPermaLink="true">http://localhost:4000/2021/01/XCFramework-%E6%98%AF%E7%94%A8%E6%9D%A5%E5%B9%B2%E4%BB%80%E4%B9%88%E7%9A%84/</guid>
        
        <category>iOS</category>
        
        
      </item>
    
      <item>
        <title>GitHub Actions ç›‘æµ‹ç½‘ç«™åœ¨çº¿</title>
        <description>&lt;h2 id=&quot;github-actions&quot;&gt;GitHub Actions&lt;/h2&gt;

&lt;p&gt;GitHub Actions æ˜¯ GitHub çš„æŒç»­é›†æˆæœåŠ¡ï¼Œå¦‚æœæ¥è§¦è¿‡ Jenkins æˆ– Travis CIï¼Œé‚£ä¹ˆå¯¹æŒç»­é›†æˆä¸ä¼šé™Œç”Ÿã€‚æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„åŠŸèƒ½ï¼Œåœ¨ push ä»£ç åˆ°ä»“åº“æ—¶ï¼Œæˆ–å®šæ—¶æŠ“å–ä»£ç ã€è‡ªåŠ¨æ‰“åŒ…ã€è‡ªåŠ¨éƒ¨ç½²åˆ°æœåŠ¡å™¨ã€è‡ªåŠ¨åŒ–æµ‹è¯•ç­‰ï¼Œéƒ½å±äºæŒç»­é›†æˆç±»ã€‚GitHub Actions åŠŸèƒ½æ›´å¼ºå¤§ï¼Œä¸ä»…å¯ä»¥è‡ªå·±æ·»åŠ è„šæœ¬ï¼Œè€Œä¸”å…è®¸å¼€å‘è€…åˆ†äº«è‡ªå·±çš„è„šæœ¬åˆ°&lt;a href=&quot;https://github.com/marketplace?type=actions&quot;&gt;Actions åº”ç”¨å¸‚åœº&lt;/a&gt;ï¼Œå…¶ä»–äººä½¿ç”¨æ—¶ç›´æ¥å¼•ç”¨å³å¯ã€‚&lt;/p&gt;

&lt;p&gt;é€šè¿‡ä¸€ä¸ªç¤ºä¾‹å·¥ä½œæµç¨‹ï¼Œå¯¹ GitHub Actions å…ˆæœ‰ä¸€ä¸ªç®€å•å°è±¡ã€‚å¦‚ä¸‹åç§°ä¸º Notice å·¥ä½œæµç¨‹å¯å®ç° push ä»£ç åˆ°ä»“åº“æ—¶ï¼Œä½¿ç”¨è°·æ­Œé‚®ç®±è‡ªåŠ¨å‘é€ä¸€å° Email åˆ°æŒ‡å®šé‚®ç®±ã€‚&lt;/p&gt;

&lt;div class=&quot;language-yml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Notice&lt;/span&gt; 
&lt;span class=&quot;na&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;branches&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;master&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ubuntu-latest&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Send mail&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;dawidd6/action-send-mail@v2&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;server_address&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;smtp.gmail.com&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;server_port&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;465&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;${{secrets.MAIL_USERNAME}}&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;${{secrets.MAIL_PASSWORD}}&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;subject&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Github Actions job result&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;file://README.md&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;obiwan@tatooine.com,yoda@dagobah.com&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;from&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Luke Skywalker&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Notice å·¥ä½œæµç¨‹çš„å®ç°ï¼Œé™¤äº†è®¾ç½®è§¦å‘æ¡ä»¶å¤–ï¼Œä¸»è¦é€šè¿‡å¼•ç”¨ä»–äººè„šæœ¬&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dawidd6/action-send-mail@v2&lt;/code&gt; å®ç°å‘é€é‚®ä»¶åŠŸèƒ½ï¼Œé‚®ä»¶å†…å®¹å¯ä»¥ä¸ºå­—ç¬¦ä¸²æˆ–æ–‡ä»¶ï¼Œè¿™é‡Œä¸º README.md æ–‡æœ¬å†…å®¹ã€‚&lt;/p&gt;

&lt;p&gt;å·¥ä½œæµç¨‹ä¸­çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;${{secrets.MAIL_USERNAME}}&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;${{secrets.MAIL_PASSWORD}}&lt;/code&gt; åˆ†åˆ«ä¸ºé‚®ç®±è´¦å·å’Œæˆæƒç ï¼Œæ³¨æ„&lt;strong&gt;ä¸è¦åœ¨ä»£ç ä¸­ç›´æ¥ä½¿ç”¨å¯†ç &lt;/strong&gt;ï¼Œå¯†é’¥ç±»è¦é…ç½®åœ¨å½“å‰ä»“åº“çš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Settings/Secrets&lt;/code&gt;ç›®å½•ä¸‹ï¼Œä½¿ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;${{secrets.å˜é‡åç§°}}&lt;/code&gt;å¼•ç”¨ï¼Œå…·ä½“é…ç½®æ–¹æ³•ï¼Œç¨åå…·ä½“è¯´æ˜ã€‚&lt;/p&gt;

&lt;h2 id=&quot;ç›‘æµ‹ç½‘ç«™&quot;&gt;ç›‘æµ‹ç½‘ç«™&lt;/h2&gt;

&lt;p&gt;è‡ªå»ºçš„ç½‘ç«™/åšå®¢ç»å¸¸ä¼šå‡ºç° HTTPS è¯ä¹¦è¿‡æœŸï¼ŒæœåŠ¡å™¨å®•æœºç­‰å„ç§æƒ…å†µï¼Œè¿™æ—¶å€™éœ€è¦å¦å¤–ä¸€å°æœåŠ¡å™¨å®šæ—¶ç›‘æµ‹ç½‘ç«™æ˜¯å¦åœ¨çº¿ã€‚GitHub Actions å®Œå…¨å¯ä»¥æ»¡è¶³è¿™ä¸ªéœ€æ±‚ï¼Œé€šè¿‡å®šæ—¶æ‰§è¡Œè„šæœ¬ï¼Œæ¥æ£€æµ‹ç½‘ç«™æ˜¯å¦åœ¨çº¿ï¼Œè€Œä¸”æ˜¯ç¨³å®šå…è´¹çš„ã€‚&lt;/p&gt;

&lt;p&gt;å®ç°æ€è·¯ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;æ·»åŠ ä¸€ä¸ªå·¥ä½œæµç¨‹ (workflow)ï¼Œå¹¶è®¾ç½®å®šæ—¶è§¦å‘ï¼ˆæ¯éš” 15 åˆ†é’Ÿï¼‰æ­¤å·¥ä½œæµç¨‹ï¼›&lt;/li&gt;
  &lt;li&gt;åœ¨å·¥ä½œæµç¨‹ä¸­ä½¿ç”¨ curl å‘½ä»¤æ£€æŸ¥ muzipiao.github.io çš„ HTTP è¯·æ±‚çŠ¶æ€ç ï¼›&lt;/li&gt;
  &lt;li&gt;ä½¿ç”¨ python è„šæœ¬åˆ¤æ–­çŠ¶æ€ç ï¼Œå¦‚æœä¸æ˜¯ 200 æˆ– 301 å°±å‘é€é‚®ä»¶é€šçŸ¥ï¼Œæ˜¯çš„è¯å¿½ç•¥ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æµç¨‹å›¾ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/github_actions/flow_chart.png&quot; alt=&quot;actionsæµç¨‹å›¾&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;curl-æŸ¥è¯¢ç½‘ç«™çŠ¶æ€&quot;&gt;curl æŸ¥è¯¢ç½‘ç«™çŠ¶æ€&lt;/h2&gt;

&lt;p&gt;curl åŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œæˆ‘ä»¬åˆ¤æ–­ç½‘ç«™æ˜¯å¦åœ¨çº¿ï¼Œåªéœ€è¦ä½¿ç”¨ curl æŸ¥è¯¢è¯·æ±‚ç½‘ç«™ï¼Œè·å–ç½‘ç«™ HTTP çŠ¶æ€ç ï¼Œ200/301 æ—¶è¡¨ç¤ºç½‘ç«™æ­£å¸¸ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;-I ä»…æµ‹è¯•HTTPå¤´&lt;/li&gt;
  &lt;li&gt;-m 15 è¡¨ç¤ºæœ€å¤šæŸ¥è¯¢15s&lt;/li&gt;
  &lt;li&gt;-o /dev/null å±è”½åŸæœ‰è¾“å‡ºä¿¡æ¯&lt;/li&gt;
  &lt;li&gt;-s silent æ¨¡å¼ï¼Œä¸è¾“å‡ºä»»ä½•ä¸œè¥¿&lt;/li&gt;
  &lt;li&gt;-w %{http_code} æ§åˆ¶é¢å¤–è¾“å‡º&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# è¿™é‡Œè¡¨ç¤ºé™é»˜è·å–ç½‘ç«™ muzipiao.github.io çš„ HTTP è¯·æ±‚çŠ¶æ€ç ï¼Œæœ€å¤šæŸ¥è¯¢ 15s&lt;/span&gt;
curl &lt;span class=&quot;nt&quot;&gt;-I&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; 15 &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-w&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;%{http_code}&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; /dev/null  muzipiao.github.io
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/github_actions/curl_result.png&quot; alt=&quot;curl æŸ¥è¯¢ç»“æœ&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;python-å‘é€-email&quot;&gt;python å‘é€ Email&lt;/h2&gt;

&lt;p&gt;ç”±äºéœ€è¦åˆ¤æ–­ç½‘ç«™çŠ¶æ€ï¼Œç½‘ç«™ä¸åœ¨çº¿æ—¶å†å‘é€é‚®ä»¶ï¼Œåœ¨çº¿æ—¶å¿½ç•¥ï¼Œå¸‚åœºä¸Šå‘é€é‚®ä»¶çš„ Action ä¸ç¬¦åˆéœ€æ±‚ï¼Œæˆ‘ä»¬è‡ªå·±å†™ä¸€ä¸ª Python è„šæœ¬æ¥å®ç°ã€‚&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨ Python è„šæœ¬å®ç°åˆ¤æ–­çŠ¶æ€ç å’Œå‘é‚®ä»¶åŠŸèƒ½ï¼Œéœ€è¦ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯å‘é€é‚®ä»¶çš„é‚®ç®±åç§°ï¼Œé‚®ç®±æˆæƒç å’Œ curl ç½‘ç«™è·å–çš„ç½‘ç»œçŠ¶æ€ç ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;è­¦å‘Š[FBI WARNING]&lt;/strong&gt;âš ï¸ï¼šä¸è¦æŠŠé‚®ç®±æˆæƒç å†™åœ¨ä»£ç é‡Œé¢ï¼Œä¼šé€ æˆé‚®ç®±è¢«ç›—ã€‚&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;#!/usr/bin/env python
# coding=UTF-8
&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;smtplib&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;email.mime.text&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MIMEText&lt;/span&gt;

&lt;span class=&quot;sh&quot;&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;
å‚æ•° 1 SMTP æœåŠ¡å™¨çš„ç”¨æˆ·åï¼Œå‘é€é‚®ç®±åç§°
å‚æ•° 2 SMTP æœåŠ¡å™¨çš„å¯†ç ï¼Œå‘é€é‚®ç®±æˆæƒç ï¼ˆæ³¨æ„éé‚®ç®±åŸå¯†ç ï¼‰
å‚æ•° 3 curl ç½‘ç«™è¿”å›çš„çŠ¶æ€ç ï¼Œå¦‚ 200
&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&quot;&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;å‚æ•°ä¸ªæ•°é”™è¯¯&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# SMTP æœåŠ¡å™¨åç§°
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mail_host&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;smtp.qq.com&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# SMTP æœåŠ¡å™¨çš„ç”¨æˆ·å
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mail_user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# SMTP æœåŠ¡å™¨çš„å¯†ç 
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mail_pass&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# curl ç½‘ç«™è¿”å›çš„çŠ¶æ€ç 
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# muzipiao.github.io ä½¿ç”¨é‡å®šå‘åŸŸåï¼Œå› æ­¤ä¼šè¿”å› 301ï¼Œè¡¨ç¤ºç½‘ç«™æ­£å¸¸ï¼Œä¸ç”¨å‘é€é‚®ä»¶
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;301&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;ç½‘ç«™çŠ¶æ€æ­£å¸¸&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# å‘é€é‚®ç®±ï¼Œè¿™é‡Œè‡ªå·±ç»™è‡ªå·±å‘é€ä¸€å°é‚®ä»¶
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sender&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mail_user&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# æ¥æ”¶é‚®ç®±ï¼Œå¤šä¸ªé‚®ç®±ä½¿ç”¨é€—å·éš”å¼€ï¼Œeg. [1234@qq.com, 5678@126.com]
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;receivers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mail_user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# é‚®ä»¶æ­£æ–‡æ–‡å­—
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MIMEText&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;curl muzipiao.github.io çŠ¶æ€ç :&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;plain&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;utf-8&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# å‘ä»¶äººåç§°ï¼Œeg. å‘ä»¶äººï¼šGithubActions &amp;lt;actions@github.com&amp;gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;From&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;GithubActions &amp;lt;actions@github.com&amp;gt;&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# æ”¶ä»¶äººåç§°ï¼Œeg. æ”¶ä»¶äººï¼šlifei
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;To&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;lifei&amp;lt;muzipiao.github.io&amp;gt;&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# é‚®ä»¶æ ‡é¢˜
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Subject&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;muzipiao.github.io ç½‘ç»œæ•…éšœ&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;smtpObj&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;smtplib&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;SMTP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# é“¾æ¥ SMTP æœåŠ¡å™¨ï¼ŒQQ å‘é€é‚®ä»¶æœåŠ¡å™¨ï¼šsmtp.qq.comï¼Œä½¿ç”¨SSLï¼Œç«¯å£å·465æˆ–587
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;smtpObj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mail_host&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;587&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# ç™»å½• SMTP æœåŠ¡å™¨
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;smtpObj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;login&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mail_user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mail_pass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# å‘é€é‚®ä»¶
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;smtpObj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;sendmail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sender&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;receivers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;as_string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;é‚®ä»¶å‘é€æˆåŠŸï¼Œç½‘ç«™çŠ¶æ€ç ï¼š&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;except&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;smtplib&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SMTPException&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;æ— æ³•å‘é€é‚®ä»¶ï¼Œå¤±è´¥åŸå› ï¼š&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;smtplib&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Exception&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;æ·»åŠ -actions&quot;&gt;æ·»åŠ  Actions&lt;/h2&gt;

&lt;p&gt;(1) é€‰æ‹©å½“å‰ä»“åº“ï¼Œç‚¹å‡» Actions æ ‡ç­¾ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/github_actions/create_action1.png&quot; alt=&quot;é€‰æ‹© Actions æ ‡ç­¾&quot; /&gt;&lt;/p&gt;

&lt;p&gt;(2) é€‰æ‹©è‡ªå®šä¹‰å·¥ä½œæµç¨‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/github_actions/create_action2.png&quot; alt=&quot;è‡ªå®šä¹‰å·¥ä½œæµç¨‹&quot; /&gt;&lt;/p&gt;

&lt;p&gt;(3) é‡å‘½å yml æ–‡ä»¶åç§°ï¼Œåç§°æ— é™åˆ¶ï¼Œyml é…ç½®æ–‡ä»¶åŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/github_actions/create_action3.png&quot; alt=&quot;yml æ–‡ä»¶&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;yml-æ–‡ä»¶æ ¼å¼&quot;&gt;yml æ–‡ä»¶æ ¼å¼&lt;/h2&gt;

&lt;p&gt;GitHub åªè¦å‘ç° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.github/workflows&lt;/code&gt; ç›®å½•é‡Œé¢æœ‰.ymlæ–‡ä»¶ï¼Œå°±ä¼šè‡ªåŠ¨è¿è¡Œè¯¥æ–‡ä»¶ï¼Œä¸»è¦æ ¼å¼ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;workflowï¼ˆå·¥ä½œæµç¨‹ï¼‰ï¼šå¯ç®€å•ç†è§£ä¸ºä¸€ä¸ª yml æ–‡ä»¶å°±æ˜¯ä¸€ä¸ª workflowã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;jobï¼ˆä»»åŠ¡ï¼‰ï¼šä¸€ä¸ª workflow ç”±ä¸€ä¸ªæˆ–å¤šä¸ª jobs æ„æˆï¼Œä¸€æ¬¡å¯ä»¥å®Œæˆå¤šä¸ªä»»åŠ¡ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;stepï¼ˆæ­¥éª¤ï¼‰ï¼šæ¯ä¸ª job ç”±å¤šä¸ª step æ„æˆï¼Œä¸€æ­¥ä¸€æ­¥é€ä¸ªå®Œæˆã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;actionï¼ˆåŠ¨ä½œï¼‰ï¼šæ¯ä¸ª step å¯ä»¥ä¾æ¬¡æ‰§è¡Œä¸€ä¸ªæˆ–å¤šä¸ªå‘½ä»¤ï¼ˆactionï¼‰ã€‚&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å¦‚æœ¬æ¬¡å®šæ—¶æ£€æŸ¥ç½‘ç«™æ˜¯å¦åœ¨çº¿çš„ yml æ–‡ä»¶ï¼Œä¸ç”¨ç›‘å¬ push/pull è¯·æ±‚è§¦å‘ï¼Œå®šæ—¶è§¦å‘ï¼Œæ¯ 15 åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ curl å‘½ä»¤ï¼Œå¹¶å°†è¿”å›çš„ HTTP çŠ¶æ€ç å­˜å‚¨åœ¨å˜é‡ status_codeï¼Œå°†å‘é€é‚®ä»¶çš„é‚®ç®±è´¦å·ã€å¯†ç å’Œstatus_code çš„å€¼ä¼ å…¥ python è„šæœ¬ä¸­ï¼Œå¦‚æœä¸æ˜¯ 200/301 å°±å‘é€é€šçŸ¥é‚®ä»¶ã€‚&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# è·å– muzipiao.github.io çš„ HTTP çŠ¶æ€ç ï¼Œå¹¶å°†è¿”å›çš„ HTTP çŠ¶æ€ç å­˜å‚¨åœ¨å˜é‡ status_code&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;status_code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;curl &lt;span class=&quot;nt&quot;&gt;-I&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; 15 &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-w&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;%{http_code}&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; /dev/null  muzipiao.github.io&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# å°†å‘é€é‚®ä»¶çš„é‚®ç®±è´¦å·ã€å¯†ç å’Œstatus_code ä¼ å…¥ Python è„šæœ¬ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦å‘é€é‚®ä»¶&lt;/span&gt;
python ./email_status.py &lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{secrets.MAIL_USERNAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{secrets.MAIL_PASSWORD&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$status_code&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç›‘æµ‹ç½‘ç«™çš„å®Œæ•´ yml æ–‡ä»¶å¦‚ä¸‹ï¼Œå¯å‚è€ƒä¸‹æ–¹æ³¨é‡Šç†è§£ã€‚&lt;/p&gt;

&lt;div class=&quot;language-yml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# å·¥ä½œæµç¨‹ (workflow) åç§°&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;muzipiao.github.io&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# è§¦å‘æ¡ä»¶&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# æ¯å¤©æ¯ 15 åˆ†é’Ÿè¿è¡Œä¸€æ¬¡æ­¤å·¥ä½œæµ&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;schedule&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;cron&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*/15&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&apos;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# ä»»åŠ¡ï¼Œä¸€ä¸ªå·¥ä½œæµç¨‹ç”±ä¸€ä¸ªæˆ–å¤šä¸ªä»»åŠ¡ (job) æ„æˆ&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# build ä»»åŠ¡ï¼Œè¿™ä¸ªå·¥ä½œæµç¨‹åŒ…å«ä¸€ä¸ªåç§°ä¸º &quot;build&quot; çš„ä»»åŠ¡ (job)&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# ä»»åŠ¡ (job) è¿è¡Œçš„ç¯å¢ƒç±»å‹ï¼Œè¿è¡Œåœ¨è™šæ‹Ÿæœºç¯å¢ƒ ubuntu-latest&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ubuntu-latest&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# æ­¥éª¤ (step) è¡¨ç¤ºå°†ä½œä¸ºä»»åŠ¡ (job) ä¸€éƒ¨åˆ†æ‰§è¡Œçš„ä¸€ç³»åˆ—ä»»åŠ¡&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;# ç¬¬ä¸€æ­¥æ˜¯è·å–æºç ï¼Œå¼•ç”¨ç°æˆçš„æ£€å‡º actionï¼Œå°†ä»£ç æ£€å‡ºåˆ°è™šæ‹Ÿæœºä¸Š&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;actions/checkout@v2&lt;/span&gt;
      
      &lt;span class=&quot;c1&quot;&gt;# è¿è¡Œä¸€ç»„ shell åç§°ï¼Œè·å– muzipiao.github.io çš„ç½‘ç«™çŠ¶æ€ï¼Œå¹¶åˆ¤æ–­æ˜¯å¦éœ€è¦å‘é€é‚®ä»¶&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Get muzipiao.github.io response status code.&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;|&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;export status_code=$(curl -I -m 15 -s -w &quot;%{http_code}\n&quot; -o /dev/null  muzipiao.github.io)&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;python ./email_status.py ${{secrets.MAIL_USERNAME}} ${{secrets.MAIL_PASSWORD}} $status_code&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;on-è§¦å‘æ¡ä»¶&quot;&gt;on è§¦å‘æ¡ä»¶&lt;/h2&gt;

&lt;p&gt;å¯ä»¥é€šè¿‡ push æˆ– pull è¯·æ±‚äº‹ä»¶è§¦å‘å·¥ä½œæµï¼Œæˆ–å®šæ—¶è§¦å‘å·¥ä½œæµï¼Œå¹¶å¯æŒ‡å®šåˆ†æ”¯ã€‚&lt;/p&gt;

&lt;div class=&quot;language-yml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;muzipiao.github.io&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# æ­¤å·¥ä½œæµç¨‹çš„è§¦å‘æ¡ä»¶&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# push æˆ– pull è¯·æ±‚äº‹ä»¶è§¦å‘å·¥ä½œæµï¼Œä¸”ä»…é’ˆå¯¹ master åˆ†æ”¯&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;branches&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;master&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;pull_request&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;branches&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;master&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# æ¯å¤©æ¯ 15 åˆ†é’Ÿè¿è¡Œä¸€æ¬¡æ­¤å·¥ä½œæµ&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;schedule&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;cron&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*/15&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&apos;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;schedule è®¡åˆ’ä»»åŠ¡è¯­æ³•æœ‰äº”ä¸ªå­—æ®µï¼Œä¸­é—´ç”¨ç©ºæ ¼åˆ†éš”ï¼Œæ¯ä¸ªå­—æ®µä»£è¡¨ä¸€ä¸ªæ—¶é—´å•ä½ã€‚&lt;/p&gt;

&lt;div class=&quot;language-yml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# è®¡åˆ’ä»»åŠ¡è¯­æ³•æœ‰äº”ä¸ªå­—æ®µï¼Œä¸­é—´ç”¨ç©ºæ ¼åˆ†éš”ï¼Œæ¯ä¸ªå­—æ®µä»£è¡¨ä¸€ä¸ªæ—¶é—´å•ä½ã€‚&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;schedule&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# æ¯ 15 åˆ†é’Ÿè¿è¡Œä¸€æ¬¡æ­¤å·¥ä½œæµ&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;cron&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*/15&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&apos;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# æ¯ 5 åˆ†æ”¯è¿è¡Œä¸€æ¬¡æ­¤å·¥ä½œæµ&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;cron&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*/15&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&apos;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# æ¯å¤©åœ¨å›½é™…æ ‡å‡†æ—¶é—´ 20 ç‚¹ï¼ˆåŒ—äº¬æ—¶é—´æ—©ä¸Š 4 ç‚¹ï¼‰è¿è¡Œä¸€æ¬¡æ­¤å·¥ä½œæµ&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;cron&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&apos;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# æ¯å‘¨ä¸€åœ¨å›½é™…æ—¶é—´ä¸‹åˆ 1 ç‚¹ï¼ˆåŒ—äº¬æ—¶é—´ä¸‹åˆ 9 ç‚¹ï¼‰è¿è¡Œä¸€æ¬¡æ­¤å·¥ä½œæµ&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;cron&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;1&apos;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# æ¯å¤©å›½é™…æ—¶é—´ 0 ç‚¹ï¼ˆåŒ—äº¬æ—¶é—´ä¸Šåˆ 8 ç‚¹ï¼‰è¿è¡Œä¸€æ¬¡æ­¤å·¥ä½œæµ&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;cron&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&apos;&lt;/span&gt;
    
&lt;span class=&quot;s&quot;&gt;â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ minute (0 - 59)&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ hour (0 - 23)&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ day of the month (1 - 31)&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ month (1 - 12 or JAN-DEC)&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ day of the week (0 - 6 or SUN-SAT)&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;â”‚ â”‚ â”‚ â”‚ â”‚&lt;/span&gt;                                   
&lt;span class=&quot;s&quot;&gt;â”‚ â”‚ â”‚ â”‚ â”‚&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;â”‚ â”‚ â”‚ â”‚ â”‚&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;*&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æ‚¨å¯åœ¨è¿™äº”ä¸ªå­—æ®µä¸­ä½¿ç”¨ä»¥ä¸‹è¿ç®—ç¬¦ï¼š&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;è¿ç®—ç¬¦&lt;/th&gt;
      &lt;th&gt;æè¿°&lt;/th&gt;
      &lt;th&gt;ç¤ºä¾‹&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;*&lt;/td&gt;
      &lt;td&gt;ä»»æ„å€¼&lt;/td&gt;
      &lt;td&gt;* * * * * åœ¨æ¯å¤©çš„æ¯åˆ†é’Ÿè¿è¡Œã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;,&lt;/td&gt;
      &lt;td&gt;å€¼åˆ—è¡¨åˆ†éš”ç¬¦&lt;/td&gt;
      &lt;td&gt;2,10 4,5 * * * åœ¨æ¯å¤©ç¬¬ 4 å’Œç¬¬ 5 å°æ—¶çš„ç¬¬ 2 å’Œç¬¬ 10 åˆ†é’Ÿè¿è¡Œã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;-&lt;/td&gt;
      &lt;td&gt;å€¼çš„èŒƒå›´&lt;/td&gt;
      &lt;td&gt;0 4-6 * * * åœ¨ç¬¬ 4ã€5ã€6 å°æ—¶çš„ç¬¬ 0 åˆ†é’Ÿè¿è¡Œã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/&lt;/td&gt;
      &lt;td&gt;æ­¥éª¤å€¼&lt;/td&gt;
      &lt;td&gt;20/15 * * * * ä»ç¬¬ 20 åˆ†é’Ÿåˆ°ç¬¬ 59 åˆ†é’Ÿæ¯éš” 15 åˆ†é’Ÿè¿è¡Œï¼ˆç¬¬ 20ã€35 å’Œ 50 åˆ†é’Ÿï¼‰ã€‚&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;é…ç½®-secrets-å˜é‡&quot;&gt;é…ç½® Secrets å˜é‡&lt;/h2&gt;

&lt;p&gt;ç”±äº Python è„šæœ¬ä½¿ç”¨ QQ é‚®ç®±å‘é€ Emailï¼ŒQQ é‚®ç®±ä¸å…è®¸ç›´æ¥ä½¿ç”¨å¯†ç ï¼Œéœ€è¦æå‰è·å– QQ é‚®ç®±æˆæƒç ï¼Œå…·ä½“è·å–æ–¹æ³•ï¼Œå…ˆç™»å½• QQ é‚®ç®±ï¼Œåœ¨è·¯å¾„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;è®¾ç½®-è´¦æˆ·-POP3/IMAP/SMTP/Exchange/CardDAV/CalDAVæœåŠ¡&lt;/code&gt;ï¼Œæ ¹æ®æç¤ºï¼ŒæŸ¥çœ‹è¯´æ˜å¼€å¯è·å–æˆæƒç å³å¯ï¼Œå…¶ä»–é‚®ç®±æ“ä½œç±»ä¼¼ã€‚&lt;/p&gt;

&lt;p&gt;(1) é€‰æ‹©å½“å‰ä»“åº“çš„ Setting ç›®å½•ï¼Œåœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Settings/Secrets&lt;/code&gt;ï¼Œå¯çœ‹åˆ°å¦‚ä¸‹ç•Œé¢ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/github_actions/add_secrets1.png&quot; alt=&quot;é€‰æ‹© Secrets&quot; /&gt;&lt;/p&gt;

&lt;p&gt;(2) é€‰æ‹© &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;New repository secret&lt;/code&gt; æŒ‰é’®ï¼Œçœ‹åˆ°å¦‚ä¸‹ç”»é¢ï¼Œå¡«å…¥å˜é‡åç§°ï¼ˆå¦‚ MAIL_PASSWORDï¼‰å’Œå˜é‡å€¼ï¼ˆå¦‚è·å–çš„é‚®ç®±æˆæƒç ï¼‰ï¼Œç‚¹å‡» &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Add secret&lt;/code&gt; ä¿å­˜ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/github_actions/add_secrets2.png&quot; alt=&quot;æ·»åŠ  Secret&quot; /&gt;&lt;/p&gt;

&lt;p&gt;(3) é€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;${{secrets.å˜é‡åç§°}}&lt;/code&gt; ä½¿ç”¨å˜é‡å€¼ï¼ˆä¾‹å¦‚ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;${{secrets.MAIL_PASSWORD}}&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;

&lt;h2 id=&quot;è‡ªåŠ¨æ‰§è¡Œæ•ˆæœ&quot;&gt;è‡ªåŠ¨æ‰§è¡Œæ•ˆæœ&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/github_actions/run_result1.png&quot; alt=&quot;æ‰§è¡Œæ•ˆæœ&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/github_actions/run_result2.png&quot; alt=&quot;æ‰§è¡Œæ•ˆæœ&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/github_actions/run_result3.png&quot; alt=&quot;æ‰§è¡Œæ•ˆæœ&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/github_actions/run_result4.png&quot; alt=&quot;æ‰§è¡Œæ•ˆæœ&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;å‚è€ƒ&quot;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.github.com/cn/free-pro-team@latest/actions/reference/events-that-trigger-workflows&quot;&gt;å®˜æ–¹æ–‡æ¡£-è§¦å‘å·¥ä½œæµç¨‹çš„äº‹ä»¶&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.ruanyifeng.com/blog/2019/12/github_actions.html&quot;&gt;ç¤ºä¾‹-å®šæ—¶å‘é€å¤©æ°”&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html&quot;&gt;ç¤ºä¾‹-GitHub Actions&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Thu, 24 Dec 2020 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2020/12/GitHub-Actions-%E7%9B%91%E6%B5%8B%E7%BD%91%E7%AB%99%E5%9C%A8%E7%BA%BF/</link>
        <guid isPermaLink="true">http://localhost:4000/2020/12/GitHub-Actions-%E7%9B%91%E6%B5%8B%E7%BD%91%E7%AB%99%E5%9C%A8%E7%BA%BF/</guid>
        
        <category>GitHub</category>
        
        
      </item>
    
      <item>
        <title>iOS æ‰‹æœºå·ä¸€é”®ç™»å½•</title>
        <description>&lt;h2 id=&quot;ä»€ä¹ˆæ˜¯ä¸€é”®ç™»å½•&quot;&gt;ä»€ä¹ˆæ˜¯ä¸€é”®ç™»å½•&lt;/h2&gt;

&lt;p&gt;iOS æ— æ³•ç›´æ¥è·å–å½“å‰è®¾å¤‡æ‰‹æœºå·ç ï¼ˆä¸åŒ…å«ä½¿ç”¨ç§æœ‰ APIï¼‰ï¼Œä½†ç”µä¿¡æœåŠ¡è¿è¥å•†ï¼ˆç§»åŠ¨/è”é€š/ç”µä¿¡ç­‰ï¼‰æ˜¯çŸ¥é“æµé‡å“ªå¼ æ‰‹æœºå¡æ¶ˆè€—çš„ï¼Œç»“åˆè¿è¥å•†çš„ç½‘å…³è®¤è¯èƒ½åŠ›ï¼Œå°±å¯ä»¥è¯†åˆ«å‡ºå½“å‰ä½¿ç”¨çš„æ‰‹æœºå¡å·ç ã€‚é€šå¸¸è¯´çš„åœºæ™¯æ˜¯æŒ‡&lt;strong&gt;ä¸€é”®ç™»å½•&lt;/strong&gt;å’Œ&lt;strong&gt;æœ¬æœºå·ç è®¤è¯&lt;/strong&gt;ä¸¤ä¸ªä¸åŒçš„åŠŸèƒ½ï¼Œä½¿ç”¨åœºæ™¯ä¸ä¸€æ ·ï¼Œæ— éœ€ä¸€èµ·ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä¸€é”®ç™»å½•ä½¿ç”¨åœºæ™¯&lt;/strong&gt;ï¼šç”¨æˆ·æ— éœ€è¾“å…¥æ‰‹æœºå·ç ï¼ŒSDK ä¼šæ‹‰èµ·æˆæƒé¡µï¼Œç”¨æˆ·ç¡®è®¤æˆæƒåï¼ŒSDK ä¼šè·å– tokenï¼ŒæœåŠ¡ç«¯æºå¸¦ token åˆ°è¿è¥å•†ç½‘å…³è·å–ç”¨æˆ·å½“å‰ä¸Šç½‘ä½¿ç”¨çš„å·ç ï¼ˆeg. æœåŠ¡ç«¯è°ƒç”¨ GetMobile æ¥å£ï¼‰ï¼Œå¹¶è¿”å›ç»™ App æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯å¯å°†å½“å‰ç”¨æˆ·ç½®ä¸ºç™»å½•çŠ¶æ€ï¼Œå¹¶æŠŠæ‰‹æœºå·è¿”å›å®¢æˆ·ç«¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æœ¬æœºå·ç è®¤è¯ä½¿ç”¨åœºæ™¯&lt;/strong&gt;ï¼šç”¨æˆ·è¾“å…¥æ‰‹æœºå·ç ï¼Œé€šè¿‡ SDK è·å– tokenï¼ŒæœåŠ¡ç«¯æºå¸¦è¾“å…¥çš„æ‰‹æœºå·ç å’Œ token å»è¿è¥å•†ç½‘å…³è¿›è¡Œæ ¡éªŒï¼ˆeg. æœåŠ¡ç«¯è°ƒç”¨ VerifyMobile æ¥å£ï¼‰ï¼Œè¿”å›çš„ç»“æœæ˜¯ç”¨æˆ·å½“å‰ä¸Šç½‘ä½¿ç”¨çš„å·ç ä¸è¾“å…¥çš„å·ç æ˜¯å¦ä¸€è‡´ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;token ç”±é›†æˆçš„ SDK ç”Ÿæˆï¼Œä¾‹å¦‚é›†æˆçš„æ˜¯ç§»åŠ¨è®¤è¯ SDKï¼Œåˆ™è°ƒç”¨å¯¹åº” API è¿”å› tokenï¼›&lt;/li&gt;
  &lt;li&gt;ç”¨æˆ·å¿…é¡»å¼€å¯ 4G æµé‡ï¼Œå¦‚æœæ˜¯å¤šå¡æ‰‹æœºï¼Œåˆ™åªèƒ½è®¤è¯å½“å‰ä½¿ç”¨çš„æµé‡çš„æ‰‹æœºå¡ï¼Œ2G/3G å½±å“è¯†åˆ«æ•ˆæœï¼›&lt;/li&gt;
  &lt;li&gt;æ‰‹æœºå·ä¸€é”®ç™»å½•åŠŸèƒ½ä¸æ”¯æŒä»»æ„åº”ç”¨ï¼Œå¾…ä½¿ç”¨çš„ APP å¿…é¡»åœ¨ç®¡ç†å¹³å°é…ç½®å¯¹åº”çš„ APP åŒ…åå’Œå”¯ä¸€æ ‡è¯†ï¼ˆAndroidä¸ºç­¾åï¼ŒiOS ä¸º Bundle IDï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;è¿è¥å•†&quot;&gt;è¿è¥å•†&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;ç”µä¿¡è¿è¥å•†éƒ½å…¬å¸ƒè‡ªå·±çš„å¼€æ”¾å¹³å°å’Œ SDKï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ç§»åŠ¨ - äº’è”ç½‘èƒ½åŠ›å¼€æ”¾å¹³å°ï¼ˆhttp://dev.10086.cn/numIdentific?from=indexï¼‰&lt;/li&gt;
  &lt;li&gt;ç”µä¿¡ - å¤©ç¿¼è´¦å·å¼€æ”¾å¹³å°ï¼ˆhttp://id.189.cn/banner/unPasswordï¼‰&lt;/li&gt;
  &lt;li&gt;è”é€š - WO+ å¼€æ”¾å¹³å°ï¼ˆhttp://www.open.wo.com.cn/aep/index.htmlï¼‰&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;ä¸‰æ–¹è¿è¥å•†ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ä¸‰æ–¹è¿è¥å•†ä¸€èˆ¬ä¼šæ•´åˆäº†ä¸‰å¤§è¿è¥å•†çš„ç½‘å…³è®¤è¯èƒ½åŠ›ï¼Œå…¶å®å°±æ˜¯åœ¨ä¸‰å¤§è¿è¥å•† SDK åŸºç¡€ä¸Šè¿›è¡Œäº†å°è£…ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;æå…‰è®¤è¯ï¼ˆhttps://www.jiguang.cn/identifyï¼‰&lt;/li&gt;
  &lt;li&gt;å‹ç›Ÿè®¤è¯ï¼ˆhttps://market.aliyun.com/products/57124001/cmapi00036707.htmlï¼‰&lt;/li&gt;
  &lt;li&gt;ç½‘æ˜“è®¤è¯ï¼ˆhttps://dun.163.com/product/phone-verificationï¼‰&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;é›†æˆæµ‹è¯•å¯¹æ¯”ï¼Œç§»åŠ¨ã€æå…‰å’Œå‹ç›Ÿï¼Œæ–‡æ¡£è¾ƒé½å…¨ï¼Œç§»åŠ¨ SDK ä¸é¡¹ç›®å†²çªæ¦‚ç‡è¾ƒå°ï¼Œæå…‰å’Œå‹ç›Ÿå¯èƒ½éœ€è¦é¡¹ç›®å·²é›†æˆçš„å¯¹åº” SDK åŸºç¡€åº“ç‰ˆæœ¬ï¼Œå‹ç›Ÿè¿˜å¯èƒ½ä¼šä¸å…¶ä»–é˜¿é‡Œç»„ä»¶å†²çªã€‚&lt;/p&gt;

&lt;h2 id=&quot;ä¸€é”®ç™»å½•æµç¨‹&quot;&gt;ä¸€é”®ç™»å½•æµç¨‹&lt;/h2&gt;

&lt;p&gt;ä¸€é”®ç™»å½•ä¸æœ¬æœºå·ç è®¤è¯æµç¨‹å¾ˆç±»ä¼¼ï¼Œç”¨æˆ·ä½¿ç”¨ä½“éªŒçš„åŒºåˆ«ï¼Œå¯ç®€å•å½’çº³ä¸ºæ˜¯å¦è¾“å…¥æ‰‹æœºå·ç ã€‚ä¸€é”®ç™»å½•æµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;SDK åˆå§‹åŒ–ï¼šè°ƒç”¨ SDK çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œä¼ å…¥é¡¹ç›®åœ¨å¹³å°ä¸Šçš„ AppKey å’Œ AppSecretï¼›&lt;/li&gt;
  &lt;li&gt;å”¤èµ·æˆæƒé¡µï¼šè°ƒç”¨ SDK å”¤èµ·æˆæƒæ¥å£ã€‚SDK ä¼šå…ˆå‘è¿è¥å•†å‘èµ·è·å–æ‰‹æœºå·æ©ç çš„è¯·æ±‚ï¼Œè¯·æ±‚æˆåŠŸåè·³è½¬åˆ°æˆæƒé¡µã€‚æˆæƒé¡µä¼šæ˜¾ç¤ºæ‰‹æœºå·æ©ç ä»¥åŠè¿è¥å•†åè®®ç»™ç”¨æˆ·ç¡®è®¤ï¼›&lt;/li&gt;
  &lt;li&gt;åŒæ„æˆæƒå¹¶ç™»å½•ï¼šç”¨æˆ·åŒæ„ç›¸å…³åè®®ï¼Œç‚¹å‡»æˆæƒé¡µé¢çš„ç™»å½•æŒ‰é’®ï¼ŒSDK ä¼šè¯·æ±‚æœ¬æ¬¡å–å·çš„ tokenï¼Œè¯·æ±‚æˆåŠŸåå°† token è¿”å›ç»™å®¢æˆ·ç«¯ï¼›&lt;/li&gt;
  &lt;li&gt;å–å·ï¼šå°†è·å–åˆ°çš„ token å‘é€åˆ°æˆ‘ä»¬è‡ªå·±çš„æœåŠ¡å™¨ï¼Œç”±æœåŠ¡å™¨æºå¸¦ token è°ƒç”¨è¿è¥å•†ä¸€é”®ç™»å½•çš„æ¥å£ï¼Œè°ƒç”¨æˆåŠŸå°±è¿”å›æ‰‹æœºå·ç äº†ã€‚æœåŠ¡å™¨ç”¨æ‰‹æœºå·è¿›è¡Œç™»å½•æˆ–æ³¨å†Œæ“ä½œï¼Œè¿”å›æ“ä½œç»“æœç»™å®¢æˆ·ç«¯ï¼Œå®Œæˆä¸€é”®ç™»å½•ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æµç¨‹å›¾å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/phone_oauth/phone_oauth0.png&quot; alt=&quot;ä¸€é”®ç™»å½•æµç¨‹&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä¸€é”®ç™»å½•æˆæƒé¡µé¢å¤§è‡´å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/phone_oauth/phone_oauth1.png&quot; alt=&quot;ä¸€é”®ç™»å½•æˆæƒ&quot; /&gt;&lt;/p&gt;
</description>
        <pubDate>Fri, 09 Oct 2020 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2020/10/iOS-%E6%89%8B%E6%9C%BA%E5%8F%B7%E4%B8%80%E9%94%AE%E7%99%BB%E5%BD%95/</link>
        <guid isPermaLink="true">http://localhost:4000/2020/10/iOS-%E6%89%8B%E6%9C%BA%E5%8F%B7%E4%B8%80%E9%94%AE%E7%99%BB%E5%BD%95/</guid>
        
        <category>iOS</category>
        
        
      </item>
    
      <item>
        <title>å¼€å‘è€…å¿«é€Ÿé…ç½®ç¯å¢ƒæŒ‡å—</title>
        <description>&lt;h2 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h2&gt;

&lt;p&gt;å¼€å‘é…ç½®ç¯å¢ƒæˆ–æ›´æ–°æ—¶ï¼Œç»å¸¸è¢«ç½‘ç»œæå¾—ç²¾ç–²åŠ›ç«­ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;403 Forbidden&lt;/code&gt;ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;443 Timeout&lt;/code&gt;ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SSL_ERROR_SYSCALL&lt;/code&gt;ç­‰å„ç§é”™è¯¯ï¼Œä¸ç»å†å¦‚å°åª³å¦‡ç›¼å¤«å½’èˆ¬çš„ç­‰å¾…è¿›åº¦æ¡&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;########    9.1%&lt;/code&gt;æ…¢æ…¢çˆ¬è¡Œï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;clone&lt;/code&gt;è‡³ 99% æ—¶çªç„¶&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;error&lt;/code&gt;çš„ç»æœ›å¿ƒæƒ…ï¼Œæ˜¯ä¸ä¼šç†è§£è¿™ç§å¿ƒæƒ…çš„ ğŸ˜¤ ã€‚&lt;/p&gt;

&lt;p&gt;ç©¶å…¶åŸå› ï¼Œæ˜¯å›½å¤–ç½‘ç»œè¢«å±è”½ã€é€Ÿåº¦æ…¢ï¼Œæ‰çº¿ç­‰å„ç§å› ç´ é€ æˆçš„ï¼›æƒ³å­¦ä¹ æ—¶ï¼Œå¯èƒ½èŠ±äº†ä¸€å¤©é…ç½®ç¯å¢ƒï¼Œç¯å¢ƒé…ç½®å¥½æ—©å·²æ²¡äº†å¿ƒæƒ…ã€‚å¹¸è¿çš„æ˜¯å›½å†…é«˜æ ¡å’Œå¤§å…¬å¸éƒ½æä¾›äº†é•œåƒæºï¼Œé€Ÿåº¦å’Œç¨³å®šæ€§éƒ½å¤§å¹…åº¦æå‡ï¼Œå›½å†…ç›´è¿ï¼Œæ¯”ä»˜è´¹ VPN é€Ÿåº¦æ›´å¿«ï¼Œç¨³å®šæ€§æ›´é«˜ã€‚&lt;/p&gt;

&lt;p&gt;é•œåƒæºå¯ç®€å•ç†è§£ä¸ºâ€œå¤åˆ¶çš„ä¸‹è½½æºâ€ï¼Œä¾‹å¦‚ä¸‹è½½ä¸€éƒ¨ç”µå½±ï¼ŒåŸå§‹é“¾æ¥&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://movie.***.com&lt;/code&gt;æ˜¯å›½å¤–æœåŠ¡å™¨çš„ä¸‹è½½é“¾æ¥ï¼Œå›½å†…ç›´æ¥ä¸‹è½½å¯èƒ½é€Ÿåº¦åªæœ‰ 20KBï¼›è¿™æ—¶å¦‚æœå›½å†…æœ‰äººèŠ±è´¹ä¸€æ•´å¤©æŠŠç”µå½±ä¸‹è½½åï¼ŒæŠŠè¿™éƒ¨ç”µå½±æ”¾åˆ°å›½å†…æœåŠ¡å™¨ä¸Šï¼Œå¹¶å‘å¤–å¼€æ”¾ä¸‹è½½åœ°å€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://movie.***.cn&lt;/code&gt;ï¼Œè¿™æ—¶å›½å†…æœ‰äººæƒ³ä¸‹è½½è¿™éƒ¨ç”µå½±ï¼Œä½¿ç”¨åé¢åˆ†äº«çš„è¿™ä¸ªé“¾æ¥ï¼Œä¸‹è½½é€Ÿåº¦å¯èƒ½å°±è¾¾åˆ° 2MB äº†ï¼›è¿™é‡Œçš„æ¯”å–»å¯èƒ½ä¸å¤ªæ°å½“ï¼Œä»…ç”¨äºç†è§£é•œåƒæºã€‚&lt;/p&gt;

&lt;p&gt;æœ¬æ–‡æä¾› brewã€pypiã€dockerï¼Œgithub ç­‰éƒ¨åˆ†è§£å†³æ–¹æ¡ˆï¼Œè¯¦ç»†è¯´æ˜å¯æŸ¥çœ‹é•œåƒæºçš„å¸®åŠ©æ–‡æ¡£ã€‚&lt;/p&gt;

&lt;h2 id=&quot;é•œåƒæº&quot;&gt;é•œåƒæº&lt;/h2&gt;

&lt;p&gt;å›½å†…é•œåƒæºåšçš„æ¯”è¾ƒå¥½çš„æ˜¯&lt;strong&gt;ä¸­ç§‘å¤§&lt;/strong&gt;å’Œæ¸…åï¼Œå…¶ä»–å¤§å…¬å¸ä¹Ÿæä¾›äº†é•œåƒæºï¼Œä¾‹å¦‚é˜¿é‡Œã€è…¾è®¯ï¼Œç½‘æ˜“ç­‰ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸­ç§‘å¤§å’Œæ¸…åé•œåƒæºå®Œå…¨èƒ½æ»¡è¶³å¼€å‘éœ€æ±‚ï¼Œä»¥&lt;strong&gt;ä¸­ç§‘å¤§&lt;/strong&gt;é•œåƒæºä¸¾ä¾‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://mirrors.ustc.edu.cn/&quot;&gt;ä¸­ç§‘å¤§é•œåƒæºåœ°å€&lt;/a&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://mirrors.ustc.edu.cn/&lt;/code&gt;ï¼Œè¿™æ˜¯è‡ªåŠ¨è§£æçº¿è·¯ï¼Œè¿˜å¯ä»¥æ ¹æ®è‡ªå·±çš„ç½‘ç»œé€‰æ‹©å¦‚ä¸‹é€Ÿåº¦å¿«çš„çº¿è·¯ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://mirrors.ustc.edu.cn/&quot;&gt;è‡ªåŠ¨è§£æ https://mirrors.ustc.edu.cn/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://ipv4.mirrors.ustc.edu.cn/&quot;&gt;IPv4 çº¿è·¯ https://ipv4.mirrors.ustc.edu.cn/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://ipv6.mirrors.ustc.edu.cn/&quot;&gt;IPv6 çº¿è·¯ https://ipv6.mirrors.ustc.edu.cn/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://cernet.mirrors.ustc.edu.cn/&quot;&gt;æ•™è‚²ç½‘çº¿è·¯ https://cernet.mirrors.ustc.edu.cn/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://chinanet.mirrors.ustc.edu.cn/&quot;&gt;ç”µä¿¡çº¿è·¯ https://chinanet.mirrors.ustc.edu.cn/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://unicom.mirrors.ustc.edu.cn/&quot;&gt;è”é€šçº¿è·¯ https://unicom.mirrors.ustc.edu.cn/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://cmcc.mirrors.ustc.edu.cn/&quot;&gt;ç§»åŠ¨çº¿è·¯ https://cmcc.mirrors.ustc.edu.cn/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://rsync.mirrors.ustc.edu.cn/&quot;&gt;Rsync çº¿è·¯ https://rsync.mirrors.ustc.edu.cn/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;å¦‚ä½•è®¾ç½®é•œåƒæº&lt;/strong&gt;ï¼Œå¯æŸ¥çœ‹&lt;a href=&quot;https://mirrors.ustc.edu.cn/help/&quot;&gt;å¸®åŠ©æ–‡æ¡£&lt;/a&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://mirrors.ustc.edu.cn/help/&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å…¶ä»–é•œåƒæº&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://mirrors.tuna.tsinghua.edu.cn/&quot;&gt;æ¸…åé•œåƒæº https://mirrors.tuna.tsinghua.edu.cn/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://developer.aliyun.com/mirror&quot;&gt;é˜¿é‡Œäº‘é•œåƒæº https://developer.aliyun.com/mirror&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://mirrors.cloud.tencent.com/&quot;&gt;è…¾è®¯é•œåƒæº https://ipv6.mirrors.ustc.edu.cn/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://mirrors.163.com/&quot;&gt;ç½‘æ˜“é•œåƒæº http://mirrors.163.com/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;brew&quot;&gt;brew&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;æ›¿æ¢ brew æº&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# æ›¿æ¢ brew.git:&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;brew &lt;span class=&quot;nt&quot;&gt;--repo&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
git remote set-url origin https://mirrors.ustc.edu.cn/brew.git

&lt;span class=&quot;c&quot;&gt;# æ›¿æ¢ homebrew-core.git:&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;brew &lt;span class=&quot;nt&quot;&gt;--repo&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Library/Taps/homebrew/homebrew-core&quot;&lt;/span&gt;
git remote set-url origin https://mirrors.ustc.edu.cn/homebrew-core.git

&lt;span class=&quot;c&quot;&gt;# æ›¿æ¢ Homebrew Cask&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;brew &lt;span class=&quot;nt&quot;&gt;--repo&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;/Library/Taps/homebrew/homebrew-cask
git remote set-url origin https://mirrors.ustc.edu.cn/homebrew-cask.git

&lt;span class=&quot;c&quot;&gt;# å¯¹äº bash ç”¨æˆ·ï¼Œæ›¿æ¢ Homebrew-bottles&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; ~/.bash_profile
&lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt; ~/.bash_profile

&lt;span class=&quot;c&quot;&gt;# å¯¹äº zsh ç”¨æˆ·ï¼Œæ›¿æ¢ Homebrew-bottles&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; ~/.zshrc
&lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt; ~/.zshrc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;è¿˜åŸ brew ä¸ºå®˜æ–¹åœ°å€&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Homebrew-bottles&lt;/code&gt;è¿˜åŸï¼Œæ‰“å¼€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.zshrc&lt;/code&gt;æˆ–&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.bash_profile&lt;/code&gt;æ–‡ä»¶ï¼Œåˆ é™¤ä¸Šé¢æ·»åŠ çš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;HOMEBREW_BOTTLE_DOMAIN&lt;/code&gt;è¡Œå³å¯ã€‚&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# é‡ç½® brew.git ä¸ºå®˜æ–¹åœ°å€&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;brew &lt;span class=&quot;nt&quot;&gt;--repo&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
git remote set-url origin https://github.com/Homebrew/brew.git

&lt;span class=&quot;c&quot;&gt;# é‡ç½® homebrew-core.git ä¸ºå®˜æ–¹åœ°å€&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;brew &lt;span class=&quot;nt&quot;&gt;--repo&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Library/Taps/homebrew/homebrew-core&quot;&lt;/span&gt;
git remote set-url origin https://github.com/Homebrew/homebrew-core.git

&lt;span class=&quot;c&quot;&gt;# é‡ç½® homebrew-cask ä¸ºå®˜æ–¹åœ°å€&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;brew &lt;span class=&quot;nt&quot;&gt;--repo&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;/Library/Taps/homebrew/homebrew-cask
git remote set-url origin https://github.com/Homebrew/homebrew-cask
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;pypipip&quot;&gt;pypi(pip)&lt;/h2&gt;

&lt;p&gt;pip æ˜¯ Python åŒ…ç®¡ç†å·¥å…·ï¼Œpip å‘½ä»¤é»˜è®¤ä½¿ç”¨çš„æ˜¯å›½å¤–çš„ pypi é•œåƒï¼ˆpypi.python.orgï¼‰ï¼Œé€Ÿåº¦æ…¢æ˜“æ‰çº¿ï¼Œåˆ‡æ¢ä¸ºå›½å†…é•œåƒæºã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ–¹æ³• 1ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# ä¸´æ—¶ä½¿ç”¨&lt;/span&gt;
pip &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; https://mirrors.ustc.edu.cn/pypi/web/simple package
&lt;span class=&quot;c&quot;&gt;# è®¾ä¸ºé»˜è®¤ï¼Œå‡çº§ pip åˆ°æœ€æ–°çš„ç‰ˆæœ¬ (&amp;gt;=10.0.0) åè¿›è¡Œé…ç½®&lt;/span&gt;
pip &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; https://mirrors.ustc.edu.cn/pypi/web/simple pip &lt;span class=&quot;nt&quot;&gt;-U&lt;/span&gt;
pip config &lt;span class=&quot;nb&quot;&gt;set &lt;/span&gt;global.index-url https://mirrors.ustc.edu.cn/pypi/web/simple
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;æ–¹æ³• 2ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å½“æ–¹æ³• 1 ä¸èµ·ä½œç”¨æ—¶ï¼Œå¯å°è¯•æ­¤æ–¹æ³•ï¼Œåœ¨å½“å‰ç”¨æˆ·æ ¹ç›®å½•ä¸‹&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.pip/pip.conf&lt;/code&gt;ï¼Œå†™å…¥å¦‚ä¸‹é…ç½®ï¼Œæ²¡æœ‰æ–‡ä»¶å¤¹å’Œæ–‡ä»¶åˆ›å»ºå³å¯ã€‚&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;tool.poetry.source]]
name &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;tsinghua&quot;&lt;/span&gt;
url &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;https://pypi.tuna.tsinghua.edu.cn/simple&quot;&lt;/span&gt;
default &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;docker&quot;&gt;Docker&lt;/h2&gt;

&lt;p&gt;å®‰è£…å®Œ Docker CE ä¹‹åï¼Œæ›¿æ¢æ‰å®˜æ–¹çš„ Docker Registry æœåŠ¡ï¼Œå¯åŠ å¿«æ‹‰å– Docker é•œåƒçš„é€Ÿåº¦ï¼Œä¸åŒç³»ç»Ÿçš„æ›´æ¢æ–¹æ³•ä¸ä¸€è‡´ï¼Œå‚è€ƒé•œåƒæºå¸®åŠ©æ–‡æ¡£å³å¯ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ macOS Catalina çš„ Docker ä¸ºä¾‹ï¼Œåœ¨ Preferences -&amp;gt; Docker Engine ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼Œé‡å¯ Dockerï¼š&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s2&quot;&gt;&quot;registry-mirrors&quot;&lt;/span&gt; : &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
   &lt;span class=&quot;s2&quot;&gt;&quot;http://docker.mirrors.ustc.edu.cn&quot;&lt;/span&gt;,
   &lt;span class=&quot;s2&quot;&gt;&quot;http://hub-mirror.c.163.com&quot;&lt;/span&gt;,
   &lt;span class=&quot;s2&quot;&gt;&quot;https://mirror.ccs.tencentyun.com&quot;&lt;/span&gt;,
   &lt;span class=&quot;s2&quot;&gt;&quot;http://registry.docker-cn.com&quot;&lt;/span&gt;
 &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;,
 &lt;span class=&quot;s2&quot;&gt;&quot;insecure-registries&quot;&lt;/span&gt; : &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
   &lt;span class=&quot;s2&quot;&gt;&quot;registry.docker-cn.com&quot;&lt;/span&gt;,
   &lt;span class=&quot;s2&quot;&gt;&quot;docker.mirrors.ustc.edu.cn&quot;&lt;/span&gt;
 &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;,
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;cocoapods&quot;&gt;CocoaPods&lt;/h2&gt;

&lt;p&gt;CocoaPods çš„ trunk ä»“åº“å¤§éƒ¨åˆ†æ—¶å€™å°šå¯ï¼Œå½“é€Ÿåº¦æ…¢æˆ–è€…å¤±è´¥æ—¶ï¼Œå¯å°è¯•å¦‚ä¸‹é…ç½®ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¯¹äºæ—§ç‰ˆçš„ CocoaPods å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ä½¿ç”¨ tuna çš„é•œåƒï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pod repo remove master
pod repo add master https://mirrors.tuna.tsinghua.edu.cn/git/CocoaPods/Specs.git
pod repo update
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;æ–°ç‰ˆçš„ CocoaPods ä¸å…è®¸ç”¨pod repo addç›´æ¥æ·»åŠ masteråº“äº†ï¼Œä½†æ˜¯ä¾ç„¶å¯ä»¥ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; ~/.cocoapods/repos 
pod repo remove master
git clone https://mirrors.tuna.tsinghua.edu.cn/git/CocoaPods/Specs.git master
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;æœ€åè¿›å…¥è‡ªå·±çš„å·¥ç¨‹ï¼Œåœ¨è‡ªå·±å·¥ç¨‹çš„podFileç¬¬ä¸€è¡ŒåŠ ä¸Šï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;https://mirrors.tuna.tsinghua.edu.cn/git/CocoaPods/Specs.git&apos;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;github&quot;&gt;github&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;github åŸŸåæ±¡æŸ“&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;éƒ¨åˆ†ç½‘ç»œå¯èƒ½ç”±äºåŸŸåæ±¡æŸ“ï¼Œgithub å‡ºç°è®¿é—®å¤±è´¥ã€å›¾ç‰‡åŠ è½½ä¸å‡ºæ¥çš„æƒ…å†µï¼Œè¿™æ—¶å€™å¯ä»¥å‚è€ƒä¿®æ”¹ hosts æ–‡ä»¶ï¼Œæ·»åŠ  IPä¸åŸŸåæ˜ å°„ï¼Œé€šè¿‡ç›´æ¥è®¿é—® IP åœ°å€çš„æ–¹å¼æ¥è®¿é—®ï¼Œç»“åˆ&lt;a href=&quot;https://github.com/oldj/SwitchHosts&quot;&gt;switchhosts&lt;/a&gt;ï¼Œå¯ä»¥å®ç°è‡ªåŠ¨ä¿®æ”¹æ›´æ–° hosts æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;github çš„ IP è‡ªåŠ¨æŒ‡å‘å¯å‚è€ƒ&lt;a href=&quot;https://github.com/521xueweihan/GitHub520&quot;&gt;GitHub520&lt;/a&gt;ï¼Œæ­¤æ–¹æ³•æœ‰æ•ˆä½†ä½œç”¨æœ‰é™ï¼Œgithub ç»å¸¸è®¿é—®å¤±è´¥çš„åŒå­¦å¯å°è¯•ä¸€ä¸‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;github ä¸‹è½½é€Ÿåº¦æ…¢&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git clone&lt;/code&gt;è¾ƒå¤§é¡¹ç›®æ—¶ï¼Œé€Ÿåº¦æ…¢ã€æ€»æ˜¯å¤±è´¥çš„æƒ…å†µï¼Œå¯ä½¿ç”¨ VPN åŠ é€Ÿï¼Œæ•ˆæœæ˜æ˜¾ï¼Œæ­¤æ–¹æ³•åªé€‚åˆæœ‰ VPN æˆ–å…¶ä»–å·¥å…·çš„ç”¨æˆ·ã€‚&lt;/p&gt;

&lt;p&gt;ä¾‹å¦‚ VPN çš„ socks5 ç«¯å£æ˜¯ 49526ï¼Œå‚è€ƒä¸‹æ–¹&lt;strong&gt;socks5åè®®&lt;/strong&gt;é…ç½®ï¼š&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# socks5åè®®ï¼Œ49526 ç«¯å£ä¿®æ”¹æˆè‡ªå·±çš„æœ¬åœ°ä»£ç†ç«¯å£&lt;/span&gt;
git config &lt;span class=&quot;nt&quot;&gt;--global&lt;/span&gt; http.https://github.com.proxy socks5://127.0.0.1:49526
git config &lt;span class=&quot;nt&quot;&gt;--global&lt;/span&gt; https.https://github.com.proxy socks5://127.0.0.1:49526

&lt;span class=&quot;c&quot;&gt;# httpåè®®ï¼Œ49527 ç«¯å£ä¿®æ”¹æˆè‡ªå·±çš„æœ¬åœ°ä»£ç†ç«¯å£127.0.0.1:49527&lt;/span&gt;
git config &lt;span class=&quot;nt&quot;&gt;--global&lt;/span&gt; http.proxy http://127.0.0.1:49527
git config &lt;span class=&quot;nt&quot;&gt;--global&lt;/span&gt; https.proxy https://127.0.0.1:49527

&lt;span class=&quot;c&quot;&gt;# httpåè®®ï¼Œ49527 ç«¯å£ä¿®æ”¹æˆè‡ªå·±çš„æœ¬åœ°ä»£ç†ç«¯å£&lt;/span&gt;
git config &lt;span class=&quot;nt&quot;&gt;--global&lt;/span&gt; http.https://github.com.proxy https://127.0.0.1:49527
git config &lt;span class=&quot;nt&quot;&gt;--global&lt;/span&gt; https.https://github.com.proxy https://127.0.0.1:49527

&lt;span class=&quot;c&quot;&gt;# reset ä»£ç†è®¾ç½®&lt;/span&gt;
git config &lt;span class=&quot;nt&quot;&gt;--global&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--unset&lt;/span&gt; http.https://github.com.proxy
git config &lt;span class=&quot;nt&quot;&gt;--global&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--unset&lt;/span&gt; https.https://github.com.proxy
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</description>
        <pubDate>Sat, 08 Aug 2020 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2020/08/%E5%BC%80%E5%8F%91%E8%80%85%E5%BF%AB%E9%80%9F%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E6%8C%87%E5%8D%97/</link>
        <guid isPermaLink="true">http://localhost:4000/2020/08/%E5%BC%80%E5%8F%91%E8%80%85%E5%BF%AB%E9%80%9F%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E6%8C%87%E5%8D%97/</guid>
        
        <category>é•œåƒæº</category>
        
        
      </item>
    
      <item>
        <title>SonarQube è‡ªåŠ¨åŒ–æ‰«æ iOS é¡¹ç›®</title>
        <description>&lt;h2 id=&quot;è‡ªåŠ¨æ‰«ææ¦‚è¿°&quot;&gt;è‡ªåŠ¨æ‰«ææ¦‚è¿°&lt;/h2&gt;

&lt;p&gt;SonarQube æ˜¯ä¸€æ¬¾ç”¨äºä»£ç è´¨é‡ç®¡ç†çš„å¼€æºå·¥å…·ï¼Œå®ƒä¸»è¦ç”¨äºç®¡ç†æºä»£ç çš„è´¨é‡ã€‚SonarQube å…¨è‡ªåŠ¨åŒ–æ‰«æï¼Œä¸»è¦åˆ©ç”¨ Jenkins æ£€æµ‹ Git ä»£ç æ›´æ–°ï¼Œå®šæ—¶æ‹‰å–ä»£ç ï¼Œç„¶åé…åˆ oclint åŠ SonarQube å®ç°è‡ªåŠ¨åŒ–æ‰«æå±•ç¤ºã€‚oclint è´Ÿè´£æ‰«æé¡¹ç›®ï¼ŒSonarQube è´Ÿè´£å°†æ‰«æç»“æœå­˜å‚¨åˆ°æ•°æ®åº“ï¼Œå¹¶æä¾›æ•°æ®å¯è§†åŒ–ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/sonar/sonar_swift.png&quot; alt=&quot;SonarQube&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ä¸»è¦æ­¥éª¤&quot;&gt;ä¸»è¦æ­¥éª¤&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;Jenkins å®šæ—¶æ£€æµ‹ Git åˆ†æ”¯æ›´æ–°ï¼Œå¹¶æ‰§è¡Œè„šæœ¬ï¼ˆåªæœ‰æ­¤æ“ä½œä½¿ç”¨ Jenkinsï¼Œä»¥ä¸‹æ­¥éª¤ä½¿ç”¨è„šæœ¬ï¼‰ï¼›&lt;/li&gt;
  &lt;li&gt;è„šæœ¬æ£€æµ‹æœ¬åœ°æ˜¯å¦å·²å­˜åœ¨é¡¹ç›®ï¼Œä¸å­˜åœ¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git clone&lt;/code&gt;æ‹‰å–ä»£ç ï¼Œå­˜åœ¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git pull&lt;/code&gt;æ‹‰å–æ›´æ–°åˆ°æœ¬åœ°ï¼›&lt;/li&gt;
  &lt;li&gt;æŸ¥æ‰¾å®šä½åç¼€ä¸º&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.xcodeproj&lt;/code&gt;çš„å·¥ç¨‹æ–‡ä»¶ï¼Œä½¿ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xcodebuild -list&lt;/code&gt;è·å– Schemes åˆ—è¡¨ï¼›&lt;/li&gt;
  &lt;li&gt;ä½¿ç”¨ xcodebuild æ¸…ç†å·¥ç¨‹ç¼“å­˜ï¼Œå¹¶ç”Ÿæˆæ–°çš„ç¼–è¯‘æ•°æ®ï¼Œä½¿ç”¨ xcpretty è½¬æˆ json æ ¼å¼ï¼›&lt;/li&gt;
  &lt;li&gt;ä½¿ç”¨ oclint è®¾ç½®ç›¸å…³å¿½ç•¥é¡¹ï¼Œå¹¶å¯¼å‡º oclint.xml æ ¼å¼åˆ†ææŠ¥å‘Šï¼›&lt;/li&gt;
  &lt;li&gt;è„šæœ¬åŠ¨æ€ç”Ÿæˆ sonar-project.properties æ–‡ä»¶ï¼Œå¹¶è°ƒç”¨ sonar-scanner å‚¨å­˜åˆ°æ•°æ®åº“ï¼›&lt;/li&gt;
  &lt;li&gt;å¯¼å‡º ~/.jenkins/jobs/ ç›®å½•ä¸‹çš„ config.xml æ¨¡æ¿æ–‡ä»¶ï¼Œè„šæœ¬æ‰¹é‡åˆ›å»ºæ·»åŠ ä»»åŠ¡ï¼›&lt;/li&gt;
  &lt;li&gt;æ‰‹åŠ¨æˆ– Jenkins è‡ªåŠ¨è§¦å‘æ‰«æï¼Œæœ¬æœºè®¿é—® &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http://localhost:9000&lt;/code&gt; æŸ¥çœ‹ç»“æœã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;å®‰è£…æµç¨‹&quot;&gt;å®‰è£…æµç¨‹&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;å®˜ç½‘ä¸‹è½½ dmg å®‰è£… Java 8ï¼ŒJenkins ä¾èµ– Java 8ï¼Œå¤šç‰ˆæœ¬å¯å…±å­˜ã€‚&lt;/li&gt;
  &lt;li&gt;å®‰è£… Jenkins å’Œç›¸å…³ Git ç»„ä»¶ï¼Œbrew å®‰è£…å¤±è´¥å¯è¿…é›·ä¸‹è½½æ›¿æ¢ï¼Œæ’ä»¶å®‰è£…å¤±è´¥å¯æ¢æºæ¢ç½‘ã€‚&lt;/li&gt;
  &lt;li&gt;brew å®‰è£… postgresqlï¼Œå¹¶åˆ›å»ºæ•°æ®åº“åã€è¡¨åã€ç”¨æˆ·åå’Œå¯†ç ä¸º sonar çš„æ•°æ®åº“ã€‚&lt;/li&gt;
  &lt;li&gt;ä¸‹è½½ sonarqube å®ç°å¯è§†åŒ–ï¼Œæ”¾åœ¨ /opt æˆ–å…¶ä»–ç›®å½•ä¸‹ï¼Œé…ç½® sonar.properties æ–‡ä»¶ã€‚&lt;/li&gt;
  &lt;li&gt;ä¸‹è½½ sonar-swift ä¸‰æ–¹æ’ä»¶ï¼Œå°†æ’ä»¶æ”¾åœ¨ sonarqube çš„ plugins ç›®å½•ä¸‹ã€‚&lt;/li&gt;
  &lt;li&gt;å®‰è£… sonar-scanner å¹¶é…ç½® sonar-scanner.properties æ–‡ä»¶çš„ URL å’Œç¼–ç ã€‚&lt;/li&gt;
  &lt;li&gt;é…ç½® Jenkins çš„ jobs ä»»åŠ¡å’Œ shell è¿è¡Œã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;java-å®‰è£…&quot;&gt;Java å®‰è£…&lt;/h2&gt;

&lt;p&gt;è®¿é—® &lt;a href=&quot;https://www.oracle.com/technetwork/java/javase/downloads/index.html&quot;&gt;Javaå®˜ç½‘&lt;/a&gt;ï¼Œå¹¶ä¸‹è½½ Java 8 ç‰ˆæœ¬çš„ dmg å®‰è£…åŒ…ï¼ŒåŒå‡»å®‰è£…å³å¯ã€‚æ³¨æ„ï¼Œä¸è¦ä»…å®‰è£…æœ€æ–°ç‰ˆæœ¬ JDKï¼ŒJenkins è¦æ±‚ Java 8ï¼Œå¦‚æœéœ€è¦å¯ä»¥åŒæ—¶å®‰è£…å¤šç‰ˆæœ¬ Javaã€‚&lt;/p&gt;

&lt;p&gt;è‹¥éœ€è¦å®Œå…¨åˆ é™¤æ—§çš„ Java ç‰ˆæœ¬ï¼Œå¯æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å’Œæ“ä½œã€‚&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-fr&lt;/span&gt; /Library/Internet&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;Plug-Ins/JavaAppletPlugin.plugin
&lt;span class=&quot;nb&quot;&gt;sudo rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-fr&lt;/span&gt; /Library/PreferencePanes/JavaControlPanel.prefPane
&lt;span class=&quot;nb&quot;&gt;sudo rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-fr&lt;/span&gt; ~/Library/Application&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;Support/Oracle/Java
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¹¶åœ¨ /Library/Java/JavaVirtualMachines/ ç›®å½•ä¸‹åˆ é™¤å¯¹åº” Java ç‰ˆæœ¬ç¼“å­˜ã€‚&lt;/p&gt;

&lt;h2 id=&quot;jenkins-å®‰è£…&quot;&gt;Jenkins å®‰è£…&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;ç½‘ç»œä¸Šå®‰è£…æ•™ç¨‹å¾ˆå¤šï¼Œä¸å†è¯¦ç»†èµ˜è¿°ï¼Œä»…è¯´æ˜ç®€è¦æ­¥éª¤ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;ä½¿ç”¨ brew å®‰è£…ç®€å•ï¼Œæ‰§è¡Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;brew install jenkins&lt;/code&gt;å®‰è£…ï¼Œç»ˆç«¯æ‰§è¡Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jenkins&lt;/code&gt; å¯åŠ¨ï¼›&lt;/li&gt;
  &lt;li&gt;å¯åŠ¨å®Œæˆï¼Œæµè§ˆå™¨è¾“å…¥&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;localhost:8080&lt;/code&gt;æµè§ˆï¼Œè¿›å…¥ Jenkins ç®¡ç†ç½‘é¡µï¼›&lt;/li&gt;
  &lt;li&gt;é¦–æ¬¡ä¼šæç¤ºè¾“å…¥åˆå§‹å¯†ç ï¼Œè‹¥æ— æç¤ºå¯åœ¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.jenkins/secrets/initialAdminPassword&lt;/code&gt;è·¯å¾„æ‰¾åˆ°ï¼›&lt;/li&gt;
  &lt;li&gt;æ ¹æ®æç¤ºè¾“å…¥åˆå§‹å¯†ç ï¼Œå¹¶åˆ›å»ºç”¨æˆ·åå’Œå¯†ç ï¼Œä¾‹å¦‚é€‰æ‹©è´¦æˆ·åå’Œå¯†ç éƒ½æ˜¯ sonarï¼›&lt;/li&gt;
  &lt;li&gt;åœ¨ Jenkins ç³»ç»Ÿè®¾ç½®-æ’ä»¶ç®¡ç†ä¸­ï¼Œé€‰æ‹© Git å’Œ Xcode ç­‰ç›¸å…³æ’ä»¶ï¼›&lt;/li&gt;
  &lt;li&gt;é€‰æ‹© æ–°å»º-è‡ªç”±é£æ ¼é¡¹ç›®ï¼ŒæŒ‰ç…§æç¤ºé…ç½® Git å’Œ Shell è„šæœ¬å³å¯ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ brew å®‰è£… Jenkins å¤±è´¥ï¼Œå¯æ‰‹åŠ¨å®‰è£…ï¼Œè¿…é›·ä¸‹è½½ï¼Œæ‰‹åŠ¨å¤åˆ¶åˆ°æŒ‡å®šç›®å½•ä¸‹ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;brew install xxxx å¤±è´¥æ—¶è¿”å›å¯¹åº” xxxx.tar.gz çš„é“¾æ¥ï¼Œè¿…é›·ä¸‹è½½ï¼›&lt;/li&gt;
  &lt;li&gt;brew â€“cache æŸ¥çœ‹ç¼“å­˜(/Users/lif/Library/Caches/Homebrew);&lt;/li&gt;
  &lt;li&gt;ç‚¹å‡»ä»»æ„é“¾æ¥ï¼Œæ˜¾ç¤ºåŸèº«æ‰¾åˆ°ä¸‹è½½ç›®å½•&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/Library/Caches/Homebrew/downloads/&lt;/code&gt;;&lt;/li&gt;
  &lt;li&gt;å°†ä¸‹è½½çš„ xxxx.tar.gz æ‹·è´åˆ°ä¸‹è½½ç›®å½•ï¼Œåç§°å‘½åä¸ºå’Œ .tar.gz.incomplete åŒæ ·åç§°ï¼Œå»æ‰ .incomplete;&lt;/li&gt;
  &lt;li&gt;å†æ¬¡å®‰è£… brew install xxxxã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;Jenkins å¦‚æœå®‰è£…æ’ä»¶å¤±è´¥ï¼Œå¯ä»¥æ›´æ¢å®‰è£…æºã€æ‰‹åŠ¨ä¸Šä¼ ã€ç§‘å­¦è®¿é—®å¤–ç½‘ï¼Œæ›´æ¢ç½‘ç»œã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;æ›´æ¢å®‰è£…æºè·¯å¾„åœ¨ Jenkins çš„ç®¡ç†ç½‘é¡µä¸­ï¼Œç³»ç»Ÿè®¾ç½®-æ’ä»¶ç®¡ç†-é«˜çº§-ä¿®æ”¹å‡çº§ç«™ç‚¹ã€‚
eg.å®‰è£…æºï¼šhttp://mirror.esuni.jp/jenkins/updates/update-center.json&lt;/li&gt;
  &lt;li&gt;å®˜ç½‘ä¸‹è½½åç¼€ .hpi æ’ä»¶æ–‡ä»¶ï¼Œåœ¨ç³»ç»Ÿè®¾ç½®-æ’ä»¶ç®¡ç†-é«˜çº§-ä¸Šä¼ æ’ä»¶ï¼Œé€‰æ‹©ä¸‹è½½çš„æ’ä»¶ä¸Šä¼ ã€‚
eg.Jenkins æ’ä»¶å®˜ç½‘ï¼šhttps://plugins.jenkins.io/&lt;/li&gt;
  &lt;li&gt;ç§‘å­¦è®¿é—®å¤–ç½‘ï¼Œå¯ä»¥é€‰æ‹©ç§‘å­¦è®¿é—®å¤–ç½‘ä¸‹è½½ã€‚&lt;/li&gt;
  &lt;li&gt;ä¸‹è½½å¤±è´¥ä¹Ÿå¯èƒ½æ˜¯è¿æ¥ç½‘ç»œçš„é—®é¢˜ï¼Œæˆ‘ä½¿ç”¨å…¬å¸ç½‘ç»œæ— è®ºå¦‚ä½•éƒ½æ˜¯å¤±è´¥ï¼Œä½¿ç”¨æ‰‹æœºåˆ†äº« WiFi ä¸‹è½½æˆåŠŸã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;Jenkins å¯åŠ¨åœæ­¢&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# å¯åŠ¨ jenkinsï¼ŒCtrl + C å¼ºåˆ¶ç»ˆæ­¢&lt;/span&gt;
jenkins
&lt;span class=&quot;c&quot;&gt;# brew å¯åŠ¨ jenkins æœåŠ¡çš„æ–¹å¼ï¼ˆæ³¨æ„æ­¤æ“ä½œå¯èƒ½ä¼šå¯¼è‡´æ‰§è¡Œ Shell å­˜åœ¨ç”¨æˆ·æƒé™é—®é¢˜ï¼‰&lt;/span&gt;
brew services restart jenkins
&lt;span class=&quot;c&quot;&gt;# brew åœæ­¢ jenkins æœåŠ¡çš„æ–¹å¼&lt;/span&gt;
brew services stop jenkins
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;æ³¨æ„ï¼šä½¿ç”¨æ­¤æ–¹å¼å¯åŠ¨å¯èƒ½å¯¼è‡´æ‰§è¡Œ Shell è„šæœ¬å¤±è´¥ï¼Œè‹¥å¤±è´¥å¯ä»¥åœ¨ç»ˆç«¯ä½¿ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jenkins&lt;/code&gt;å‘½ä»¤å¯åŠ¨ã€‚&lt;/p&gt;

&lt;p&gt;ç½‘é¡µå¯åŠ¨/åœæ­¢/é‡å¯æœåŠ¡ï¼š&lt;/p&gt;

&lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:/&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;localhost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8080&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;exit&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;åœæ­¢æœåŠ¡&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:/&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;localhost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8080&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;restart&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;é‡å¯æœåŠ¡&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:/&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;localhost&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8080&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reload&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;é‡æ–°è½½å…¥æœåŠ¡&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;postgresql&quot;&gt;postgresql&lt;/h2&gt;

&lt;p&gt;sonarqube é»˜è®¤æ•°æ®åº“ä¸º h2ï¼Œç”¨äºæµ‹è¯•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ sonarqube çš„å®‰è£…ç›®å½• conf/sonar.properties æ–‡ä»¶ä¸­æ‰¾åˆ°æ”¯æŒçš„æ•°æ®åº“çš„è¯´æ˜ï¼Œpostgresql å°±æ˜¯æ”¯æŒçš„ä¸€ç§ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;The embedded H2 database is used by default. It is recommended for tests but not for production use. Supported databases are Oracle, PostgreSQL and Microsoft SQLServer.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# å®‰è£…&lt;/span&gt;
brew &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;postgresql
&lt;span class=&quot;c&quot;&gt;# åˆå§‹åŒ–ï¼Œå¯çœç•¥&lt;/span&gt;
initdb /usr/local/var/postgres
&lt;span class=&quot;c&quot;&gt;# å¯åŠ¨æœåŠ¡&lt;/span&gt;
pg_ctl &lt;span class=&quot;nt&quot;&gt;-D&lt;/span&gt; /usr/local/var/postgres &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; /usr/local/var/postgres/server.log start
&lt;span class=&quot;c&quot;&gt;# è®¾ç½®å¼€æœºå¯åŠ¨ï¼ˆæ­¤æ“ä½œä¹Ÿå¯èƒ½ä¼šå¯¼è‡´ç”¨æˆ·æƒé™é—®é¢˜ï¼Œå¯¼è‡´ sonarqube å¯åŠ¨å¤±è´¥ï¼‰&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;ln&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-sfv&lt;/span&gt; /usr/local/opt/postgresql/&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.plist ~/Library/LaunchAgents
launchctl load ~/Library/LaunchAgents/homebrew.mxcl.postgresql.plist
&lt;span class=&quot;c&quot;&gt;# ç»™å½“å‰ç”¨æˆ·åˆ›å»ºæ•°æ®åº“ï¼Œpostgres ä¸ä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®åº“ï¼Œéœ€æ‰‹åŠ¨åˆ›å»º&lt;/span&gt;
createdb
&lt;span class=&quot;c&quot;&gt;# åˆ›å»ºç”¨æˆ·&lt;/span&gt;
CREATE USER sonar WITH PASSWORD &lt;span class=&quot;s1&quot;&gt;&apos;sonar&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# åˆ›å»ºæ•°æ®åº“&lt;/span&gt;
CREATE DATABASE sonar WITH OWNER sonar ENCODING &lt;span class=&quot;s1&quot;&gt;&apos;UTF8&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# ç»™ sonar ç”¨æˆ·æ·»åŠ åˆ›å»ºæ•°æ®åº“çš„å±æ€§&lt;/span&gt;
ALTER ROLE sonar CREATEDB&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# æµ‹è¯•å½“å‰ç”¨æˆ·&lt;/span&gt;
psql &lt;span class=&quot;nt&quot;&gt;-U&lt;/span&gt; sonar &lt;span class=&quot;nt&quot;&gt;-W&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# ç™»å½•æ§åˆ¶å°&lt;/span&gt;
psql
&lt;span class=&quot;c&quot;&gt;# åˆ é™¤æ•°æ®åº“ï¼ˆå¤‡ç”¨ï¼‰&lt;/span&gt;
DROP DATABASE sonar&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# æ‰€æœ‰æƒåŠæ‰€æœ‰æƒè½¬æ¢ï¼ˆå¤‡ç”¨ï¼‰&lt;/span&gt;
CREATE DATABASE sonar OWNER sonar&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
GRANT ALL PRIVILEGES ON DATABASE sonar to sonar&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;sonarqube&quot;&gt;sonarqube&lt;/h2&gt;

&lt;p&gt;ä¸‹è½½ &lt;a href=&quot;https://www.sonarqube.org/downloads/&quot;&gt;sonarqube&lt;/a&gt; æºç åˆ°æŒ‡å®šç›®å½•ï¼Œä¾‹å¦‚å¯æ”¾åœ¨ /opt æˆ–å…¶ä»–ç›®å½•ä¸‹ï¼Œåˆå§‹è´¦å·å¯†ç  adminã€‚é…ç½® conf/sonar.properties æ–‡ä»¶ä¸­çš„æ•°æ®åº“è´¦å·ã€å¯†ç å’Œ URLã€‚&lt;/p&gt;

&lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;sonar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;jdbc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sonar&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;sonar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;jdbc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sonar&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;sonar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;jdbc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;jdbc&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:postgresql:/&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;localhost&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sonar&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¯åŠ¨æ–¹å¼ä¸ºæ‰§è¡Œå®‰è£…ç›®å½•ä¸‹å¯¹åº”ç³»ç»Ÿçš„ shell æ–‡ä»¶ï¼Œä¾‹å¦‚æˆ‘çš„ç”µè„‘ä¸º Macï¼Œsonarqube æ”¾åœ¨ /opt ç›®å½•ä¸‹ï¼Œå¯ä»¥æ‰§è¡Œ bin ç›®å½•ä¸‹çš„ macosx-universal-64/sonar.sh è„šæœ¬å¯åŠ¨ã€‚æ³¨æ„ /opt ä¸º Mac ç³»ç»Ÿéšè—æ ¹ç›®å½•ï¼ŒåŒæ—¶æŒ‰ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;command shift = .&lt;/code&gt; å››ä¸ªæŒ‰é”®å¯ä»¥æ˜¾ç¤ºç³»ç»Ÿéšè—æ–‡ä»¶ï¼Œå†æŒ‰ä¸€æ¬¡éšè—ç³»ç»Ÿéšè—æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# å¯åŠ¨ sonarqube&lt;/span&gt;
sh /opt/sonarqube/bin/macosx-universal-64/sonar.sh start
&lt;span class=&quot;c&quot;&gt;# å¦‚æœæ‰§è¡Œ shell å­˜åœ¨æƒé™é—®é¢˜ï¼Œå¯ä½¿ç”¨ chmod 777 è·å–å¯¹åº”æ–‡ä»¶æˆ–ç›®å½•ç³»ç»Ÿæƒé™&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;chmod &lt;/span&gt;777 /opt/sonarqube/bin/macosx-universal-64/sonar.sh
&lt;span class=&quot;c&quot;&gt;# è·å–ç›®å½• /opt ç³»ç»Ÿæƒé™&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sudo chmod&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; 777 /opt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;å®‰è£…-sonar-swift-æ’ä»¶&quot;&gt;å®‰è£… sonar-swift æ’ä»¶&lt;/h2&gt;

&lt;p&gt;ç”±äº sonarqube çš„ ObjectiveC æ’ä»¶æ”¶è´¹ï¼Œä½¿ç”¨ä¸‰æ–¹æ’ä»¶&lt;a href=&quot;https://github.com/Backelite/sonar-swift&quot;&gt;sonar-swift&lt;/a&gt;ï¼Œå¹¶æŒ‰ç…§å®˜æ–¹æ–‡æ¡£å®‰è£…ç›¸å…³æ’ä»¶ï¼Œå°†ä¸‹è½½çš„ .jar åŒ…æ”¾åœ¨ sonarqubeçš„ extensions/plugins ç›®å½•ä¸‹ã€‚æ—§ç‰ˆæ’ä»¶ sonar-objective-c å·²ä¸æ”¯æŒæœ€æ–°ç‰ˆ sonarqubeï¼Œè€Œ sonar-swift åŒæ—¶æ”¯æŒ swift å’Œ objective-cã€‚&lt;/p&gt;

&lt;p&gt;sonar-swift è¦æ±‚å®‰è£…çš„æ’ä»¶è¾ƒå¤šï¼Œå¯ä»¥é€‰æ‹©å®‰è£… sonar-scannerï¼Œoclint å’Œ xcprettyã€‚&lt;/p&gt;

&lt;div class=&quot;language-rb highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;brew&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;swiftlint&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;brew&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tailor&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;brew&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sonar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scanner&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# å®‰è£… oclint&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;brew&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tap&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;oclint&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;formulae&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;brew&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;oclint&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# æ›´æ–° oclint&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;brew&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;update&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;brew&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;upgrade&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;oclint&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xcpretty&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;slather&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pip&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lizard&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;sonar-scanner å®‰è£…å®Œæˆåéœ€è¦é…ç½®ä¸€ä¸‹ï¼Œç»ˆç«¯è¾“å…¥&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;where sonar-scanner&lt;/code&gt;ï¼Œæ‰¾åˆ°å®‰è£…è·¯å¾„ï¼ˆ/usr/local/Cellar/sonar-scanner/ï¼‰ï¼Œåœ¨ç›®å½•ä¸‹æ‰¾åˆ°é…ç½®æ–‡ä»¶ sonar-scanner.propertiesï¼Œé…ç½®æ‰«æç»“æœä¸Šä¼ åœ°å€å’Œç¼–ç ã€‚&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# sonar-scanner æ‰«æç»“æœä¸Šä¼ åœ°å€ï¼ˆsonarqube åœ°å€ä¸º http://localhost:9000ï¼‰&lt;/span&gt;
sonar.host.url&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://localhost:9000
&lt;span class=&quot;c&quot;&gt;# ç¼–ç æ ¼å¼&lt;/span&gt;
sonar.sourceEncoding&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;UTF-8
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;å¯åŠ¨æ‰«æ&quot;&gt;å¯åŠ¨æ‰«æ&lt;/h2&gt;

&lt;p&gt;æ‰€æœ‰æ’ä»¶å·²å®‰è£…å®Œæ¯•ï¼Œå¯ä»¥æ‰§è¡Œ sonar-scan è¿›è¡Œ&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# å¯åŠ¨postgresæœåŠ¡&lt;/span&gt;
pg_ctl &lt;span class=&quot;nt&quot;&gt;-D&lt;/span&gt; /usr/local/var/postgres &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; /usr/local/var/postgres/server.log start
&lt;span class=&quot;c&quot;&gt;# å¯åŠ¨ Jenkins&lt;/span&gt;
brew services start jenkins
&lt;span class=&quot;c&quot;&gt;# å¯åŠ¨ sonar&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;chmod &lt;/span&gt;777 /opt/sonarqube/bin/macosx-universal-64/sonar.sh
sh /opt/sonarqube/bin/macosx-universal-64/sonar.sh start
&lt;span class=&quot;c&quot;&gt;# Jenkins æ‰§è¡Œçš„è„šæœ¬ï¼Œè‡ªåŠ¨æ‹‰å–åˆ†æ”¯ä»£ç ï¼Œåˆ†æï¼Œä¸Šä¼  sonarï¼Œä¼ å…¥æœ¬åœ°ä»“åº“åœ°å€å’Œ Git åœ°å€å³å¯&lt;/span&gt;
/usr/bin/python /Users/lf/Documents/auto-scanner/auto-sonar.py publicplugingoup/gbcheckup.git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åŸç†å¾ˆç®€å•ï¼Œåˆ›å»ºä¸€ä¸ª jenkins ä»»åŠ¡ï¼Œå®šæ—¶æ£€æŸ¥æ›´æ–°ï¼Œå¦‚æœæœ‰æ›´æ–°ï¼Œå°±æ‰§è¡Œè„šæœ¬å»æ‹‰å–ä»£ç ï¼Œå¹¶æ‰«æä¸Šä¼ ç»“æœã€‚
ä¾‹å¦‚éœ€è¦å°†æ‰€æœ‰åˆ†æ”¯ä¿å­˜åˆ°å½“å‰ç”¨æˆ·æ¡Œé¢çš„ Git æ–‡ä»¶å¤¹ä¸‹ï¼Œé‚£ä»“åº“è·¯å¾„å°±æ˜¯&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/Desktop/Git&lt;/code&gt;ï¼Œåˆ†æ”¯çš„ Git åœ°å€ä¸º http://192.168.1.88/app/mybranch.gitï¼Œå¯æ‰‹åŠ¨æ‰§è¡Œè„šæœ¬ä¸‹è½½æ‰«æã€‚&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/usr/bin/python /Users/lf/Documents/auto-scanner/auto-sonar.py publicplugingoup/gbcheckup.git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;è‡ªåŠ¨åŒ–æ‰«æ&quot;&gt;è‡ªåŠ¨åŒ–æ‰«æ&lt;/h4&gt;

&lt;p&gt;å®Œæˆä¸Šé¢æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨æ‰§è¡Œä¸ºæ¯ä¸ªä»“åº“è¿›è¡Œæ‰«æï¼Œé‚£å¦‚ä½•åšåˆ°å¦‚ä¸‹è‡ªåŠ¨åŒ–è¦æ±‚ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;æ‰¹é‡ä¸ºæ¯ä¸ªç»„ä»¶åˆ›å»º Jenkins ä»»åŠ¡ï¼Œå¹¶å®šæ—¶æ£€æµ‹ Git æ›´æ–°ï¼Œè‹¥æ›´æ–°åˆ™è‡ªåŠ¨æ‰«æï¼›&lt;/li&gt;
  &lt;li&gt;ä½¿ç”¨è„šæœ¬è‡ªåŠ¨ä» Git æ‹‰å–ç»„ä»¶æºç ï¼Œè‹¥å·²æ‹‰å–åˆ™æ£€æŸ¥æ›´æ–°ç»„ä»¶ä»£ç ï¼›&lt;/li&gt;
  &lt;li&gt;è‡ªåŠ¨æŸ¥æ‰¾å®šä½é¡¹ç›® project æ–‡ä»¶åŠé¡¹ç›® schemeï¼Œè‡ªåŠ¨è¿›è¡Œé€ä¸ªæ‰«æï¼›&lt;/li&gt;
  &lt;li&gt;è‡ªåŠ¨åˆ›å»º Sonar é…ç½®æ–‡ä»¶ï¼Œæ‰«æç»“æœè‡ªåŠ¨å‚¨å­˜åˆ°æ•°æ®åº“ï¼Œé€šè¿‡ç½‘é¡µæŸ¥çœ‹ç»“æœã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æ‰¹é‡åˆ›å»º Jenkins ä»»åŠ¡ï¼Œæˆ‘ä»¬é€šè¿‡è„šæœ¬ä¸€æ¬¡æ€§æ‰¹é‡åˆ›å»ºå³å¯ï¼›æ£€æµ‹æ›´æ–°æˆ‘ä»¬å¯ä»¥é€šè¿‡ Jenkins å®šæ—¶ä»»åŠ¡å»æ‰§è¡Œï¼›è‡ªåŠ¨æ‹‰å–æœ€æ–°ä»£ç å’ŒæŸ¥æ‰¾ scheme è¿›è¡Œæ‰«æï¼Œæˆ‘ä»¬åœ¨å®šæ—¶ä»»åŠ¡çš„è„šæœ¬ä¸­æ‰§è¡Œå³å¯ã€‚&lt;/p&gt;

&lt;h2 id=&quot;jenkins-æ‰¹é‡åˆ›å»ºä»»åŠ¡&quot;&gt;Jenkins æ‰¹é‡åˆ›å»ºä»»åŠ¡&lt;/h2&gt;

&lt;p&gt;è‹¥ç»„ä»¶å¾ˆå¤šï¼Œé€ä¸ªæ‰‹åŠ¨åˆ›å»º Jenkins ä»»åŠ¡ï¼Œæ˜¾ç„¶ä¸ç¬¦åˆç¨‹åºå‘˜çš„é£æ ¼ï¼Œæˆ‘ä»¬éœ€è¦æ‰¹é‡è‡ªåŠ¨åˆ›å»ºã€‚å‡è®¾æˆ‘ä»¬çš„ç»„ä»¶ Git åœ°å€éƒ½æ˜¯è¿™æ ·çš„&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;http://192.168.1.44/publicrepos/demo1.git
http://192.168.1.44/publicrepos/demo2.git
http://192.168.1.44/publicrepos/demo3.git
http://192.168.1.44/publicrepos/demo3.git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æˆ‘ä»¬ä¸ºåˆ†æ”¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http://192.168.1.44/publicrepos/demo1.git&lt;/code&gt; åˆ›å»ºä¸€ä¸ª Jenkins çš„ä»»åŠ¡ï¼Œè¿™æ—¶æˆ‘ä»¬ä¼šå‘ç° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.jenkins/jobs/&lt;/code&gt; ç›®å½•ä¸‹å¤šäº† demo1 æ–‡ä»¶å¤¹ï¼Œé‡Œé¢ config.xml æ–‡ä»¶ï¼Œè¿™å°±æ˜¯ Jenkins ä»»åŠ¡çš„é…ç½®ã€‚&lt;/p&gt;

&lt;p&gt;é€šè¿‡å¯¹æ¯”æˆ‘ä»¬å‘ç°ï¼Œåªè¦ä¿®æ”¹ä¸€ä¸‹ Git åœ°å€å’Œä¼ å…¥è„šæœ¬çš„åˆ†æ”¯åç§°å°±å¯ä»¥äº†ã€‚æˆ‘ä»¬å¯ä»¥ä¸ºæ¯ä¸€ä¸ªç»„ä»¶å¤åˆ¶ä¸€ä»½ xml æ–‡æ¡£ï¼Œå¹¶ä¿®æ”¹ Git åœ°å€å’Œä¼ å…¥è„šæœ¬çš„å‚æ•°ï¼Œå¤åˆ¶åˆ° Mac ç«¯ Jenkins çš„ä»»åŠ¡ jobs è·¯å¾„ ~/.jenkins/jobs/ ä¸‹æ—¢å¯ã€‚&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?xml version=&apos;1.1&apos; encoding=&apos;UTF-8&apos;?&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;project&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;c&quot;&gt;&amp;lt;!-- ......... çœç•¥éƒ¨åˆ† ........ --&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;scm&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;hudson.plugins.git.GitSCM&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;plugin=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;git@4.0.0&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;configVersion&amp;gt;&lt;/span&gt;2&lt;span class=&quot;nt&quot;&gt;&amp;lt;/configVersion&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;userRemoteConfigs&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;hudson.plugins.git.UserRemoteConfig&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;&amp;lt;!-- ç»„ä»¶çš„ Git åœ°å€ --&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;url&amp;gt;&lt;/span&gt;http://192.168.1.44/publicrepos/demo1.git&lt;span class=&quot;nt&quot;&gt;&amp;lt;/url&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;credentialsId&amp;gt;&lt;/span&gt;31be0ffe-2c75-4183-9ab9-fd997a0942ea&lt;span class=&quot;nt&quot;&gt;&amp;lt;/credentialsId&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;/hudson.plugins.git.UserRemoteConfig&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/userRemoteConfigs&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/scm&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;builders&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;hudson.tasks.Shell&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;c&quot;&gt;&amp;lt;!-- æˆ‘ä»¬é…ç½®çš„æ‰§è¡Œ Shell è„šæœ¬å‘½ä»¤ --&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;command&amp;gt;&lt;/span&gt;/usr/bin/python /Users/pk/Documents/auto-scanner/auto-sonar.py publicplugingoup/basemapcomponent.git&lt;span class=&quot;nt&quot;&gt;&amp;lt;/command&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/hudson.tasks.Shell&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/builders&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æ‰¹é‡ä¸ºæ¯ä¸ªç»„ä»¶åˆ›å»º Jenkins ä»»åŠ¡è„šæœ¬&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;#!/usr/bin/env python
# coding=UTF-8
&lt;/span&gt;
&lt;span class=&quot;sh&quot;&gt;&apos;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;
g_old_branch åˆ›å»ºçš„æ¨¡æ¿æ–‡ä»¶ config.xml ä¸­éœ€è¦æ›¿æ¢çš„åˆ†æ”¯åç§°
g_old_time åˆ›å»ºçš„æ¨¡æ¿æ–‡ä»¶ config.xml ä¸­éœ€è¦æ›¿æ¢çš„è§¦å‘æ—¶é—´
git_links.txt ç»„ä»¶çš„ Git åœ°å€ï¼Œé€è¡Œåˆ†å¼€
config.xml æ‰‹åŠ¨åˆ›å»ºçš„ä¸€ä¸ª Jenkins ä»»åŠ¡å½“åšæ¨¡æ¿
æ‰¹é‡åˆ›å»ºå®Œæˆç»“æœåœ¨å½“å‰è„šæœ¬çš„ xmls æ–‡ä»¶å¤¹ä¸‹
&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&apos;&apos;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;g_old_branch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;publicplugingoup/basemapcomponent&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;g_old_time&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;H(0-29)/19 * * * *&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# ä»URLè·å–åˆ†æ”¯åç§°ï¼Œeg. [publicplugingoup, basemapcomponent]
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get_branch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;link&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;link_list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;link&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;link_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;branch_name_git&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;link_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;branch_group&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;link_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;branch_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch_name_git&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;branch_group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# é€è¡Œè¯»å–æ–‡ä»¶ä¸­çš„é“¾æ¥
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;read_txt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;txt_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;links_list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# å‚¨å­˜è¡Œ
&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;txt_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;strip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;links_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;links_list&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# æ ¹æ®å½“å‰ç´¢å¼•é¡ºåºç®—å‡ºä¸‹ä¸€ä¸ªæ—¶é—´ï¼Œç´¢å¼•ã€æ—¶é—´æ­¥é•¿ã€èµ·å§‹å°æ—¶ï¼Œèµ·å§‹åˆ†é’Ÿ
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get_scm_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;step&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;start_hour&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;start_minute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;next_hour&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;start_hour&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;start_minute&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;step&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1440&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# å°æ—¶
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;begin_minute&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;step&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;60&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;next_minute&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;begin_minute&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;step&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next_minute&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;59&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;begin_minute&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;next_minute&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;step&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;next_time&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;H(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;begin_minute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next_minute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;) &lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next_hour&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; * * *&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next_time&lt;/span&gt;

 &lt;span class=&quot;c1&quot;&gt;# åˆ›å»º config.xml æ–‡ä»¶ï¼Œä¼ å…¥é“¾æ¥åˆ—è¡¨ï¼Œåˆ›å»ºæ–‡ä»¶çš„ä¿å­˜è·¯å¾„, config.xml æ–‡ä»¶è·¯å¾„
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;create_xml&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;links_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xmls_folder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;config_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;config_lines&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# å‚¨å­˜è¡Œ
&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config_lines&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# éå†é“¾æ¥åˆ—è¡¨
&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;link&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;enumerate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;links_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;branch_group_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get_branch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;link&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;branch_group_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;é“¾æ¥æ— æ•ˆï¼š&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;link&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;continue&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;branch_group&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch_group_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# åˆ†ç»„å
&lt;/span&gt;        &lt;span class=&quot;n&quot;&gt;branch_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch_group_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# åˆ†æ”¯åç§°
&lt;/span&gt;        &lt;span class=&quot;c1&quot;&gt;# åˆ›å»ºæ–‡ä»¶ä¿å­˜åˆ°ä»¥åˆ†æ”¯åå‘½åçš„æ–‡ä»¶å¤¹ä¸­
&lt;/span&gt;        &lt;span class=&quot;n&quot;&gt;branch_folder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xmls_folder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch_name&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;exists&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;branch_folder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;mkdir &lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch_folder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;rm -rf &lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch_folder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config_xml_path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch_folder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/config.xml&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# è·å–ä¸‹ä¸€ä¸ªè¿è¡Œçš„æ—¶é—´, æ—¶é—´ä»0ç‚¹0åˆ†å¼€å§‹ï¼Œæ¯10åˆ†é’Ÿè¿è¡Œä¸€ä¸ªç»„ä»¶
&lt;/span&gt;        &lt;span class=&quot;n&quot;&gt;new_time&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get_scm_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;config_copy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cg_line&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;config_lines&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;temp_line&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cg_line&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g_old_branch&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp_line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;temp_line&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp_line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;g_old_branch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch_group&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;branch_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g_old_time&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp_line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;temp_line&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp_line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;g_old_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;new_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;config_copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;temp_line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;xml_str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config_copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config_xml_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;w+&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xml_str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;å·²åˆ›å»º&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;ï¼š&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch_group&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;new_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# main
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__name__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;__main__&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;xmls_folder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;dirname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;abspath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__file__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/xmls&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;exists&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xmls_folder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;rm -rf &lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xmls_folder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;mkdir &lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xmls_folder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;links_path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;dirname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;abspath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__file__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/git_links.txt&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;links_list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;read_txt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;links_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;config_path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;dirname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;abspath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__file__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/config.xml&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;create_xml&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;links_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xmls_folder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;config_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;æŸ¥æ‰¾-xcodeproj-å’Œ-scheme-è„šæœ¬&quot;&gt;æŸ¥æ‰¾ xcodeproj å’Œ Scheme è„šæœ¬&lt;/h2&gt;

&lt;p&gt;å®šæ—¶æ£€æµ‹ Git æ›´æ–°ï¼Œä½¿ç”¨è„šæœ¬è‡ªåŠ¨ä» Git æ‹‰å–ç»„ä»¶æºç ï¼›è‡ªåŠ¨æŸ¥æ‰¾å®šä½é¡¹ç›® project æ–‡ä»¶åŠé¡¹ç›® schemeï¼Œè‡ªåŠ¨è¿›è¡Œé€ä¸ªæ‰«æã€‚&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;#!/usr/bin/env python
# coding=UTF-8
&lt;/span&gt;
&lt;span class=&quot;sh&quot;&gt;&apos;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;
g_repos_folder ä¸‹æ‹‰ä»£ç ï¼Œå­˜æ”¾ç»„ä»¶ä»£ç çš„è·¯å¾„
&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&apos;&apos;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;g_repos_folder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/Desktop/GitJH&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;platform&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# æ‰¾åˆ° xcodeproj å·¥ç¨‹æ–‡ä»¶
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;find_project&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;branch_dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;proj_path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;home&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dirs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;files&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;walk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;branch_dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp_dir&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dirs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;name_array&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;splitext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;temp_dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name_array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;continue&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;file_suffix&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name_array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# è·å–åç¼€
&lt;/span&gt;            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file_suffix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;lower&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;.xcodeproj&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;proj_path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;home&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp_dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;proj_path&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# è·å–æ‰€æœ‰scheme
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get_schemes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;proj_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;proj_folder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;dirname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;proj_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;xcodebuild_list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;popen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;cd &lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;proj_folder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; &amp;amp;&amp;amp; xcodebuild -list&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;scheme_list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;sch_flag&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# æ ‡è®°æ‰¾åˆ°Scheme
&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xcodebuild_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;temp_line&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;strip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Schemes:&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp_line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;sch_flag&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;continue&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sch_flag&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp_line&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&quot;&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp_line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;lower&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;endswith&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;bundle&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; &lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp_line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;scheme_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;temp_line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temp_line&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;sch_flag&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scheme_list&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# è‡ªåŠ¨æ‹‰å–åˆ†æ”¯
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;git_clone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch_dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;branch_group&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argv_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# å‚æ•°1 åˆ†ç»„åç§°
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;branch_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argv_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# å‚æ•°2 åˆ†æ”¯åç§°
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;branch_path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch_dir&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch_name&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# http://192.168.1.44/publicrepos/demo1.git
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;branch_link&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;http://192.168.1.44/&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch_group&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch_name&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;.git&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;git_pwd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;cd &lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch_dir&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; &amp;amp;&amp;amp; git clone &lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch_link&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;exists&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;branch_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;git_pwd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;cd &lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch_path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; &amp;amp;&amp;amp; git pull origin master&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;git_pwd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;æ‹‰å–ï¼š&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# è‡ªåŠ¨åŒ– sonar æ‰«æ
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;auto_sonar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argvs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;argv_list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argvs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Python å‚æ•°é”™è¯¯&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;branch_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argv_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# åˆ†æ”¯ç»å¯¹è·¯å¾„
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;branch_dir&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;expanduser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g_repos_folder&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;branch_path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch_dir&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch_name&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;åˆ†æ”¯è·¯å¾„ï¼š&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# æ‹‰å–æˆ–è€…cloneåˆ†æ”¯
&lt;/span&gt;    &lt;span class=&quot;nf&quot;&gt;git_clone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch_dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# æ‰¾åˆ°å·¥ç¨‹æ–‡ä»¶
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;proj_path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;find_project&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;branch_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;å·¥ç¨‹è·¯å¾„ï¼š&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;proj_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# æ‰¾åˆ°æ‰€æœ‰scheme
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;scheme_list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get_schemes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;proj_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;scheme åˆ—è¡¨ï¼š&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scheme_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# shell å‚æ•°ï¼Œå‚æ•°1ï¼šåˆ†æ”¯åç§°ï¼›å‚æ•°2ï¼šxcodeproj æ–‡ä»¶å…¨è·¯å¾„ï¼›å‚æ•°3ï¼šscheme
&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scheme&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scheme_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;sh_path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;dirname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;abspath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__file__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;/run-sonar.sh&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;chmod 777 &lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sh_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;sonar_pwd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;sh &lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sh_path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; &lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; &lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;proj_path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; &lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scheme&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sonar_pwd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# ä¸»ç¨‹åº
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__name__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;__main__&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;python å‚æ•°å¿…é¡»å¸¦ä¸Š åˆ†ç»„/åˆ†æ”¯åç§°&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;auto_sonar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;oclint-æ‰«æä¸Šä¼ -sonarqube-è„šæœ¬&quot;&gt;OCLint æ‰«æä¸Šä¼  SonarQube è„šæœ¬&lt;/h2&gt;

&lt;p&gt;è‡ªåŠ¨åˆ›å»º Sonar é…ç½®æ–‡ä»¶ï¼Œæ‰«æç»“æœè‡ªåŠ¨å‚¨å­˜åˆ°æ•°æ®åº“ï¼Œé€šè¿‡ç½‘é¡µæŸ¥çœ‹ç»“æœã€‚&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/sh&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# æ£€æµ‹å‚æ•°&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-z&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;å‚æ•°1ï¼šåˆ†æ”¯åç§°ä¸èƒ½ä¸ºç©º&quot;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;exit &lt;/span&gt;0
&lt;span class=&quot;k&quot;&gt;fi
&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;å‚æ•°1ï¼š&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-z&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$2&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;å‚æ•°2ï¼šxcodeproj æ–‡ä»¶è·¯å¾„ä¸èƒ½ä¸ºç©º&quot;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;exit &lt;/span&gt;0
&lt;span class=&quot;k&quot;&gt;fi
&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;å‚æ•°2ï¼š&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$2&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-z&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$3&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;å‚æ•°3ï¼šscheme åç§°ä¸èƒ½ä¸ºç©º&quot;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;exit &lt;/span&gt;0
&lt;span class=&quot;k&quot;&gt;fi
&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;å‚æ•°3ï¼š&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$3&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# æ£€æµ‹ç¯å¢ƒ&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if &lt;/span&gt;which xcodebuild 2&amp;gt;/dev/null&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;xcodebuild exist&apos;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;xcodebuild æœªå®‰è£…&apos;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;fi

if &lt;/span&gt;which oclint 2&amp;gt;/dev/null&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;oclint exist&apos;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;oclint æœªå®‰è£…&apos;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;exit &lt;/span&gt;0
&lt;span class=&quot;k&quot;&gt;fi

if &lt;/span&gt;which xcpretty 2&amp;gt;/dev/null&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;xcpretty exist&apos;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;xcpretty æœªå®‰è£…ï¼Œæ‰§è¡Œ gem install xcpretty å®‰è£…&apos;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;exit &lt;/span&gt;0
&lt;span class=&quot;k&quot;&gt;fi&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# è·å–è·¯å¾„å’Œscheme&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;proj_dir&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;dirname&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$2&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$proj_dir&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;exit &lt;/span&gt;0
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;å·¥ç¨‹è·¯å¾„ï¼š&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$proj_dir&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# æ¸…é™¤ä¸Šæ¬¡çš„ç¼“å­˜&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; ./derivedData &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;æ¸…ç†ç¼“å­˜...&quot;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; ./derivedData
&lt;span class=&quot;k&quot;&gt;fi

&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;myworkspace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;basename&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$2&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;myscheme&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$3&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# xcodebuild clean&lt;/span&gt;
xcodebuild clean &lt;span class=&quot;nt&quot;&gt;-project&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$myworkspace&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-scheme&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$myscheme&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-sdk&lt;/span&gt; iphoneos &lt;span class=&quot;nt&quot;&gt;-configuration&lt;/span&gt; Debug

&lt;span class=&quot;c&quot;&gt;# ç”Ÿæˆç¼–è¯‘æ•°æ®&lt;/span&gt;
xcodebuild &lt;span class=&quot;nt&quot;&gt;-project&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$myworkspace&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-scheme&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$myscheme&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-sdk&lt;/span&gt; iphoneos &lt;span class=&quot;nt&quot;&gt;-configuration&lt;/span&gt; Debug &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;arch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;arm64 &lt;span class=&quot;nv&quot;&gt;COMPILER_INDEX_STORE_ENABLE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;NO | xcpretty &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; json-compilation-database &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; compile_commands.json

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; ./compile_commands.json &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ç¼–è¯‘æ•°æ®ç”Ÿæˆå®Œæ¯•&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ç¼–è¯‘æ•°æ®ç”Ÿæˆå¤±è´¥&quot;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;exit &lt;/span&gt;0
&lt;span class=&quot;k&quot;&gt;fi&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# ç”ŸæˆæŠ¥å‘Šç›®å½•&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; ./sonar-reports &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;mkdir &lt;/span&gt;sonar-reports
&lt;span class=&quot;k&quot;&gt;fi&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# åˆ é™¤æ—§æŠ¥å‘Š&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; sonar-reports/&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$myscheme&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;_oclint.xml &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; sonar-reports/&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$myscheme&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;_oclint.xml
&lt;span class=&quot;k&quot;&gt;fi&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# åˆ†æç¼–è¯‘æ•°æ®&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;maxPriority&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;15000
&lt;span class=&quot;c&quot;&gt;# Disable rules&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;LINT_DISABLE_RULES&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;-disable-rule=LongClass &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;
-disable-rule=LongLine &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;
-disable-rule=LongMethod &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;
-disable-rule=LongVariableName &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;
-disable-rule=ShortVariableName &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;
-disable-rule=HighNcssMethod &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;
-disable-rule=DeepNestedBlock &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;
-disable-rule=TooManyFields &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;
-disable-rule=TooManyMethods &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;
-disable-rule=TooManyParameters &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;
-disable-rule=IvarAssignmentOutsideAccessorsOrInit&quot;&lt;/span&gt;

oclint-json-compilation-database &lt;span class=&quot;nt&quot;&gt;--&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;-report-type&lt;/span&gt; pmd &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; sonar-reports/&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$myscheme&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;_oclint.xml &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;-max-priority-1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$maxPriority&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;-max-priority-2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$maxPriority&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;-max-priority-3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$maxPriority&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$LINT_DISABLE_RULES&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; sonar-reports/&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$myscheme&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;_oclint.xml &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;åˆ†æå®Œæˆ&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;åˆ†æå¤±è´¥&quot;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;exit &lt;/span&gt;0
&lt;span class=&quot;k&quot;&gt;fi

&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;&apos;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;s/\&amp;amp;/\&amp;amp;amp;/g&apos;&lt;/span&gt; sonar-reports/&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$myscheme&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;_oclint.xml

&lt;span class=&quot;c&quot;&gt;# ç”Ÿäº§é…ç½®æ–‡ä»¶&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; sonar-project.properties
&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; sonar-project.properties &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;EOF&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;
sonar.projectKey=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;
sonar.projectName=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;
sonar.projectVersion=1.0
sonar.language=swift
sonar.sources=.
sonar.swift.simulator=platform=iphoneos,OS=latest
sonar.swift.project=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$myworkspace&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;
sonar.swift.appScheme=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$myscheme&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;
sonar.swift.appConfiguration=Debug
sonar.sourceEncoding=UTF-8
sonar.swift.excludedPathsFromCoverage=.*Tests.*
sonar.swift.tailor.config=--no-color --max-line-length=100 --max-file-length=500 --max-name-length=40 --max-name-length=40 --min-name-length=4
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOF

&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;# å‚¨å­˜åˆ° sonar æ•°æ®åº“&lt;/span&gt;
/bin/sh sonar-scanner &lt;span class=&quot;nt&quot;&gt;-X&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;è„šæœ¬æºç &quot;&gt;è„šæœ¬æºç &lt;/h2&gt;

&lt;p&gt;è„šæœ¬æºç å·²æ”¾åœ¨ Github ä»“åº“ &lt;a href=&quot;https://github.com/muzipiao/dev-shell&quot;&gt;https://github.com/muzipiao/dev-shell&lt;/a&gt; çš„ sonar-scan æ–‡ä»¶å¤¹ä¸‹ï¼Œç»„ä»¶ Git è·¯å¾„å’Œæ‹‰å–åˆ°æœ¬åœ°çš„è·¯å¾„æœ‰æ‰€ä¸åŒï¼Œéœ€è¦ç®€å•ä¿®æ”¹ï¼Œè¿™äº›è„šæœ¬ä¾›å­¦ä¹ å‚è€ƒã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœæ‚¨è§‰å¾—æœ‰æ‰€å¸®åŠ©ï¼Œè¯·åœ¨&lt;a href=&quot;https://github.com/muzipiao/dev-shell&quot;&gt;GitHub Shell&lt;/a&gt;ä¸Šèµä¸ªStar â­ï¸ï¼Œæ‚¨çš„é¼“åŠ±æ˜¯æˆ‘å‰è¿›çš„åŠ¨åŠ›ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å‚è€ƒ&quot;&gt;å‚è€ƒ&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;https://blog.csdn.net/weixin_43901866/article/details/86578648&lt;/li&gt;
  &lt;li&gt;https://www.jianshu.com/p/3b70aa6af07b&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Sun, 01 Dec 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/12/SonarQube-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%89%AB%E6%8F%8F/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/12/SonarQube-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%89%AB%E6%8F%8F/</guid>
        
        <category>SonarQube</category>
        
        
      </item>
    
      <item>
        <title>iOS ä½¿ç”¨ SM2 SM4 åŠ è§£å¯† SM2 ç­¾åéªŒç­¾åŠ SM3 æ‘˜è¦</title>
        <description>&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#1_0&quot;&gt;å‰è¨€&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2_0&quot;&gt;å›½å¯†å…¨å®¶æ¡¶&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3_0&quot;&gt;SM2 ç®—æ³•åŸç†&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#4_0&quot;&gt;é›†æˆ OpenSSL&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#5_0&quot;&gt;å›½å¯†çš„ Objective-C å°è£…&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#6_0&quot;&gt;å‚è€ƒ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a id=&quot;1_0&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;

&lt;p&gt;å¯¹äºå¼€å‘äººå‘˜ï¼Œå¼€å‘ä¸­åŠ è§£å¯†æ˜¯ç»å¸¸ç”¨åˆ°çš„ï¼Œå¸¸è§çš„å¯†ç ç®—æ³• MD5ã€SHAã€AESã€DESï¼ŒRSA ç­‰ç­‰ï¼Œè¿™äº›æ— ä¸€ä¾‹å¤–éƒ½æ˜¯å›½å¤–çš„åŠ å¯†ç®—æ³•ã€‚åŸºäºå®‰å…¨å’Œå®è§‚æˆ˜ç•¥è€ƒè™‘ï¼Œæˆ‘å›½ä» 2010 å¹´å…ˆåæ¨å‡ºäº† SM1ï¼ˆSCB2ï¼‰ã€SM2ã€SM3ã€SM4ã€SM7ã€SM9ã€ZUCï¼ˆç¥–å†²ä¹‹å¯†ç ç®—æ³•ï¼‰ç­‰å¯†ç ç®—æ³•ï¼Œæœ¬æ–‡ä¸»è¦è®¨è®º SM2 ç®—æ³•åŸç†ï¼ŒiOS ç«¯å¦‚ä½•ä½¿ç”¨ SM2ã€SM4 åŠ è§£å¯†ã€SM2 ç­¾åéªŒç­¾åŠä½¿ç”¨ SM3 ç”Ÿæˆæ‘˜è¦å€¼ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å›½å¯†å…¨å®¶æ¡¶&quot;&gt;&lt;a id=&quot;2_0&quot;&gt;&lt;/a&gt;å›½å¯†å…¨å®¶æ¡¶&lt;/h2&gt;

&lt;p&gt;å›½å¯†ç®—æ³•ä¸­ï¼ŒSM1ã€SM4ã€SM7ã€ZUC æ˜¯å¯¹ç§°ç®—æ³•ï¼›SM2ã€SM9æ˜¯éå¯¹ç§°ç®—æ³•ï¼›SM3æ˜¯å“ˆå¸Œç®—æ³•ã€‚å…¶ä¸­ SM1 å’Œ SM7 åˆ†ç»„å¯†ç ç®—æ³•ä¸å…¬å¼€ï¼ŒSM1 ä¸»è¦ç”¨äºåŠ å¯†èŠ¯ç‰‡ç­‰é‡è¦é¢†åŸŸï¼Œä¾‹å¦‚ æ™ºèƒ½ IC å¡ï¼ŒåŠ å¯†æœºç­‰ï¼›SM7 ä¸»è¦ç”¨äºå¸¸è§„éæ¥è§¦å¼ IC å¡ï¼Œä¾‹å¦‚é—¨ç¦å¡ï¼Œå·¥ä½œè¯ç­‰ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;ç®—æ³•&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;å…¬å¼€&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;ç±»ä¼¼&lt;/th&gt;
      &lt;th&gt;ä¸»è¦ç”¨é€”&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;SM1&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;å¦&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;AES&lt;/td&gt;
      &lt;td&gt;æ™ºèƒ½ICå¡ã€åŠ å¯†å¡ï¼ŒåŠ å¯†æœºç­‰ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;SM2&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;æ˜¯&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;RSA&lt;/td&gt;
      &lt;td&gt;é‡è¦ä¿¡æ¯çš„åŠ è§£å¯†ï¼Œç­¾åï¼Œå¦‚å¯†ç ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;SM3&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;æ˜¯&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;SHA&lt;/td&gt;
      &lt;td&gt;å¯†ç åº”ç”¨ä¸­çš„æ•°å­—ç­¾åå’ŒéªŒè¯ï¼Œæ‘˜è¦ç­‰ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;SM4&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;æ˜¯&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;AES&lt;/td&gt;
      &lt;td&gt;åˆ†ç»„ç®—æ³•ç”¨äºæ— çº¿å±€åŸŸç½‘äº§å“ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;SM7&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;å¦&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;AES&lt;/td&gt;
      &lt;td&gt;æ ¡å›­ä¸€å¡é€šï¼Œé—¨ç¦å¡ï¼Œå·¥ä½œè¯ç­‰ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;SM9&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;æ˜¯&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;SSL&lt;/td&gt;
      &lt;td&gt;åŸºäºèº«ä»½çš„å¯†ç ï¼Œç”¨äºéªŒè¯èº«ä»½ã€‚&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;ZUC&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;æ˜¯&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;AES&lt;/td&gt;
      &lt;td&gt;4G ç½‘ç»œä¸­çš„å›½é™…æ ‡å‡†å¯†ç ç®—æ³•ã€‚&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;sm2-ç®—æ³•åŸç†&quot;&gt;&lt;a id=&quot;3_0&quot;&gt;&lt;/a&gt;SM2 ç®—æ³•åŸç†&lt;/h2&gt;

&lt;p&gt;SM2 ç®—æ³•æ˜¯å›½å¯†æ ‡å‡†çš„éå¯¹ç§°ç®—æ³•æ ‡å‡†ï¼ŒåŸºäºeccï¼ˆElliptic Curves Cryptographyï¼Œæ¤­åœ†æ›²çº¿å¯†ç ç¼–ç å­¦ï¼‰çš„æ‰©å±•ã€‚æèµ·éå¯¹ç§°åŠ å¯†ï¼Œè‡ªç„¶æƒ³åˆ°äº† RSAï¼Œå¯¹æå¤§æ•´æ•°åšå› æ•°åˆ†è§£çš„éš¾åº¦å†³å®šäº†RSAç®—æ³•çš„å¯é æ€§ï¼ˆ&lt;a href=&quot;https://muzipiao.github.io/2016/12/iOS-%E7%AB%AF-RSA-%E5%8A%A0%E5%AF%86/&quot;&gt;RSA ç®—æ³•ç†è§£&lt;/a&gt;ï¼‰ï¼Œè¿™æ˜¯ RSA å®‰å…¨çš„åŸºç¡€ã€‚é‚£å›½å¯†åŠ è§£å¯†çš„ç®—æ³•åŸºç¡€æ˜¯ä»€ä¹ˆï¼Ÿé¦–å…ˆæˆ‘ä»¬å…ˆç†è§£ä¸€ä¸‹æ¤­åœ†æ›²çº¿ã€‚&lt;/p&gt;

&lt;h3 id=&quot;sm2-æ¤­åœ†æ›²çº¿&quot;&gt;SM2 æ¤­åœ†æ›²çº¿&lt;/h3&gt;

&lt;p&gt;å›½å¯† SM2 çš„ç®—æ³•åŸºç¡€æ˜¯æ¤­åœ†æ›²çº¿ï¼Œå…¬å¼ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-math&quot;&gt;y^2 = x^3 + ax + b(4a^3 + 27b^2 â‰  0)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é‚£æ¤­åœ†æ›²çº¿é•¿ä»€ä¹ˆæ ·å­å‘¢ï¼Œç™¾é—»ä¸å¦‚ä¸€è§ï¼Œå›¾ç‰‡èƒ½ç›´è§‚æ„Ÿå—ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/gmobjc/gmobjc01.png&quot; alt=&quot;æ¤­åœ†æ›²çº¿&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä¸ºä»€ä¹ˆéœ€è¦æ»¡è¶³å‘¢ï¼Ÿ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-math&quot;&gt;4a^3 + 27b^2 â‰  0
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å› ä¸ºå½“è¿™ä¸ªå…¬å¼ç­‰äº 0 æ—¶ï¼Œå®ƒä¸æ˜¯æ¤­åœ†æ›²çº¿ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/gmobjc/gmobjc02.png&quot; alt=&quot;abå–å€¼æ¡ä»¶&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;sm2-ç®—æ³•ç†è§£&quot;&gt;SM2 ç®—æ³•ç†è§£&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/gmobjc/gmobjc03.png&quot; alt=&quot;å€ç‚¹è¿ç®—&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç»“åˆä¸Šé¢è¿™å¼ å›¾ï¼Œæˆ‘ä»¬äº†è§£ä¸€ä¸‹ SM2 çš„å‡ ä½•æ„ä¹‰ã€‚&lt;/p&gt;

&lt;h3 id=&quot;sm2-å…¬ç§é’¥&quot;&gt;SM2 å…¬ç§é’¥&lt;/h3&gt;

&lt;p&gt;ç®—æ³•æ˜¯åŸºäºæ•°å­¦çš„ï¼ŒSM2 å®šä¹‰æ›²çº¿ä¸Šçš„ç¾¤è¿ç®—åŠ å‡ä¹˜ï¼Œé€šè¿‡å…¬ç§é’¥çš„ç”Ÿæˆç†è§£ã€‚&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;é¦–é€‰ä¸€æ¡æ¤­åœ†æ›²çº¿ï¼Œå³å›ºå®š aã€b çš„å€¼ï¼Œå‡è®¾é€‰æ‹©çš„æ˜¯ä¸Šå›¾æ‰€ç¤ºæ›²çº¿ã€‚&lt;/li&gt;
  &lt;li&gt;éšæœºé€‰æ‹©ä¸€ä¸ªç‚¹ P ä¸ºåŸºç‚¹ï¼Œæ›²çº¿åšåˆ‡çº¿ï¼Œç»è¿‡ Q ç‚¹ï¼Œåˆ‡ç‚¹ R1ã€‚&lt;/li&gt;
  &lt;li&gt;åŸºäº x è½´åš R1 çš„å¯¹ç§°ç‚¹ Rï¼Œåˆ™ SM2 å®šä¹‰åŠ æ³•ä¸º P + Q = Rï¼Œè¿™å°±æ˜¯æ¤­åœ†æ›²çº¿åŠ æ³•ã€‚&lt;/li&gt;
  &lt;li&gt;æ±‚ 2 å€ç‚¹ï¼Œå½“ P = Q æ—¶ï¼Œå³ P + P = R = 2Pï¼Œåˆ™ R æ˜¯ P çš„ 2 å€ç‚¹ã€‚&lt;/li&gt;
  &lt;li&gt;æ±‚ 3 å€ç‚¹ï¼Œ3P = P + 2P = P + Rï¼Œç»è¿‡ Pã€R åšç›´çº¿ï¼Œäº¤äºæ¤­åœ†æ›²çº¿ç‚¹ M1, åŸºäº x è½´å¯¹ç§°ç‚¹ M åˆ™æ˜¯ 3 å€ç‚¹ï¼Œä¾æ¬¡ç±»æ¨ã€‚&lt;/li&gt;
  &lt;li&gt;æ±‚ d å€ç‚¹ï¼Œå‡è®¾æˆ‘ä»¬åŒæ ·æ¬¡æ•°ä¸º dï¼Œè¿ç®—å€ç‚¹ä¸º Qã€‚&lt;/li&gt;
  &lt;li&gt;d ä¸ºç§é’¥ï¼ŒQ ä¸ºå…¬é’¥ã€‚æ‰€ä»¥ç§é’¥æ˜¯ä¸€ä¸ªå¤§æ•´æ•°ï¼Œå…¬é’¥æ˜¯ä¸€ä¸ªç‚¹åæ ‡ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ä¸Šé¢çš„å‡ ä½•æ¨ç†æ˜¯ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œå®é™…å–å€¼éƒ½æ˜¯åœ¨è´¨æ•°æœ‰é™åŸŸä¸Šã€‚å¯†ç ä¸“å®¶ä»¬ç»è¿‡æ¨ç†å’Œè¿ç®—ï¼Œå·²ç»ä¸ºæˆ‘ä»¬é€‰æ‹©äº†è´¨æ•°æœ‰é™åŸŸä¸Šçš„æœ€ä¼˜æ¤­åœ†æ›²çº¿ï¼Œé™¤éæœ‰ç‰¹æ®Šéœ€è¦ï¼Œå¦åˆ™ä¸éœ€è¦è‡ªå®šä¹‰æ›²çº¿ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/gmobjc/gmobjc04.png&quot; alt=&quot;æ¨èæ›²çº¿&quot; /&gt;&lt;/p&gt;

&lt;p&gt;pï¼šæ¤­åœ†æ›²çº¿åœ¨è´¨æ•° p çš„æœ‰é™åŸŸ Fp ä¸Šçš„ç‚¹é›†åˆï¼›&lt;/p&gt;

&lt;p&gt;aï¼šæ¤­åœ†æ›²çº¿å‚æ•° a çš„å€¼ï¼›&lt;/p&gt;

&lt;p&gt;bï¼šæ¤­åœ†æ›²çº¿å‚æ•° b çš„å€¼;&lt;/p&gt;

&lt;p&gt;nï¼šå–å€¼èŒƒå›´ï¼Œéšæœºæ•´æ•° d çš„å–å€¼èŒƒå›´ [1,n-2]ï¼›&lt;/p&gt;

&lt;p&gt;Gxï¼šåŸºç‚¹çš„ x åæ ‡å€¼ï¼Œç±»ä¼¼äºç‚¹ P çš„ x åæ ‡å€¼ï¼›&lt;/p&gt;

&lt;p&gt;Gyï¼šåŸºç‚¹çš„ y åæ ‡å€¼ï¼Œç±»ä¼¼äºç‚¹ P çš„ y åæ ‡å€¼ã€‚&lt;/p&gt;

&lt;h3 id=&quot;sm2-åŠ å¯†&quot;&gt;SM2 åŠ å¯†&lt;/h3&gt;

&lt;p&gt;SM2 åŠ å¯†ç»“æœé•¿åº¦æ˜¯å›ºå®šçš„ï¼Œä¾‹å¦‚å¯†ç ä¸º 123456 çš„ 6 ä½æ•°å­—ï¼ŒåŠ å¯†ç»“æœé•¿åº¦ = 64 + 32 + 6 = 102 å­—èŠ‚ï¼Œè½¬ä¸º 16 è¿›åˆ¶å­—ç¬¦ä¸²ç»“æœä¸º 204 ä¸ªå­—ç¬¦ã€‚åŸæ–‡é•¿åº¦ä¸º nï¼Œåˆ™åŠ å¯†ç»“æœé•¿åº¦ r  = 96 + nã€‚&lt;/p&gt;

&lt;p&gt;åŠ å¯†è¿‡ç¨‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/gmobjc/gmobjc05.png&quot; alt=&quot;sm2åŠ å¯†&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è®¾æ¤­åœ†æ›²çº¿ä¸ºæ¨èæ›²çº¿ï¼Œå…¬é’¥ Qï¼ŒåŸæ–‡æ¯”ç‰¹ä¸² Mï¼Œklen ä¸º M çš„æ¯”ç‰¹é•¿åº¦ï¼›&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;è®¡ç®—éšæœºæ¤­åœ†æ›²çº¿ç‚¹ C1 = [k]G=(x1, y1)ï¼Œk æ˜¯éšæœºæ•°ï¼ŒGä¸ºåŸºç‚¹ï¼Œè®¡ç®—å‡ºçš„å€ç‚¹ C1 ä¸º 64 å­—èŠ‚ï¼›&lt;/li&gt;
  &lt;li&gt;æ ¡éªŒå…¬é’¥ Qï¼Œè®¡ç®—æ¤­åœ†æ›²çº¿ç‚¹ S=[h]Qï¼Œhä¸ºä½™å› å­ï¼Œè‹¥S ä¸ºæ— ç©·ç‚¹ï¼Œé€€å‡ºï¼›&lt;/li&gt;
  &lt;li&gt;è®¡ç®—æ¤­åœ†æ›²çº¿ç‚¹ [k]PB=(x2, y2)ï¼Œè·å– x2ï¼Œy2ï¼›&lt;/li&gt;
  &lt;li&gt;è®¡ç®— t = KDF(x2||y2ï¼Œklen)ï¼Œè‹¥ t ä¸ºå…¨ 0 æ¯”ç‰¹ä¸²ï¼Œåˆ™è¿”å›æ­¥éª¤ 1ï¼ŒKDFæ˜¯ SM2 çš„å¯†é’¥æ´¾ç”Ÿå‡½æ•°;&lt;/li&gt;
  &lt;li&gt;è®¡ç®— C2= MâŠ•tï¼Œå¯¹æ˜æ–‡åŠ å¯†ï¼ŒC2 æ˜¯çœŸæ­£çš„å¯†æ–‡ï¼Œé•¿åº¦å’ŒåŸæ–‡ç›¸åŒï¼›&lt;/li&gt;
  &lt;li&gt;è®¡ç®— C3= Hash (x2||M|| y2)ï¼Œç”Ÿæˆæ‚å‡‘å€¼ï¼Œç”¨æ¥æ•ˆéªŒæ•°æ®ï¼Œé•¿åº¦ 32 å­—èŠ‚ï¼›&lt;/li&gt;
  &lt;li&gt;è¾“å‡ºå¯†æ–‡ C=C1||C3||C2ï¼ŒC ä¸ºå¯†æ–‡ç»“æœã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æ³¨æ„ï¼šOpenSSL åŠ å¯†ç»“æœæ˜¯ç»è¿‡ ASN1 æ ¼å¼åŒ–ç¼–ç çš„ï¼ŒåŠ å¯†ç»“æœé•¿åº¦ä¼šä¸å›ºå®šã€‚åŠ è¿‡è¿‡ç¨‹ä¸­ä½¿ç”¨äº†éšæœºæ•°ï¼Œæ‰€ä»¥æ¯æ¬¡åŠ å¯†ç»“æœéƒ½ä¸ä¸€æ ·ã€‚&lt;/p&gt;

&lt;h3 id=&quot;sm2-è§£å¯†&quot;&gt;SM2 è§£å¯†&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/gmobjc/gmobjc06.png&quot; alt=&quot;sm2è§£å¯†&quot; /&gt;&lt;/p&gt;

&lt;p&gt;SM2 è§£å¯†å°±æ˜¯é€†æµç¨‹èµ°ä¸€éï¼Œæ³¨æ„ OpenSSL è§£å¯†è¦æ±‚ä¼ å…¥çš„å¯†æ–‡æ˜¯ ASN1 ç¼–ç çš„ã€‚&lt;/p&gt;

&lt;p&gt;è®¾æ¤­åœ†æ›²çº¿ä¸ºæ¨èæ›²çº¿ ç§é’¥ dï¼Œå¯†æ–‡ Cï¼ˆC=C1||C3||C2ï¼‰ï¼Œklen ä¸ºå¯†æ–‡ä¸­ C2 çš„æ¯”ç‰¹é•¿åº¦ã€‚&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;ä» C ä¸­å–å‡ºæ¯”ç‰¹ä¸² C1ï¼ˆå¯†æ–‡ C çš„å‰ 64 å­—èŠ‚ï¼‰ï¼Œå°† C1 çš„æ•°æ®ç±»å‹è½¬æ¢ä¸ºæ¤­åœ†æ›²çº¿ä¸Šçš„ç‚¹ï¼ŒéªŒè¯ C1 æ˜¯å¦æ»¡è¶³æ¤­åœ†æ›²çº¿æ–¹ç¨‹ï¼Œè‹¥ä¸æ»¡è¶³åˆ™æŠ¥é”™å¹¶é€€å‡º;&lt;/li&gt;
  &lt;li&gt;è®¡ç®—æ¤­åœ†æ›²çº¿ç‚¹ S= [h]C1ï¼Œè‹¥ S æ˜¯æ— ç©·è¿œç‚¹ï¼Œåˆ™æŠ¥é”™å¹¶é€€å‡ºï¼›&lt;/li&gt;
  &lt;li&gt;è®¡ç®—[d]C1=(x2, y2)ï¼Œå°†åæ ‡ x2ã€y2 çš„æ•°æ®ç±»å‹è½¬æ¢ä¸ºæ¯”ç‰¹ä¸²ï¼›&lt;/li&gt;
  &lt;li&gt;è®¡ç®— t = KDF(x2||y2ï¼Œklen)ï¼Œè‹¥ t ä¸ºå…¨ 0 æ¯”ç‰¹ä¸²ï¼Œåˆ™æŠ¥é”™å¹¶é€€å‡ºï¼›&lt;/li&gt;
  &lt;li&gt;ä» C ä¸­å–å‡ºæ¯”ç‰¹ä¸² C2ï¼Œè®¡ç®— Mâ€™=C2âŠ•tï¼›&lt;/li&gt;
  &lt;li&gt;è®¡ç®— u = Hash (x2||Mâ€™|| y2)ï¼Œä» C ä¸­å–å‡ºæ¯”ç‰¹ä¸² C3ï¼ˆå¯†æ–‡ C çš„å 32 å­—èŠ‚ï¼‰ï¼Œè‹¥ uâ‰ C3ï¼Œåˆ™æŠ¥é”™å¹¶é€€å‡ºï¼›&lt;/li&gt;
  &lt;li&gt;è¾“å‡ºæ˜æ–‡ Mâ€™ï¼ŒMâ€™ å°±æ˜¯è§£å¯†åçš„æ˜æ–‡ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;é›†æˆ-openssl&quot;&gt;&lt;a id=&quot;4_0&quot;&gt;&lt;/a&gt;é›†æˆ OpenSSL&lt;/h2&gt;

&lt;p&gt;OpenSSL 1.1.1 ä»¥ä¸Šç‰ˆæœ¬å¢åŠ äº†å¯¹ SM2/SM3/SM4 å¯†ç ç®—æ³•çš„æ”¯æŒï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ OpenSSL å®ç°å›½å¯†åŠ è§£å¯†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒOpenSSL æ²¡æœ‰å®˜æ–¹ç‰ˆæœ¬çš„ cocoapods ç‰ˆæœ¬ï¼Œæˆ‘ä»¬éœ€è¦è‡ªè¡Œå°† OpenSSL ç¼–è¯‘ä¸º frameworkã€‚ç„¶è€Œï¼Œå½“æ£€æŸ¥æ‰“åŒ…å®Œæˆçš„é™æ€åº“æ—¶ï¼Œå‘ç°å¹¶æœªæš´éœ²å›½å¯†çš„å¤´æ–‡ä»¶ï¼Œè§£å†³åŠæ³•å¾ˆç®€å•ï¼Œæ‰“å¼€ä¸‹è½½çš„ OpenSSL æºç ï¼Œå°† crypto/include/internal è·¯å¾„ä¸‹çš„ sm2.hã€sm3.hï¼Œsm4.h éƒ½æ‹–åˆ° openssl.framework/Headers æ–‡ä»¶å¤¹ä¸‹å³å¯ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœæƒ³é€šè¿‡ cocoapods é›†æˆ OpenSSLï¼Œæˆ–è€…ä¸ä¼šç¼–è¯‘ï¼Œæˆ‘å·²ç»å°†ç¼–è¯‘å®Œæˆçš„ OpenSSL.framework ä¸Šä¼ è‡³ cocoapodsï¼Œç¼–è¾‘ Podfile æ–‡ä»¶ï¼Œæ·»åŠ  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod &apos;GMObjC&apos;&lt;/code&gt;ï¼Œä¿å­˜æ‰§è¡Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod install&lt;/code&gt; å³å¯ã€‚&lt;/p&gt;

&lt;p&gt;è‹¥æƒ³è‡ªè¡Œç¼–è¯‘ï¼Œåœ¨ GitHub æœ‰å¼€æºçš„ç¼–è¯‘è„šæœ¬ &lt;a href=&quot;https://github.com/muzipiao/GMOpenSSL&quot;&gt;https://github.com/muzipiao/GMOpenSSL&lt;/a&gt;ï¼Œä¸‹è½½æ ¹æ®è¯´æ˜ç¼–è¯‘å³å¯ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å›½å¯†çš„-objective-c-å°è£…&quot;&gt;&lt;a id=&quot;5_0&quot;&gt;&lt;/a&gt;å›½å¯†çš„ Objective-C å°è£…&lt;/h2&gt;

&lt;p&gt;OpenSSL å®ç°äº† SM2/SM3/SM4 å¯†ç ç®—æ³•ï¼Œä½†æ²¡æœ‰æ³¨é‡Šè¯´æ˜ï¼Œä¸”çº¯ C çš„ API ç”¨èµ·æ¥ä¸æ–¹ä¾¿ã€‚æ‰€ä»¥ï¼Œå¯¹ SM2/SM3/SM4 è¿›è¡Œäº† Objective-C å°è£…ï¼Œæ–¹ä¾¿åœ¨ iOS ç«¯ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;å…·ä½“å°è£…è¿‡ç¨‹ä¸å†è¯¦è§£ï¼Œå¼€æºé¡¹ç›®ï¼Œå¯è‡ªè¡ŒæŸ¥çœ‹æºç ã€‚å®ç°è¿‡ç¨‹æœ‰ç‚¹åå·ï¼Œå°¤å…¶ SM2 åŠ è§£å¯†ï¼Œåå°æ˜¯å¯¹ C1||C3||C2 æ‹¼æ¥çš„åŸå§‹å¯†æ–‡è¿›è¡Œæ“ä½œï¼Œè€Œ OpenSSL åŠ è§£å¯†éƒ½æ˜¯ ASN1 ç¼–ç æ ¼å¼ï¼Œè¿˜å¥½ OpenSSL æ˜¯å¼€æºé¡¹ç›®ï¼ŒæŸ¥çœ‹æºç æ‰¾åˆ°äº†åŸå› ã€‚&lt;/p&gt;

&lt;p&gt;æŸ¥çœ‹å…·ä½“å®ç°è¿‡ç¨‹ï¼Œè¯·è‡³å¼€æºé¡¹ç›®åœ°å€&lt;a href=&quot;https://github.com/muzipiao/GMObjC&quot;&gt;https://github.com/muzipiao/GMObjC&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h3 id=&quot;sm2-åŠ è§£å¯†&quot;&gt;sm2 åŠ è§£å¯†&lt;/h3&gt;

&lt;p&gt;sm2 åŠ è§£å¯†ï¼ŒåŠ å¯†ä¼ å…¥å¾…åŠ å¯†å­—ç¬¦ä¸²å’Œå…¬é’¥ï¼Œè§£å¯†ä¼ å…¥å¯†æ–‡å’Œç§é’¥å³å¯ï¼Œä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// å…¬é’¥&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gPubkey&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&quot;0408E3FFF9505BCFAF9307E665E9229F4E1B3936437A870407EA3D97886BAFBC9C624537215DE9507BC0E2DD276CF74695C99DF42424F28E9004CDE4678F63D698&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// ç§é’¥&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gPrikey&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&quot;90F3A42B9FE24AB196305FD92EC82E647616C3A3694441FB3422E7838E24DEAE&quot;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// å¾…åŠ å¯†çš„å­—ç¬¦ä¸²&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pwd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&quot;123456&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// åŠ å¯†&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ctext&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GMSm2Utils&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;encrypt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pwd&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;PublicKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gPubkey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// è§£å¯†&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plainText&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GMSm2Utils&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;decrypt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encodeCtext&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;PrivateKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gPrikey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æ³¨æ„ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;OpenSSL æ‰€ç”¨å…¬é’¥æ˜¯ 04 å¼€å¤´çš„ï¼Œåå°è¿”å›å…¬é’¥å¯èƒ½æ˜¯ä¸å¸¦ 04 çš„ï¼Œéœ€è¦æ‰‹åŠ¨æ‹¼æ¥ã€‚&lt;/li&gt;
  &lt;li&gt;åå°è¿”å›çš„è§£å¯†ç»“æœå¯èƒ½æ˜¯æ²¡æœ‰æ ‡å‡†ç¼–ç çš„åŸå§‹å¯†æ–‡ï¼Œè€Œ OpenSSL çš„åŠ è§£å¯†éƒ½æ˜¯éœ€è¦ ASN1 ç¼–ç æ ¼å¼ï¼Œæ‰€ä»¥ä¸åå°äº¤äº’è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½éœ€è¦ ASN1 ç¼–ç è§£ç ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;sm2-ç­¾åéªŒç­¾&quot;&gt;sm2 ç­¾åéªŒç­¾&lt;/h3&gt;

&lt;p&gt;sm2 ç§é’¥ç­¾åï¼Œå…¬é’¥éªŒç­¾ï¼Œå¯é˜²ç¯¡æ”¹æˆ–éªŒè¯èº«ä»½ã€‚ç­¾åæ—¶ä¼ å…¥æ˜æ–‡ã€ç§é’¥å’Œç”¨æˆ· IDï¼›éªŒç­¾æ—¶ä¼ å…¥æ˜æ–‡ã€ç­¾åã€å…¬é’¥å’Œç”¨æˆ· IDï¼Œä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// å…¬é’¥&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gPubkey&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&quot;0408E3FFF9505BCFAF9307E665E9229F4E1B3936437A870407EA3D97886BAFBC9C624537215DE9507BC0E2DD276CF74695C99DF42424F28E9004CDE4678F63D698&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// ç§é’¥&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gPrikey&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&quot;90F3A42B9FE24AB196305FD92EC82E647616C3A3694441FB3422E7838E24DEAE&quot;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// å¾…ç­¾åçš„åŸæ–‡&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pwd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&quot;123456&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// è¿™é‡Œä¼ å…¥è‡ªå®šä¹‰ IDï¼Œå’ŒæœåŠ¡å™¨ä¿æŒä¸¤ç«¯ä¸€è‡´å³å¯ã€‚&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userID&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&quot;lifei_zdjl@126.com&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// ç­¾åç»“æœ(r+s)æ‹¼æ¥çš„ 16 è¿›åˆ¶å­—ç¬¦&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;signStr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GMSm2Utils&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;sign&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pwd&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;PrivateKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gPrikey&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UserID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// éªŒç­¾ï¼ŒisOK ä¸º YES éªŒç­¾é€šè¿‡ï¼ŒNO ä¸ºæœªé€šè¿‡&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isOK&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GMSm2Utils&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;verify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pwd&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Sign&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;signStr&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PublicKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gPubkey&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UserID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// å¯¹ç­¾åç»“æœ Der ç¼–ç &lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;derSign&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GMSm2Utils&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;encodeWithDer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;signStr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// å¯¹ Der ç¼–ç è§£ç &lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;originStr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GMSm2Utils&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;decodeWithDer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;derSign&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æ³¨æ„ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;ç”¨æˆ· ID å¯ä¼ ç©ºå€¼ï¼Œå½“ä¼ ç©ºå€¼æ—¶ä½¿ç”¨ OpenSSL é»˜è®¤ç”¨æˆ· IDï¼ŒOpenSSL ä¸­é»˜è®¤ç”¨æˆ·å®šä¹‰ä¸º&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#define SM2_DEFAULT_USERID &quot;1234567812345678&quot;&lt;/code&gt; ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ç”¨æˆ· ID è¦ä¿æŒä¸€è‡´ã€‚&lt;/li&gt;
  &lt;li&gt;å®¢æˆ·ç«¯å’Œåå°äº¤äº’çš„è¿‡ç¨‹ä¸­ï¼Œå‡è®¾åå°ç­¾åï¼Œå®¢æˆ·ç«¯éªŒç­¾ï¼Œåå°è¿”å›çš„ç­¾åæ˜¯ DER ç¼–ç æ ¼å¼ï¼Œå°±éœ€è¦å…ˆå¯¹ç­¾åè¿›è¡Œ DER è§£ç ï¼Œç„¶åå†è¿›è¡ŒéªŒç­¾ã€‚åŒç†ï¼Œè‹¥å®¢æˆ·ç«¯ç­¾åï¼Œåå°éªŒç­¾ï¼Œæ ¹æ®åå°æ˜¯éœ€è¦ (r, s) æ‹¼æ¥æ ¼å¼ç­¾åï¼Œè¿˜æ˜¯ DER æ ¼å¼ï¼Œè¿›è¡Œç¼–ç è§£ç ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;sm4-åŠ è§£å¯†&quot;&gt;sm4 åŠ è§£å¯†&lt;/h3&gt;

&lt;p&gt;sm4 åŠ è§£å¯†éƒ½å¾ˆç®€å•ï¼ŒåŠ å¯†ä¼ å…¥å¾…åŠ å¯†å­—ç¬¦ä¸²å’Œå¯†é’¥ï¼Œè§£å¯†ä¼ å…¥å¯†æ–‡å’Œå¯†é’¥å³å¯ï¼Œä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// å¾…åŠ å¯†å­—ç¬¦ä¸²&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pwd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&quot;123456&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// ç”Ÿäº§ sm4 å¯†é’¥ï¼Œæ³¨æ„ä¸º 16 å­—èŠ‚å­—æ¯æ•°å­—ç¬¦å·æ··åˆçš„å­—ç¬¦ä¸²&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sm4Key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GMSm4Utils&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;createSm4Key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// ç”Ÿæˆ16ä½å¯†é’¥&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// sm4 åŠ å¯†&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sm4Ctext&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GMSm4Utils&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;encrypt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pwd&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sm4Key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// sm4 è§£å¯†&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sm4Ptext&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GMSm4Utils&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;decrypt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sm4Ctext&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sm4Key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;sm3-æ‘˜è¦&quot;&gt;sm3 æ‘˜è¦&lt;/h3&gt;

&lt;p&gt;ç±»ä¼¼äº hashã€md5ï¼Œsm3 æ‘˜è¦ç®—æ³•å¯å¯¹æ–‡æœ¬æ–‡ä»¶è¿›è¡Œæ‘˜è¦è®¡ç®—ï¼Œæ‘˜è¦é•¿åº¦ä¸º 64 ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²æ ¼å¼ã€‚&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// å¾…æå–æ‘˜è¦çš„å­—ç¬¦ä¸²&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pwd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&quot;123456&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// å­—ç¬¦ä¸²çš„æ‘˜è¦&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pwdDigest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GMSm3Utils&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;hashWithString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plainText&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// å¯¹æ–‡ä»¶è¿›è¡Œæ‘˜è¦è®¡ç®—ï¼Œä¼ å…¥ NSData å³å¯&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;txtPath&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSBundle&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;mainBundle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;pathForResource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;sm4TestFile.txt&quot;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ofType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSData&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;dataWithContentsOfFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;txtPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// æ–‡ä»¶çš„æ‘˜è¦å€¼&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileDigest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GMSm3Utils&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;hashWithData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;asn1-ç¼–ç è§£ç &quot;&gt;ASN1 ç¼–ç è§£ç &lt;/h3&gt;

&lt;p&gt;OpenSSL å¯¹ sm2 åŠ å¯†ç»“æœè¿›è¡Œäº† ASN1 ç¼–ç ï¼Œè§£å¯†æ—¶ä¹Ÿæ˜¯è¦æ±‚å¯†æ–‡ç¼–ç æ ¼å¼ä¸º ASN1 æ ¼å¼ï¼Œå…¶ä»–å¹³å°åŠ è§£å¯†å¯èƒ½éœ€è¦ C1C3C2 æ‹¼æ¥çš„åŸå§‹å¯†æ–‡ï¼Œæ‰€ä»¥éœ€è¦ç¼–ç è§£ç ï¼Œä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// ASN1 ç¼–ç çš„å¯†æ–‡&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ctext&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&quot;30:6F:02:21:00:D4:F1:B3:2E:29:50:1E:94:44:46:7F:9E:2E:51:36:1E:91:F5:EC:0B:96:F3:34:94:E5:50:82:9F:00:CC:B5:B7:02:20:04:42:83:DF:76:21:B2:9C:EB:7F:64:8B:B4:7A:3C:BF:FE:97:47:E4:D2:BD:47:44:C9:DA:1D:68:12:23:43:D6:04:20:45:F6:AB:54:22:71:63:93:95:3B:58:E3:8D:90:32:B7:A1:D8:76:2B:B8:16:F2:6A:83:51:77:44:2D:28:2C:D2:04:06:62:9F:38:6A:77:76&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// å¯¹ ASN1 ç¼–ç çš„å¯†æ–‡è§£ç &lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;decodeStr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GMSm2Utils&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;decodeWithASN1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ctext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// åŸå§‹å¯†æ–‡(C1C3C2 ç›´æ¥æ‹¼æ¥)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dCtext&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&quot;D4F1B32E29501E9444467F9E2E51361E91F5EC0B96F33494E550829F00CCB5B7044283DF7621B29CEB7F648BB47A3CBFFE9747E4D2BD4744C9DA1D68122343D645F6AB5422716393953B58E38D9032B7A1D8762BB816F26A835177442D282CD2629F386A7776&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// å¯¹ C1C3C2 ç›´æ¥æ‹¼æ¥çš„åŸå§‹å¯†æ–‡ ASN1 ç¼–ç &lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encodeStr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GMSm2Utils&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;encodeWithASN1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dCtext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;ç”Ÿæˆå…¬ç§é’¥&quot;&gt;ç”Ÿæˆå…¬ç§é’¥&lt;/h3&gt;

&lt;p&gt;åŸºäº sm2 æ¨èæ›²çº¿ï¼ˆç´ æ•°åŸŸ 256 ä½æ¤­åœ†æ›²çº¿ï¼‰ï¼Œç”Ÿæˆå…¬ç§é’¥ã€‚&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// ç”Ÿæˆå…¬ç§é’¥å¯¹ï¼Œæ•°ç»„å…ƒç´  1 ä¸ºå…¬é’¥ï¼Œ2 ä¸ºç§é’¥&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newKey&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GMSm2Utils&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;createPublicAndPrivateKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// å…¬é’¥&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pubKey&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// ç§é’¥&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;priKey&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;å‚è€ƒ&quot;&gt;&lt;a id=&quot;6_0&quot;&gt;&lt;/a&gt;å‚è€ƒ&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;http://www.sca.gov.cn/sca/xwdt/2010-12/17/1002386/files/b791a9f908bb4803875ab6aeeb7b4e03.pdf&quot;&gt;SM2æ¤­åœ†æ›²çº¿å…¬é’¥å¯†ç ç®—æ³•&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.sca.gov.cn/sca/xwdt/2010-12/17/1002386/files/b965ce832cc34bc191cb1cde446b860d.pdf&quot;&gt;SM2æ¤­åœ†æ›²çº¿å…¬é’¥å¯†ç ç®—æ³•æ¨èæ›²çº¿å‚æ•°&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://blog.wandoer.com/note/eccelliptic-curves-cryptography-%E6%A4%AD%E5%9C%86%E6%9B%B2%E7%BA%BF%E5%8A%A0%E5%AF%86%E5%8E%9F%E7%90%86.htm&quot;&gt;æ¤­åœ†æ›²çº¿åŠ å¯†åŸç†&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E6%A4%AD%E5%9C%86%E6%9B%B2%E7%BA%BF%E5%AF%86%E7%A0%81%E5%AD%A6&quot;&gt;æ¤­åœ†æ›²çº¿å¯†ç å­¦&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;å…¶ä»–&quot;&gt;å…¶ä»–&lt;/h2&gt;

&lt;p&gt;å¦‚æœæ‚¨è§‰å¾—æœ‰æ‰€å¸®åŠ©ï¼Œè¯·åœ¨ &lt;a href=&quot;https://github.com/muzipiao/GMObjC&quot;&gt;GitHub GMObjC&lt;/a&gt; ä¸Šèµä¸ªStar â­ï¸ï¼Œæ‚¨çš„é¼“åŠ±æ˜¯æˆ‘å‰è¿›çš„åŠ¨åŠ›ã€‚&lt;/p&gt;
</description>
        <pubDate>Thu, 08 Aug 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/08/iOS-%E4%BD%BF%E7%94%A8-SM2-SM4-%E5%8A%A0%E8%A7%A3%E5%AF%86-SM2-%E7%AD%BE%E5%90%8D%E9%AA%8C%E7%AD%BE%E5%8F%8A-SM3-%E6%91%98%E8%A6%81/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/08/iOS-%E4%BD%BF%E7%94%A8-SM2-SM4-%E5%8A%A0%E8%A7%A3%E5%AF%86-SM2-%E7%AD%BE%E5%90%8D%E9%AA%8C%E7%AD%BE%E5%8F%8A-SM3-%E6%91%98%E8%A6%81/</guid>
        
        <category>iOS</category>
        
        
      </item>
    
      <item>
        <title>iOS å¦‚ä½•å‡†ç¡®æ˜¾ç¤ºè§’æ ‡</title>
        <description>&lt;h2 id=&quot;æœ¬åœ°è®¾ç½®è§’æ ‡&quot;&gt;æœ¬åœ°è®¾ç½®è§’æ ‡&lt;/h2&gt;

&lt;p&gt;iOS æ˜¾ç¤ºè§’æ ‡å¾ˆå®¹æ˜“ï¼Œåœ¨ App ä¸­ä»»æ„åœ°æ–¹è°ƒç”¨å¦‚ä¸‹æ–¹æ³•éƒ½å¯è®¾ç½®ï¼Œæ ¹æ®è‡ªå·±çš„éœ€è¦è®¾å®šå³å¯ã€‚&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// æ˜¾ç¤ºè§’æ ‡ï¼Œä¼ å…¥å¾…æ˜¾ç¤ºè§’æ ‡çš„æ•°å­—&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIApplication&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;sharedApplication&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setApplicationIconBadgeNumber&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// æ¸…é™¤è§’æ ‡ï¼Œä¼ å…¥ 0 å³å¯&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIApplication&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;sharedApplication&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setApplicationIconBadgeNumber&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;ä¸ç²¾ç¡®æ˜¾ç¤ºè§’æ ‡&quot;&gt;ä¸ç²¾ç¡®æ˜¾ç¤ºè§’æ ‡&lt;/h2&gt;

&lt;p&gt;æ™®é€š App å¯¹è§’æ ‡æ•°å­—è¦æ±‚æ²¡é‚£ä¹ˆé«˜ï¼ŒæœåŠ¡ç«¯æˆ–æ§åˆ¶å°æ¨é€æ—¶ï¼Œæ€»æ˜¯å°†æ¨é€ä¸ªæ•°è®¾ç½®ä¸º 1ï¼Œç”¨æˆ·ç‚¹å‡»è¿›å…¥ App æ—¶æ¸…é™¤è§’æ ‡ã€‚è¿™æ ·ç®€å•çš„åšæ³•ï¼Œèƒ½æ»¡è¶³å¤§éƒ¨åˆ† App çš„éœ€æ±‚ã€‚&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// è¿›å…¥ App æ—¶æ¸…é™¤è§’æ ‡&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIApplication&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;application&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;didFinishLaunchingWithOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;launchOptions&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;applicationIconBadgeNumber&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// ä»åå°è¿›å…¥å‰å°æ—¶æ¸…é™¤è§’æ ‡&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;applicationWillEnterForeground&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIApplication&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;application&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;applicationIconBadgeNumber&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™æ ·åšçš„ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œæ”¶åˆ°å¤šæ¡æ¨é€è§’æ ‡æ•°é‡æ—¶è§’æ ‡æ°¸è¿œæ˜¾ç¤º 1ï¼Œç”¨æˆ·è¿›å…¥ App ä¸ç®¡æ˜¯å¦ç‚¹å‡»æ¨é€çš„æ¶ˆæ¯ï¼Œéƒ½æ¶ˆé™¤è§’æ ‡ã€‚å¦‚æœè¦æ±‚è¾ƒé«˜ï¼Œå¦‚ä½•åšåˆ°ç²¾ç¡®æ˜¾ç¤ºè§’æ ‡å‘¢ï¼Ÿ&lt;/p&gt;

&lt;h2 id=&quot;ç²¾ç¡®æ˜¾ç¤ºè§’æ ‡&quot;&gt;ç²¾ç¡®æ˜¾ç¤ºè§’æ ‡&lt;/h2&gt;

&lt;p&gt;é¦–å…ˆæˆ‘ä»¬è¦äº†è§£ä¸€ä¸‹ï¼Œæ‰‹æœºæ”¶åˆ°æ¨é€æ¶ˆæ¯æ˜¯å¦‚ä½•æ˜¾ç¤ºè§’æ ‡æ•°é‡çš„ã€‚å¦‚ä¸‹æ‰€ç¤ºAPNS æŒ‰ç…§æ­¤æ ¼å¼æ¨é€åˆ°æ‰‹æœºï¼Œå®¢æˆ·ç«¯æ˜¾ç¤ºçš„è§’æ ‡æ•°é‡ä¸ºæ¨é€çš„ badge æ•°å€¼ã€‚æ‰‹æœºæ”¶åˆ°æ¨é€æ¶ˆæ¯ï¼Œbadge çš„å€¼æ˜¯å¤šå°‘ï¼Œè§’æ ‡æ˜¾ç¤ºçš„ä¸ªæ•°å°±æ˜¯å¤šå°‘ï¼ˆæœ€å¤§ 99999ï¼‰ã€‚&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;aps&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;alert&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;è¿™é‡Œæ˜¯æ¨é€æ˜¾ç¤ºçš„æ¶ˆæ¯ä¸²&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;badge&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;sound&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;default&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;custom&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://www.baidu.com&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æ‰€ä»¥ï¼Œæˆ‘ä»¬æƒ³è¦ç²¾å‡†æ˜¾ç¤ºè§’æ ‡æ•°é‡ï¼Œå¿…é¡»åœ¨å®¢æˆ·ç«¯è¯»å–æ¶ˆæ¯åï¼Œå®¢æˆ·ç«¯ä¸ŠæŠ¥ç”¨æˆ·å·²è¯»æ¶ˆæ¯ï¼Œå°†æ¨é€æ¶ˆæ¯é˜…è¯»æƒ…å†µåŒæ­¥åˆ°æœåŠ¡å™¨ï¼Œå¦‚æå…‰æˆ–è€…ä¸ªæ¨ã€‚&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// æå…‰å’Œä¸ªæ¨åŒæ­¥åˆ°æœåŠ¡å™¨çš„ API ç›¸åŒï¼Œè°ƒç”¨å¯åŒæ­¥åˆ°æœåŠ¡å™¨&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;setBadge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// value å–å€¼èŒƒå›´ï¼š[0,99999]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;resetBadge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;          &lt;span class=&quot;c1&quot;&gt;// ç›¸å½“äº [setBadge:0]ï¼Œæ¸…ç©ºè§’æ ‡&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å‡è®¾æœåŠ¡å™¨æ¨é€äº† 6 æ¡æ¶ˆæ¯ï¼Œå®¢æˆ·ç‚¹å‡»é˜…è¯»äº† 2 æ¡ï¼Œé‚£æˆ‘ä»¬åœ¨è®¾ç½® App è§’æ ‡çš„åŒæ—¶ï¼Œå°†æœªè¯»ä¸ªæ•°åŒæ­¥åˆ°æœåŠ¡å™¨&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// è°ƒç”¨ç³»ç»Ÿæ–¹æ³•è®¾ç½® App æ˜¾ç¤ºçš„è§’æ ‡ä¸ªæ•° 4&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIApplication&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;sharedApplication&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setApplicationIconBadgeNumber&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// ä¸ªæ¨ SDK åŒæ­¥åˆ°æœåŠ¡å™¨&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GeTuiSdk&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setBadge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// æå…‰ SDK åŒæ­¥åˆ°æœåŠ¡å™¨&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;JPush&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setBadge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;å‚è€ƒæ–‡æ¡£&quot;&gt;å‚è€ƒæ–‡æ¡£&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://community.jiguang.cn/t/topic/13924&quot;&gt;æå…‰æ–‡æ¡£ - è§’æ ‡æ§åˆ¶&lt;/a&gt;
&lt;a href=&quot;http://docs.getui.com/getui/mobile/ios/api/&quot;&gt;ä¸ªæ¨æ–‡æ¡£ - è§’æ ‡æ§åˆ¶&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Tue, 25 Jun 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/06/iOS-%E5%A6%82%E4%BD%95%E5%87%86%E7%A1%AE%E6%98%BE%E7%A4%BA%E8%A7%92%E6%A0%87/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/06/iOS-%E5%A6%82%E4%BD%95%E5%87%86%E7%A1%AE%E6%98%BE%E7%A4%BA%E8%A7%92%E6%A0%87/</guid>
        
        <category>iOS</category>
        
        
      </item>
    
      <item>
        <title>è‡ªå»ºå±€åŸŸç½‘ OTA æœåŠ¡å™¨</title>
        <description>&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#1_0&quot;&gt;ç¬¬ä¸€æ­¥ ç¼–è¾‘å‰çš„å‡†å¤‡&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2_0&quot;&gt;ç¬¬äºŒæ­¥ é…ç½®HttpæœåŠ¡&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3_0&quot;&gt;ç¬¬ä¸‰æ­¥ ç”Ÿæˆè‡ªç­¾åè¯ä¹¦&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#4_0&quot;&gt;ç¬¬å››æ­¥ é…ç½®HTTPSæœåŠ¡&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#5_0&quot;&gt;ç¬¬äº”æ­¥ æ”¾ç½®èµ„æºæ–‡ä»¶&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#6_0&quot;&gt;å‚è€ƒé“¾æ¥&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;ç¬¬ä¸€æ­¥-ç¼–è¾‘å‰çš„å‡†å¤‡&quot;&gt;&lt;a id=&quot;1_0&quot;&gt;&lt;/a&gt;ç¬¬ä¸€æ­¥ ç¼–è¾‘å‰çš„å‡†å¤‡&lt;/h2&gt;

&lt;h4 id=&quot;11-macè‡ªå¸¦-apache-æœåŠ¡å™¨&quot;&gt;1.1 Macè‡ªå¸¦ Apache æœåŠ¡å™¨&lt;/h4&gt;

&lt;p&gt;Mac è‡ªå¸¦ Apache æœåŠ¡å™¨ï¼Œæˆ‘ä»¬åœ¨ç»ˆç«¯è¾“å…¥&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; sudo apachectl -k start &lt;/code&gt;æ‰“å¼€ç½‘é¡µè¾“å…¥&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; localhost&lt;/code&gt;ï¼Œå‘ç°ç½‘é¡µä¼šæ˜¾ç¤ºå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;h5 id=&quot;it-works&quot;&gt;It works!&lt;/h5&gt;

&lt;p&gt;Apache æœåŠ¡å™¨å¯åŠ¨æˆåŠŸã€‚&lt;/p&gt;

&lt;h4 id=&quot;12-ä¿®æ”¹ç³»ç»Ÿæ–‡ä»¶å‰å…ˆå¤‡ä»½&quot;&gt;1.2 ä¿®æ”¹ç³»ç»Ÿæ–‡ä»¶å‰å…ˆå¤‡ä»½&lt;/h4&gt;

&lt;p&gt;ä¾‹å¦‚éœ€è¦ä¿®æ”¹&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; /etc/apache2 &lt;/code&gt;æ–‡ä»¶å¤¹ä¸‹ http.conf æ–‡ä»¶&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;åˆ‡æ¢å·¥ä½œç›®å½•ä¸‹ï¼š&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;` cd /etc/apache2 `&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;å¤‡ä»½æ–‡ä»¶ï¼Œåªéœ€è¦æ‰§è¡Œä¸€æ¬¡ï¼š&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;` sudo cp httpd.conf httpd.conf.bak `&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;å¦‚æœæ“ä½œå‡ºç°é”™è¯¯ï¼å¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼Œæ¢å¤å¤‡ä»½çš„ httpd.conf æ–‡ä»¶ï¼š&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;` sudo cp httpd.conf.bak httpd.conf `&lt;/p&gt;

&lt;h4 id=&quot;13-é€šè¿‡-xcode-æˆ–è€…-vim-ä¿®æ”¹ç³»ç»Ÿæ–‡ä»¶&quot;&gt;1.3 é€šè¿‡ Xcode æˆ–è€… vim ä¿®æ”¹ç³»ç»Ÿæ–‡ä»¶&lt;/h4&gt;

&lt;p&gt;é€šè¿‡ Xcode ä¿®æ”¹æ¯”è¾ƒç®€å•ï¼Œå°†æ–‡ä»¶è„±å‡ºåˆ°æ¡Œé¢ä¸€ä»½ï¼Œä¿®æ”¹åæ‹–å›åŸæ¥çš„æ–‡ä»¶å¤¹è¦†ç›–å³å¯ã€‚&lt;/p&gt;

&lt;p&gt;æ³¨æ„çš„æ˜¯ï¼Œåœ¨&lt;strong&gt;ç³»ç»Ÿç›®å½•ä¸‹æ˜¯ä¸å¯ä»¥ç›´æ¥ç”¨ Xcode ä¿®æ”¹&lt;/strong&gt;çš„ï¼Œå¯å°†æ–‡ä»¶å¤åˆ¶åˆ°æ¡Œé¢ä¸Šï¼Œç”¨ Xcode æ‰“å¼€ä¿®æ”¹ï¼Œç„¶åæ‹–å…¥ç³»ç»Ÿç›®å½•ä¸‹è¦†ç›–å³å¯ã€‚&lt;/p&gt;

&lt;p&gt;é€šè¿‡ vim ä¿®æ”¹æ–‡ä»¶ï¼Œå¯ç›´æ¥ä¿®æ”¹ç³»ç»Ÿæ–‡ä»¶ï¼Œä¿®æ”¹æ¯”è¾ƒæ–¹ä¾¿ã€‚ä»¥ä¸‹ä¿®æ”¹ç³»ç»Ÿé…ç½®æ–‡ä»¶ç”¨åˆ°vimï¼Œå¦‚æœä¸ä¹ æƒ¯ä½¿ç”¨vimä¿®æ”¹ï¼Œå¯ä½¿ç”¨ Xcode ç¼–è¾‘ä¿®æ”¹ã€‚&lt;/p&gt;

&lt;h4 id=&quot;14-vim-ç®€å•æ“ä½œ&quot;&gt;1.4 vim ç®€å•æ“ä½œ&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;ä¾‹å¦‚å½“å‰ç›®å½•ä¸‹æœ‰ä¸€ä¸ª httpd.conf æ–‡ä»¶ï¼Œéœ€è¦ä¿®æ”¹ç¬¬ 100 è¡Œä¸º abcdefã€‚&lt;/li&gt;
  &lt;li&gt;è¾“å…¥å‘½ä»¤&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; sudo vim httpd.conf &lt;/code&gt;ã€‚&lt;/li&gt;
  &lt;li&gt;é¼ æ ‡æ»šåŠ¨æˆ–è€…æŒ‰ä¸Šä¸‹é”®å…‰æ ‡ç§»åŠ¨åˆ°ç¬¬ 100 è¡Œï¼ŒæŒ‰ i é”®è¿›å…¥ç¼–è¾‘æ¨¡å¼
å°†ç¬¬ 100 è¡Œå†…å®¹åˆ é™¤å¹¶æ›¿æ¢ä¸º abcdef ã€‚&lt;/li&gt;
  &lt;li&gt;æŒ‰&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; esc &lt;/code&gt;é”®é€€å‡ºç¼–è¾‘ã€‚&lt;/li&gt;
  &lt;li&gt;è¾“å…¥&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; :wq &lt;/code&gt;é€€å‡ºå¹¶ä¿å­˜ï¼›å¦‚æœç¼–è¾‘é”™è¯¯è¾“å…¥&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:q! &lt;/code&gt;ä¸ä¿å­˜æ–‡ä»¶ï¼Œå¼ºåˆ¶é€€å‡ºviã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;ç¬¬äºŒæ­¥-é…ç½®httpæœåŠ¡&quot;&gt;&lt;a id=&quot;2_0&quot;&gt;&lt;/a&gt;ç¬¬äºŒæ­¥ é…ç½®HttpæœåŠ¡&lt;/h2&gt;

&lt;h4 id=&quot;21-åˆ›å»º-web-æ–‡ä»¶å¤¹&quot;&gt;2.1 åˆ›å»º web æ–‡ä»¶å¤¹&lt;/h4&gt;

&lt;p&gt;æˆ‘ä»¬åœ¨å½“å‰ç”¨æˆ·æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªwebæ–‡ä»¶å¤¹ï¼Œç„¶åæ”¾å…¥ä¸€äº›æ–‡ä»¶ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/ota/ota2.1.png&quot; alt=&quot;web æ–‡ä»¶å¤¹&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;22-ç¼–è¾‘-httpconf-æ–‡ä»¶&quot;&gt;2.2 ç¼–è¾‘ http.conf æ–‡ä»¶&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;åˆ‡æ¢å·¥ä½œç›®å½•ä¸‹ï¼š&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; cd /etc/apache2 &lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;å¤‡ä»½æ–‡ä»¶ï¼š&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; sudo cp httpd.conf httpd.conf.bak &lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ç”¨vimç¼–è¾‘httpd.confæ–‡ä»¶ï¼š&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; sudo vim httpd.conf &lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;å°†ä¸‹é¢è·¯å¾„æ›´æ”¹ä¸ºä½ è‡ªå·±webç½‘é¡µè·¯å¾„ï¼ˆçº¦245è¡Œï¼‰&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;DocumentRoot &lt;span class=&quot;s2&quot;&gt;&quot;/Library/WebServer/Documents&quot;&lt;/span&gt;
&amp;lt;Directory &lt;span class=&quot;s2&quot;&gt;&quot;/Library/WebServer/Documentsâ€&amp;gt;

ä¿®æ”¹ä¸ºæˆ‘å½“å‰ç”¨æˆ·ç›®å½•ä¸‹å»ºç«‹çš„ä¸€ä¸ª web æ–‡ä»¶å¤¹

DocumentRoot &quot;&lt;/span&gt;/Users/lf/web&lt;span class=&quot;s2&quot;&gt;&quot;
&amp;lt;Directory &quot;&lt;/span&gt;/Users/lf/webâ€&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;ä¸ºäº†ä¾¿äºæµè§ˆ web æ–‡ä»¶å¤¹ï¼Œæ·»åŠ  Indexes å­—æ®µ&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Options FollowSymLinks Multiviews

ä¿®æ”¹ä¸º

Options Indexes FollowSymLinks Multiviews
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/ota/ota2.2.5.png&quot; alt=&quot;ä¿®æ”¹httpd&quot; /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;å°†ä¸‹é¢çš„#å·æ³¨é‡Šå»æ‰ï¼Œå¼€å¯PHPï¼ˆçº¦177è¡Œï¼‰&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#LoadModule php7_module libexec/apache2/libphp7.so&lt;/span&gt;

ä¿®æ”¹ä¸º

LoadModule php7_module libexec/apache2/libphp7.so

è¾ƒæ—§çš„ç³»ç»Ÿä¸ºï¼ˆ#LoadModule php5_module libexec/apache2/libphp5.soï¼‰
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/ota/ota2.2.6.png&quot; alt=&quot;å¼€å¯PHP&quot; /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;ç„¶åæŒ‰ ESC é”®é€€å‡ºç¼–è¾‘ï¼Œè¾“å…¥&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; :wq &lt;/code&gt;ä¿å­˜é€€å‡ºã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ç»ˆç«¯ä¸­è¾“å…¥&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; sudo apachectl -k restart &lt;/code&gt;é‡å¯ Apache æœåŠ¡å™¨ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;å¼€å¯ apache æœåŠ¡å™¨.æ‰“å¼€æµè§ˆå™¨,æœç´¢æ¡†ä¸­è¾“å…¥&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; 127.0.0.1 &lt;/code&gt;æˆ–è€…&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; localhost &lt;/code&gt;å°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä¹‹å‰æ·»åŠ çš„ç½‘ç»œèµ„æºã€‚&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/ota/ota2.2.9.png&quot; alt=&quot;å¼€å¯HTTPæœåŠ¡æˆåŠŸ&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;23-apache-å¸¸ç”¨æ“ä½œå‘½ä»¤&quot;&gt;2.3 Apache å¸¸ç”¨æ“ä½œå‘½ä»¤&lt;/h4&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# å¯åŠ¨ apache æœåŠ¡å™¨&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apachectl &lt;span class=&quot;nt&quot;&gt;-k&lt;/span&gt; start

&lt;span class=&quot;c&quot;&gt;# é‡æ–°å¯åŠ¨ apache æœåŠ¡å™¨&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apachectl &lt;span class=&quot;nt&quot;&gt;-k&lt;/span&gt; restart

&lt;span class=&quot;c&quot;&gt;# å…³é—­ apache æœåŠ¡å™¨&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apachectl &lt;span class=&quot;nt&quot;&gt;-k&lt;/span&gt; stop
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;24-é‡å¯æ—¶æŠ¥é”™&quot;&gt;2.4 é‡å¯æ—¶æŠ¥é”™&lt;/h4&gt;

&lt;p&gt;é‡å¯çš„æ—¶å€™å‘ç°æŠ¥é”™ï¼Œä½†ä¸å½±å“ä½¿ç”¨&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/ota/ota2.4.png&quot; alt=&quot;ServerNameé”™è¯¯&quot; /&gt;&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;AH00558: httpd: Could not reliably determine the server&apos;s fully

qualified domain name, using LFdeMacBook-Pro.local. Set the

&apos;ServerName&apos; directive globally to suppress this message
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¦‚æœæƒ³è§£å†³æ­¤æŠ¥é”™ï¼Œå¯å†æ¬¡ç¼–è¾‘ httpd.conf æ–‡ä»¶&lt;/p&gt;

&lt;p&gt;` sudo vim httpd.conf `&lt;/p&gt;

&lt;p&gt;å°†ä¸‹é¢çš„#å·æ³¨é‡Šå»æ‰ï¼Œå¹¶ä¿®æ”¹ï¼ˆçº¦221è¡Œï¼‰&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#ServerName www.example.com:80&lt;/span&gt;

ä¿®æ”¹ä¸º

ServerName localhost:80
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç„¶åç»ˆç«¯è¾“å…¥ä¸‹é¢æŒ‡ä»¤é‡å¯å³å¯ã€‚&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apachectl &lt;span class=&quot;nt&quot;&gt;-k&lt;/span&gt; restart
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;ç¬¬ä¸‰æ­¥-ç”Ÿæˆè‡ªç­¾åè¯ä¹¦&quot;&gt;&lt;a id=&quot;3_0&quot;&gt;&lt;/a&gt;ç¬¬ä¸‰æ­¥ ç”Ÿæˆè‡ªç­¾åè¯ä¹¦&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;iOS7.1 ä»¥åï¼Œ Apple ä¸å†æ”¯æŒ HTTP æ–¹å¼çš„ OTA ï¼Œæ‰€ä»¥éœ€è¦ä¸º Apache å¼€å¯ HTTPS æœåŠ¡ï¼Œå¹¶åˆ©ç”¨ OpenSSL åˆ¶ä½œè‡ªç­¾åè¯ä¹¦ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&quot;31-ç”ŸæˆæœåŠ¡å™¨ç§é’¥-serverkey&quot;&gt;3.1 ç”ŸæˆæœåŠ¡å™¨ç§é’¥ server.key&lt;/h4&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo mkdir&lt;/span&gt; /private/etc/apache2/ssl 

&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; /private/etc/apache2/ssl

&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;openssl genrsa &lt;span class=&quot;nt&quot;&gt;-out&lt;/span&gt; server.key 1024
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç”Ÿæˆå¦‚ä¸‹æ‰€ç¤ºæ–‡ä»¶&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/ota/ota3.1.png&quot; alt=&quot;æœåŠ¡å™¨ç§é’¥&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;32-ç”Ÿæˆç­¾ç½²ç”³è¯·&quot;&gt;3.2 ç”Ÿæˆç­¾ç½²ç”³è¯·&lt;/h4&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;openssl req &lt;span class=&quot;nt&quot;&gt;-new&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-key&lt;/span&gt; server.key &lt;span class=&quot;nt&quot;&gt;-out&lt;/span&gt; server.csr
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æ³¨æ„ï¼šéœ€è¦å®Œæ•´å¡«å†™å„é¡¹ä¿¡æ¯ï¼Œæ³¨æ„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; Common Name &lt;/code&gt;å¿…é¡»æ˜¯æœåŠ¡å™¨ ip æˆ–åŸŸåï¼Œå…¶ä»–ä¿¡æ¯å¯ä»¥éšæ„å¡«å†™ã€‚ä¾‹å¦‚æˆ‘éœ€è¦æŠŠ ipa å®‰è£…åŒ…æ”¾åœ¨ 192.168.1.188 çš„å†…ç½‘æœåŠ¡å™¨ä¸Šï¼Œåˆ™&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; Common Name &lt;/code&gt;å°±å¡«å†™ 192.168.1.188 ã€‚å¦‚æœè¿™ä¸€æ­¥æ¼å¡«ä¿¡æ¯ï¼Œå¯èƒ½ä¼šå¯¼è‡´æœ€åç”Ÿæˆçš„ ca æ–‡ä»¶æ˜¯ç©ºçš„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/ota/ota3.2.png&quot; alt=&quot;ç”Ÿæˆserver.csr&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;33-ç”Ÿæˆ-ca-ç§é’¥cacrt&quot;&gt;3.3 ç”Ÿæˆ CA ç§é’¥ca.crt&lt;/h4&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;openssl req  &lt;span class=&quot;nt&quot;&gt;-new&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-x509&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-days&lt;/span&gt; 365 &lt;span class=&quot;nt&quot;&gt;-key&lt;/span&gt; server.key &lt;span class=&quot;nt&quot;&gt;-out&lt;/span&gt; ca.crt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¡«å†™ä¿¡æ¯å’Œä¸Šé¢çš„å¡«å†™çš„ä¸€æ ·å³å¯ï¼Œæ³¨æ„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; Common Name &lt;/code&gt;å¿…é¡»å¡«å†™ï¼Œè¿™é‡Œè¿˜æ˜¯å¡«å†™192.168.1.188å³å¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/ota/ota3.3.png&quot; alt=&quot;ç”Ÿæˆca.crt&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;34-åˆ›å»ºæ–‡ä»¶å’Œæ–‡ä»¶å¤¹&quot;&gt;3.4 åˆ›å»ºæ–‡ä»¶å’Œæ–‡ä»¶å¤¹&lt;/h4&gt;

&lt;p&gt;åœ¨ ssl ç›®å½•ä¸‹åˆ›å»º demoCA æ–‡ä»¶å¤¹ï¼Œç„¶åè¿›å…¥ demoCA ï¼Œåˆ›å»ºä¸€ä¸ª index.txt å’Œ serialæ–‡ä»¶ï¼Œindex.txt ä¸ºç©ºï¼Œ serial å†…å®¹ä¸º01ï¼Œç„¶ååœ¨ demoCA ä¸­å†åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ newcerts&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo mkdir &lt;/span&gt;demoCA &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;demoCA

&lt;span class=&quot;nb&quot;&gt;sudo mkdir &lt;/span&gt;newcerts

&lt;span class=&quot;nb&quot;&gt;sudo touch &lt;/span&gt;index.txt

&lt;span class=&quot;nb&quot;&gt;sudo touch &lt;/span&gt;serial
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä½¿ç”¨ Xcode æˆ–è€… vim ç¼–è¾‘ serial æ–‡ä»¶ï¼Œç¬¬ä¸€è¡Œå†™å…¥ 01 ä¿å­˜å³å¯ã€‚&lt;/p&gt;

&lt;h4 id=&quot;35-ç­¾åç”Ÿæˆservercrt&quot;&gt;3.5 ç­¾åç”Ÿæˆserver.crt&lt;/h4&gt;

&lt;p&gt;æ‰§è¡Œå‘½ä»¤ï¼Œè¿”å›åˆ°sslæ–‡ä»¶å¤¹ä¸‹é¢&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; /private/etc/apache2/ssl
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç„¶åæ‰§è¡Œå‘½ä»¤ï¼Œç”¨caè¿›è¡Œç­¾åç”Ÿæˆserver.crt&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;openssl ca &lt;span class=&quot;nt&quot;&gt;-in&lt;/span&gt; server.csr &lt;span class=&quot;nt&quot;&gt;-out&lt;/span&gt; server.crt &lt;span class=&quot;nt&quot;&gt;-cert&lt;/span&gt; ca.crt &lt;span class=&quot;nt&quot;&gt;-keyfile&lt;/span&gt; server.key
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™ä¸€æ­¥å¯èƒ½ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Using configuration from /private/etc/ssl/openssl.cnf

variable lookup failed for ca::default_ca140736040362952:

error:0E06D06C:configuration file routines:NCONF_get_string:

no value:/BuildRoot/Library/Caches/com.apple.xbs/Sources/libressl/

libressl-22.50.2/libressl/crypto/conf/conf_lib.c:323:group=ca name=default_ca
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™æ˜¯ç”±äº&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; /private/etc/ssl/ &lt;/code&gt;æ–‡ä»¶å¤¹ä¸‹ç¼ºå°‘ openssl.cnf çš„é—®é¢˜ï¼Œè§£å†³åŠæ³•æ˜¯æ‹·è´ä¸€ä»½ï¼Œè¾“å…¥å‘½ä»¤&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cp&lt;/span&gt; /usr/local/etc/openssl/openssl.cnf /private/etc/ssl/openssl.cnf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä½¿ç”¨Xcodeæˆ–è€…vimä¿®æ”¹&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; /private/etc/ssl/openssl.cnf &lt;/code&gt;æ–‡ä»¶ï¼Œè¿™é‡Œä½¿ç”¨vimç›´æ¥ä¿®æ”¹&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;vim /private/etc/ssl/openssl.cnf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;dir&lt;/span&gt;        &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ./demoCA        &lt;span class=&quot;c&quot;&gt;# Where everything is kept&lt;/span&gt;
ä¿®æ”¹ä¸ºå½“å‰ä½ çš„demoCAè·¯å¾„
&lt;span class=&quot;nb&quot;&gt;dir&lt;/span&gt;        &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;  /private/etc/apache2/ssl/demoCA
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¿®æ”¹å®Œæˆåå†æ‰§è¡Œå‘½ä»¤&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;openssl ca &lt;span class=&quot;nt&quot;&gt;-in&lt;/span&gt; server.csr &lt;span class=&quot;nt&quot;&gt;-out&lt;/span&gt; server.crt &lt;span class=&quot;nt&quot;&gt;-cert&lt;/span&gt; ca.crt &lt;span class=&quot;nt&quot;&gt;-keyfile&lt;/span&gt; server.key
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¼šæç¤ºæœ‰æ•ˆæœŸå’Œç”Ÿæˆè¯ä¹¦ï¼Œéƒ½è¾“å…¥yå³å¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/ota/ota3.5.1.png&quot; alt=&quot;ç”Ÿæˆè¯ä¹¦æˆåŠŸæç¤º&quot; /&gt;&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Certificate is to be certified until Nov 10 06:39:36 2019 GMT (365 days)
Sign the certificate? [y/n]:y
ï¼ˆç¿»è¯‘ï¼‰è¯ä¹¦æœ‰æ•ˆæœŸè‡³11æœˆ10æ—¥06:39:36 2019 GMT(365å¤©)
1 out of 1 certificate requests certified, commit? [y/n]y
ç­¾ç½²çš„è¯ä¹¦å—?
ï¼ˆç¿»è¯‘ï¼‰1 / 1çš„è¯ä¹¦è¯·æ±‚è¢«è®¤è¯ï¼Œæäº¤?
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æ­¤æ—¶æˆ‘ä»¬çœ‹åˆ° HTTPS è¯ä¹¦å·²ç»ç”Ÿæˆå®Œæˆã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/ota/ota3.5.2.png&quot; alt=&quot;è¯ä¹¦åˆ—è¡¨&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ç¬¬å››æ­¥-é…ç½®httpsæœåŠ¡&quot;&gt;&lt;a id=&quot;4_0&quot;&gt;&lt;/a&gt;ç¬¬å››æ­¥ é…ç½®HTTPSæœåŠ¡&lt;/h2&gt;

&lt;h4 id=&quot;41-ç¼–è¾‘-httpdconf-æ–‡ä»¶&quot;&gt;4.1 ç¼–è¾‘ httpd.conf æ–‡ä»¶&lt;/h4&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;vim /private/etc/apache2/httpd.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æŠŠä»¥ä¸‹å››è¡Œä»£ç å‰å¤´çš„æ³¨é‡Šå»æ‰&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;LoadModule ssl_module libexec/apache2/mod_ssl.so

LoadModule socache_shmcb_module

libexec/apache2/mod_socache_shmcb.so

Include /private/etc/apache2/extra/httpd-ssl.conf

Include /private/etc/apache2/extra/httpd-vhosts.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æ³¨æ„ï¼šå¦‚æœä½ çš„ httpd.conf ä¸­ç¼ºå°‘äº†æŸè¡Œï¼Œä½ å¯ä»¥è‡ªè¡Œæ·»åŠ è¿›å»å³å¯ã€‚&lt;/p&gt;

&lt;h4 id=&quot;42-ç¼–è¾‘-httpd-sslconf-æ–‡ä»¶&quot;&gt;4.2 ç¼–è¾‘ httpd-ssl.conf æ–‡ä»¶&lt;/h4&gt;

&lt;p&gt;ç¼–è¾‘å‰å…ˆå¤‡ä»½ httpd-ssl.conf æ–‡ä»¶&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; /private/etc/apache2/extra/ &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sudo cp &lt;/span&gt;httpd-ssl.conf httpd-ssl.conf.bak

&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;vim /private/etc/apache2/extra/httpd-ssl.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æŠŠä»¥ä¸‹ä¸¤è¡Œä»£ç çš„æ³¨é‡Šå»æ‰ï¼Œå¹¶ç¼–è¾‘ä¸ºä½ çš„è¯ä¹¦è·¯å¾„&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;SSLCertificateFile &quot;/private/etc/apache2/server.crt&quot;
SSLCertificateKeyFile &quot;/private/etc/apache2/server.key&quot;

ç„¶åä¿®æ”¹è·¯å¾„ï¼Œæ”¹æˆä½ çš„è¯ä¹¦æ–‡ä»¶è·¯å¾„

SSLCertificateFile &quot;/private/etc/apache2/ssl/server.crt&quot;
SSLCertificateKeyFile &quot;/private/etc/apache2/ssl/server.key&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;43-ç¼–è¾‘-httpd-vhostsconf-æ–‡ä»¶&quot;&gt;4.3 ç¼–è¾‘ httpd-vhosts.conf æ–‡ä»¶&lt;/h4&gt;

&lt;p&gt;ç¼–è¾‘å‰å…ˆå¤‡ä»½ httpd-vhosts.conf æ–‡ä»¶&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; /private/etc/apache2/extra/ &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sudo cp &lt;/span&gt;httpd-vhosts.conf httpd-vhosts.conf.bak

&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;vim /private/etc/apache2/extra/httpd-vhosts.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å°† &amp;lt;VirtualHost *:80&amp;gt; ä¸­çš„ç¬¬äºŒä¸ªä¿®æ”¹&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;VirtualHost *:80&amp;gt;
ServerAdmin 192.168.1.188
DocumentRoot &quot;/Users/lf/web&quot;
ServerName 192.168.1.188
ErrorLog &quot;/private/var/log/apache2/dummy-host2.example.com-error_log&quot;
CustomLog &quot;/private/var/log/apache2/dummy-host2.example.com-access_log&quot; common
&amp;lt;/VirtualHost&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç„¶ååœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ  443 ç«¯å£æœåŠ¡&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;VirtualHost *:443&amp;gt; 
SSLEngine on 
SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP:+eNULL
SSLCertificateFile /private/etc/apache2/ssl/server.crt
SSLCertificateKeyFile /private/etc/apache2/ssl/server.key
ServerName 192.168.1.188
DocumentRoot &quot;/Users/lf/web&quot;
&amp;lt;/VirtualHost&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æ³¨æ„ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;SSLCertificateFile å¡«å†™ç”Ÿæˆçš„ server.crt&lt;/li&gt;
  &lt;li&gt;SSLCertificateKeyFile å¡«å†™ç”Ÿæˆçš„ server.key&lt;/li&gt;
  &lt;li&gt;ServerName å¡«å†™ä½ çš„ ip&lt;/li&gt;
  &lt;li&gt;DocumentRoot å¡«å†™ä½ çš„ç«™ç‚¹è·¯å¾„&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;44-æ£€æŸ¥-apache-é…ç½®&quot;&gt;4.4 æ£€æŸ¥ Apache é…ç½®&lt;/h4&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apachectl configtest
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¦‚æœå®ƒæç¤ºï¼š&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; Syntax OK &lt;/code&gt;ï¼Œé‚£å°±å®Œæˆ90%äº†ï¼Œå¦‚æœå®ƒæç¤ºæœ‰é”™ï¼Œé‚£å°±è¦æ ¹æ®é”™è¯¯æç¤ºè‡ªè¡Œè§£å†³äº†ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘åœ¨è¿™ä¸ªç¯èŠ‚é‡åˆ°äº†ä¸€ä¸ªé”™è¯¯&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;SSLSessionCache: &apos;shmcb&apos; session cachenot supported 
(known names: ). Maybe you need toload the appropriate
socache module (mod_socache_shmcb?).
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è§£å†³åŠæ³•å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;vim /private/etc/apache2/httpd.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç„¶åæŠŠä»¥ä¸‹ä»£ç çš„æ³¨é‡Šå»æ‰&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;LoadModule socache_shmcb_module libexec/apache2/mod_socache_shmcb.so
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å»æ‰æ³¨é‡Šåï¼Œä¿å­˜ï¼Œé‡æ–°æ£€æŸ¥é…ç½®ï¼Œç›´åˆ°æˆåŠŸã€‚&lt;/p&gt;

&lt;p&gt;æ³¨æ„ï¼š
ä»ç½‘ä¸ŠæŸ¥æ‰¾çš„è·¯å¾„å¯èƒ½æ˜¯&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; LoadModule socache_shmcb_module modules/mod_socache_shmcb.so &lt;/code&gt;ï¼Œ
ä½†æˆ‘çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œè·¯å¾„è·Ÿä¸Šè¿°çš„ä¸ä¸€è‡´ï¼Œä½†ç»“å°¾éƒ½æ˜¯&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; mod_socache_shmcb.so &lt;/code&gt;å°±å¯¹äº†ã€‚&lt;/p&gt;

&lt;p&gt;è§£å†³æ–¹æ¡ˆæ˜¯å‚è€ƒè¿™ç¯‡æ–‡ç« çš„&lt;a href=&quot;http://stackoverflow.com/questions/20127138/apache-2-4-configuration-for-ssl-not-working&quot;&gt;stackoverflowé—®ç­”&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;é‡å¯ Apache æœåŠ¡&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; sudo apachectl -k restart &lt;/code&gt;ï¼Œ
è¿™æ ·å°±å¯ä»¥ç”¨ https è®¿é—®æœ¬åœ°æœåŠ¡å™¨äº†ã€‚&lt;/p&gt;

&lt;h2 id=&quot;ç¬¬äº”æ­¥-æ”¾ç½®èµ„æºæ–‡ä»¶&quot;&gt;&lt;a id=&quot;5_0&quot;&gt;&lt;/a&gt;ç¬¬äº”æ­¥ æ”¾ç½®èµ„æºæ–‡ä»¶&lt;/h2&gt;

&lt;h4 id=&quot;51-ç½‘ç«™èµ„æºæ–‡ä»¶&quot;&gt;5.1 ç½‘ç«™èµ„æºæ–‡ä»¶&lt;/h4&gt;

&lt;p&gt;å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; /Users/lf/web &lt;/code&gt;æ–‡ä»¶å¤¹ä¸‹æ”¾ç½®çš„èµ„æºå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/ota/ota5.1.png&quot; alt=&quot;èµ„æºæ–‡ä»¶å¤¹&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ–‡ä»¶å¤¹åç§°å¯ä»»æ„å–ï¼Œåªè¦åœ¨ index.html å’Œ plist æ–‡ä»¶å¤¹ä¸­è·¯å¾„å¯¹åº”å³å¯ã€‚index.html ä¸è¦æ”¹åå­—ï¼Œé»˜è®¤ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ca.crt  CAè¯ä¹¦ï¼Œå°†&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; /private/etc/apache2/ssl/ca.crt &lt;/code&gt;æ‹·è´ä¸€ä»½åˆ°å½“å‰ web æ–‡ä»¶å¤¹ä¸‹&lt;/li&gt;
  &lt;li&gt;ipa æ–‡ä»¶å¤¹ï¼Œæ”¾ç½® ipa èµ„æºåŒ…&lt;/li&gt;
  &lt;li&gt;plist æ–‡ä»¶å¤¹ï¼Œæ”¾ç½® plist æ–‡ä»¶&lt;/li&gt;
  &lt;li&gt;index.html ç´¢å¼•ç½‘é¡µï¼Œæ”¾ç½®é“¾æ¥ä¸‹è½½å®‰è£…è¯ä¹¦å’Œipa&lt;/li&gt;
  &lt;li&gt;images æ–‡ä»¶å¤¹ï¼ŒæŒ‰ç…§ Xcode è¦æ±‚æ”¾ç½®ä¸€ä¸ª 57Ã—57 å’Œ 512Ã—512 çš„ png å›¾ç‰‡ï¼Œè¿˜æ²¡å‘ç°ä»€ä¹ˆç”¨é€”ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;52-æ”¾ç½®-ipa-åŒ…&quot;&gt;5.2 æ”¾ç½® ipa åŒ…&lt;/h4&gt;
&lt;p&gt;APP æ‰“åŒ…ï¼Œå¯¼å‡º ipa åŒ…å°±æ²¡å¿…è¦å¤šè¯´äº†ï¼Œå¯ä»¥å¯¼å‡º Ad Hoc æˆ–è€… Development çš„ ipa åŒ…ï¼Œå°† ipa æ”¾åœ¨æ”¾åœ¨ web æ–‡ä»¶å¤¹ä¸‹ ipa æ–‡ä»¶å¤¹ä¸­ã€‚&lt;/p&gt;

&lt;h4 id=&quot;53-æ”¾ç½®plistæ–‡ä»¶&quot;&gt;5.3 æ”¾ç½®plistæ–‡ä»¶&lt;/h4&gt;

&lt;p&gt;æƒ³åœ¨çº¿å®‰è£…ï¼Œè¿˜éœ€è¦ä¸€ä¸ª plist æ–‡ä»¶ï¼Œæ¯ä¸ª ipa åŒ…å¯¹åº”ä¸€ä¸ª plist æ–‡ä»¶ï¼Œå°†&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; https://192.168.1.188/ipa/LFDev_4.2.1.ipa &lt;/code&gt;æ›´æ”¹ä¸ºç”Ÿæˆè¯ä¹¦æ—¶çš„ ip æˆ–è€…åŸŸåï¼Œç„¶åå¯¹åº” ipa æ–‡ä»¶è·¯å¾„å³å¯ï¼Œä¾‹å¦‚è¿™é‡Œçš„è·¯ç»æ˜¯ï¼Œåœ¨å½“å‰ web æ–‡ä»¶å¤¹ä¸‹çš„ ipa æ–‡ä»¶å¤¹ä¸­ï¼Œåç§°ä¸º LFDev_4.2.1.ipa çš„ ipa æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;plist æ–‡ä»¶æ ¼å¼å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;&amp;lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;plist&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;version=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;1.0&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;dict&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;key&amp;gt;&lt;/span&gt;items&lt;span class=&quot;nt&quot;&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;array&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;dict&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;key&amp;gt;&lt;/span&gt;assets&lt;span class=&quot;nt&quot;&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;array&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;dict&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;key&amp;gt;&lt;/span&gt;kind&lt;span class=&quot;nt&quot;&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;string&amp;gt;&lt;/span&gt;software-package&lt;span class=&quot;nt&quot;&gt;&amp;lt;/string&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;key&amp;gt;&lt;/span&gt;url&lt;span class=&quot;nt&quot;&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;string&amp;gt;&lt;/span&gt;https://192.168.1.188/ipa/LFDev_4.2.1.ipa&lt;span class=&quot;nt&quot;&gt;&amp;lt;/string&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dict&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;dict&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;key&amp;gt;&lt;/span&gt;kind&lt;span class=&quot;nt&quot;&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;string&amp;gt;&lt;/span&gt;display-image&lt;span class=&quot;nt&quot;&gt;&amp;lt;/string&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;key&amp;gt;&lt;/span&gt;url&lt;span class=&quot;nt&quot;&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;string&amp;gt;&lt;/span&gt;https://192.168.1.188/images/image_57Ã—57.png&lt;span class=&quot;nt&quot;&gt;&amp;lt;/string&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dict&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;dict&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;key&amp;gt;&lt;/span&gt;kind&lt;span class=&quot;nt&quot;&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;string&amp;gt;&lt;/span&gt;full-size-image&lt;span class=&quot;nt&quot;&gt;&amp;lt;/string&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;key&amp;gt;&lt;/span&gt;url&lt;span class=&quot;nt&quot;&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;string&amp;gt;&lt;/span&gt;https://192.168.1.188/images/image_512Ã—512.png&lt;span class=&quot;nt&quot;&gt;&amp;lt;/string&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dict&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/array&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;key&amp;gt;&lt;/span&gt;metadata&lt;span class=&quot;nt&quot;&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;dict&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;key&amp;gt;&lt;/span&gt;bundle-identifier&lt;span class=&quot;nt&quot;&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;string&amp;gt;&lt;/span&gt;com.xxx.yyy&lt;span class=&quot;nt&quot;&gt;&amp;lt;/string&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;key&amp;gt;&lt;/span&gt;bundle-version&lt;span class=&quot;nt&quot;&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;string&amp;gt;&lt;/span&gt;4.2.0&lt;span class=&quot;nt&quot;&gt;&amp;lt;/string&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;key&amp;gt;&lt;/span&gt;kind&lt;span class=&quot;nt&quot;&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;string&amp;gt;&lt;/span&gt;software&lt;span class=&quot;nt&quot;&gt;&amp;lt;/string&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;key&amp;gt;&lt;/span&gt;title&lt;span class=&quot;nt&quot;&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;string&amp;gt;&lt;/span&gt;Cxx&lt;span class=&quot;nt&quot;&gt;&amp;lt;/string&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dict&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dict&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/array&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dict&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/plist&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;bundle-identifierçš„å€¼com.xxx.yyyæ›´æ”¹ä¸ºä½ åº”ç”¨çš„Bundle ID&lt;/li&gt;
  &lt;li&gt;bundle-versionçš„å€¼4.2.0æ›´æ”¹ä¸ºä½ åº”ç”¨çš„ç‰ˆæœ¬version&lt;/li&gt;
  &lt;li&gt;titleçš„å€¼Cxxæ›´æ”¹ä¸ºä½ åº”ç”¨çš„åç§°ï¼Œä¸‹è½½æ—¶ä¼šå¼¹å‡ºå®‰è£…æç¤ºæ­¤åç§°&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;54-åˆ›å»ºç´¢å¼•ä¸‹è½½ç½‘é¡µ-indexhtml&quot;&gt;5.4 åˆ›å»ºç´¢å¼•ä¸‹è½½ç½‘é¡µ index.html&lt;/h4&gt;

&lt;p&gt;åœ¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; /Users/lf/web &lt;/code&gt;æ–‡ä»¶å¤¹ä¸‹è¿˜éœ€è¦ä¸€ä¸ª index.html æ–‡ä»¶ï¼Œ
æ‰‹æœºé¦–æ¬¡ä½¿ç”¨ OTA å®‰è£…ï¼Œå¿…é¡»å…ˆä¸‹è½½å®‰è£… ca.crt è¯ä¹¦ï¼Œç„¶åå†ç‚¹å‡»å®‰è£… ipaã€‚
url ä¸­å¿…é¡»å¡«å†™ https å¼€å¤´çš„ plist æ–‡ä»¶ä¸‹è½½åœ°å€ï¼Œplist æ–‡ä»¶ä¸­å¯¹åº” ipa æ–‡ä»¶çš„ä¸‹è½½åœ°å€ã€‚&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;head&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;viewport&quot;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;content=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=2.0, user-scalable=yes&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;http-equiv=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Content-Type&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;content=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/html; charset=UTF-8&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;h4&amp;gt;&lt;/span&gt;æ‰‹æœºé¦–æ¬¡ä¸‹è½½è¯·å…ˆ&quot;ç‚¹å‡»å®‰è£…SSLè¯ä¹¦&quot;ï¼Œå¹¶æ ¹æ®æç¤ºå®‰è£…ä¿¡ä»»è¯ä¹¦&lt;span class=&quot;nt&quot;&gt;&amp;lt;/h4&amp;gt;&lt;/span&gt;
åœ¨ iOS 10.3 åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œæ‰‹åŠ¨å®‰è£…åŒ…å«è¯ä¹¦æœ‰æ•ˆè´Ÿè½½çš„æè¿°æ–‡ä»¶æ—¶ï¼Œè¿™ä¸ªè¯ä¹¦ä¸ä¼šè‡ªåŠ¨å— SSL ä¿¡ä»»ã€‚
å½“å®‰è£…é€šè¿‡ç”µå­é‚®ä»¶å‘é€æˆ–ä»ç½‘ç«™ä¸‹è½½çš„æè¿°æ–‡ä»¶æ—¶ï¼Œæ‚¨å¿…é¡»æ‰‹åŠ¨å¼€å¯å— SSL ä¿¡ä»»ã€‚
è¦ä¸ºè¿™ä¸ªè¯ä¹¦å¼€å¯å— SSL ä¿¡ä»»ï¼Œè¯·å‰å¾€â€œè®¾ç½®â€&amp;gt;â€œé€šç”¨â€&amp;gt;â€œå…³äºæœ¬æœºâ€&amp;gt;â€œè¯ä¹¦ä¿¡ä»»è®¾ç½®â€ã€‚åœ¨â€œé’ˆå¯¹æ ¹è¯ä¹¦å¯ç”¨å®Œå…¨ä¿¡ä»»â€ä¸‹ï¼Œå¼€å¯ä¿¡ä»»è¿™ä¸ªè¯ä¹¦ã€‚
&lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;title=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;iPhone&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://192.168.1.188/ca.crt&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;ğŸ‘‰ç‚¹å‡»å®‰è£…SSLè¯ä¹¦ğŸ‘ˆ&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;hr&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;itms-services://?action=download-manifest&amp;amp;url=https://192.168.1.188/plist/LFAdHoc_4.2.0.plist&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;app_link&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;ğŸ‘‰ç‚¹å‡»å®‰è£…4.2.0ç”Ÿäº§ç‰ˆæœ¬ğŸ‘ˆ&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;hr&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;itms-services://?action=download-manifest&amp;amp;url=https://192.168.1.188/plist/LFDev_4.2.1.plist&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;app_link&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;ğŸ‘‰ç‚¹å‡»å®‰è£…4.2.1å¼€å‘ç‰ˆæœ¬ğŸ‘ˆ&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;hr&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;itms-services://?action=download-manifest&amp;amp;url=https://192.168.1.188/plist/LFVali_4.2.1.plist&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;app_link&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;ğŸ‘‰ç‚¹å‡»å®‰è£…4.2.1éªŒè¯ç‰ˆæœ¬ğŸ‘ˆ&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;hr&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¦‚æœæ˜¯æƒ³ ipa æ”¾åœ¨å±€åŸŸç½‘ç”µè„‘ä¸Šé¢ï¼Œåˆ™å°†å½“åšæ‰“åŒ…æœåŠ¡å™¨çš„ç”µè„‘ ip æ‰‹åŠ¨è®¾ç½®å›ºå®š ipï¼š192.168.1.188ï¼Œç„¶åæ‰‹æœºå’Œç”µè„‘è¿æ¥åŒä¸€ä¸ªè·¯ç”±å™¨ï¼Œiphone çš„ Safari æµè§ˆå™¨ä¸­è¾“å…¥ 192.168.1.188 æˆ–è€… 192.168.1.188/index.html å³å¯ï¼Œç‚¹å‡»å®‰è£… SSL è¯ä¹¦ï¼Œç„¶åç‚¹å‡»å®‰è£… ipa åŒ…ã€‚&lt;/p&gt;

&lt;h4 id=&quot;55-ios-103-åå¿…é¡»è®¾ç½®è¯ä¹¦ä¿¡ä»»&quot;&gt;5.5 iOS 10.3 åå¿…é¡»è®¾ç½®è¯ä¹¦ä¿¡ä»»&lt;/h4&gt;

&lt;p&gt;å¦‚æœä¸‹è½½ ipa æ—¶å‡ºç°æ— æ³•è¿æ¥åˆ°&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; 192.168.*.* &lt;/code&gt;çš„é”™è¯¯ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨è®¾ç½®ä¿¡ä»»ã€‚&lt;/p&gt;

&lt;p&gt;iOS7.0 ä»¥åå¿…é¡»ä½¿ç”¨ HTTPS è¿›è¡Œï¼ŒiOS 10 ä¹‹å‰çš„è®¾å¤‡ï¼Œç›´æ¥å®‰è£…è‡ªç­¾åæ ¹è¯ä¹¦åå°±å¯ä»¥å®‰è£… iOS åº”ç”¨ï¼Œä½†æ˜¯åœ¨ iOS 10.3 ä»¥ä¸Šçš„è®¾å¤‡ä¸Šï¼Œå®‰è£…åè¿˜éœ€è¦åˆ°â€œå…³äºæœ¬æœºâ€é‚£é‡Œæ‰‹åŠ¨å¼€å¯ä¿¡ä»»ã€‚&lt;/p&gt;

&lt;p&gt;è‹¹æœå®˜ç½‘æç¤ºï¼Œåœ¨ iOS ä¸­ä¿¡ä»»æ‰‹åŠ¨å®‰è£…çš„è¯ä¹¦æè¿°æ–‡ä»¶ &lt;a href=&quot;https://support.apple.com/zh-cn/HT204477&quot;&gt;https://support.apple.com/zh-cn/HT204477&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;åœ¨ iOS 10.3 åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œæ‰‹åŠ¨å®‰è£…åŒ…å«è¯ä¹¦æœ‰æ•ˆè´Ÿè½½çš„æè¿°æ–‡ä»¶æ—¶ï¼Œ
è¿™ä¸ªè¯ä¹¦ä¸ä¼šè‡ªåŠ¨å— SSL ä¿¡ä»»ã€‚
å½“å®‰è£…é€šè¿‡ç”µå­é‚®ä»¶å‘é€æˆ–ä»ç½‘ç«™ä¸‹è½½çš„æè¿°æ–‡ä»¶æ—¶ï¼Œ
æ‚¨å¿…é¡»æ‰‹åŠ¨å¼€å¯å— SSL ä¿¡ä»»ã€‚
è¦ä¸ºè¿™ä¸ªè¯ä¹¦å¼€å¯å— SSL ä¿¡ä»»ï¼Œ
è¯·å‰å¾€â€œè®¾ç½®â€&amp;gt;â€œé€šç”¨â€&amp;gt;â€œå…³äºæœ¬æœºâ€&amp;gt;â€œè¯ä¹¦ä¿¡ä»»è®¾ç½®â€ã€‚
åœ¨â€œé’ˆå¯¹æ ¹è¯ä¹¦å¯ç”¨å®Œå…¨ä¿¡ä»»â€ä¸‹ï¼Œå¼€å¯ä¿¡ä»»è¿™ä¸ªè¯ä¹¦ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;å‚è€ƒé“¾æ¥&quot;&gt;&lt;a id=&quot;6_0&quot;&gt;&lt;/a&gt;å‚è€ƒé“¾æ¥&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http://stackoverflow.com/questions/20127138/apache-2-4-configuration-for-ssl-not-working&lt;/code&gt;&lt;/p&gt;
</description>
        <pubDate>Sat, 10 Nov 2018 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2018/11/%E8%87%AA%E5%BB%BA%E5%B1%80%E5%9F%9F%E7%BD%91-OTA-%E6%9C%8D%E5%8A%A1%E5%99%A8/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/11/%E8%87%AA%E5%BB%BA%E5%B1%80%E5%9F%9F%E7%BD%91-OTA-%E6%9C%8D%E5%8A%A1%E5%99%A8/</guid>
        
        <category>iOS</category>
        
        
      </item>
    
      <item>
        <title>è®°ä¸€äº›å°è±¡æ·±åˆ»çš„ Bug</title>
        <description>&lt;h2 id=&quot;ç›®å½•&quot;&gt;ç›®å½•&lt;/h2&gt;

&lt;p&gt;ä¸€ã€&lt;a href=&quot;#1_0&quot;&gt;iOS åŠ è½½è¶…å¤§å°ºå¯¸å›¾ç‰‡ Crash çš„è°ƒç ”åŠè§£å†³æ–¹æ¡ˆ&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;äºŒã€&lt;a href=&quot;#2_0&quot;&gt;å¤ä»¤æ—¶å¼•èµ·æŸäº›æ—¶é—´æ®µè½¬æ¢ä¸º NSDate ä¸º nil é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ä¸‰ã€&lt;a href=&quot;#3_0&quot;&gt;æ—¥æœŸæ ¼å¼ YYYY-MM-dd å’Œ yyyy-MM-dd åŒºåˆ«&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;å››ã€&lt;a href=&quot;#4_0&quot;&gt;iOS å±€éƒ¨ BOOL å˜é‡éšæœºå€¼&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;äº”ã€&lt;a href=&quot;#5_0&quot;&gt;iPhone ç”¨æˆ·ååŒ…å«ç‰¹æ®Šç¬¦å·å¼•èµ·çš„åå° Crash&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;å…­ã€&lt;a href=&quot;#6_0&quot;&gt;å‚è€ƒé“¾æ¥&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;-ä¸€ios-åŠ è½½è¶…å¤§å°ºå¯¸å›¾ç‰‡-crash-çš„è°ƒç ”åŠè§£å†³æ–¹æ¡ˆ&quot;&gt;&lt;a id=&quot;1_0&quot;&gt;&lt;/a&gt; ä¸€ã€iOS åŠ è½½è¶…å¤§å°ºå¯¸å›¾ç‰‡ Crash çš„è°ƒç ”åŠè§£å†³æ–¹æ¡ˆ&lt;/h2&gt;

&lt;h3 id=&quot;-11é—®é¢˜æè¿°&quot;&gt;&lt;a id=&quot;1_1&quot;&gt;&lt;/a&gt; 1.1ã€é—®é¢˜æè¿°&lt;/h3&gt;

&lt;p&gt;å‰æ®µæ—¶é—´é‡åˆ°ä¸€ä¸ªå·¥å•ï¼Œå®¢æˆ·åé¦ˆï¼Œåªè¦è¿›å…¥è®¢å•åˆ—è¡¨ç•Œé¢ 1~2 ç§’ï¼Œå®¢æˆ·ç«¯å°±ä¼š Crashï¼Œè®¢å•åˆ—è¡¨ç•Œé¢ç¤ºæ„å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/bugs/impressive1.1.0.png&quot; title=&quot;è®¢å•ç¤ºæ„å›¾&quot; width=&quot;300&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;-12é—®é¢˜åˆ†æ&quot;&gt;&lt;a id=&quot;1_2&quot;&gt;&lt;/a&gt; 1.2ã€é—®é¢˜åˆ†æ&lt;/h3&gt;

&lt;p&gt;ç”±äºæ˜¯å®¢æˆ·æŠ•è¯‰çš„ Bugï¼Œæ²¡æœ‰ Debug ä¿¡æ¯ï¼Œå…ˆçŒœæµ‹å„ç§æƒ…å†µï¼Œæ•°ç»„è¶Šç•Œ/åå°ä¼  nil å€¼/å†…å­˜æ³„éœ²/ KVO èµ‹æœªå®šä¹‰å€¼ç­‰ç­‰ï¼›ç„¶è€Œç»è¿‡ä»”ç»†åˆ†ææ¨¡æ‹Ÿé€ä¸ªæ’é™¤äº†ä¸Šè¿°å¯èƒ½ï¼Œä»æŸ¥æ‰¾ä¸åˆ° Crash åŸå› ï¼Œç™¾æ€ä¸å¾—å…¶è§£ã€‚&lt;/p&gt;

&lt;p&gt;æ’é™¤äº†ä»£ç çš„é—®é¢˜ï¼Œåªæœ‰å¯èƒ½æ˜¯æ•°æ®é—®é¢˜äº†ï¼ŒçŒœæµ‹æ˜¯å¼‚å¸¸çš„å›¾ç‰‡/æ•°æ®è§£æå‡ºç°çš„é—®é¢˜ï¼Œäºæ˜¯æŠ½å–ç”¨æˆ·è®¢å•æ•°æ®åˆ†æï¼Œå‘ç°æœ‰ 2 å¼ å°ºå¯¸éå¸¸å¤§çš„ JPEG å›¾ç‰‡ï¼Œå°ºå¯¸è¾¾åˆ°äº† 15000*8000 çš„åƒç´ ï¼Œç¬é—´æƒ³æ˜ç™½äº†æ€ä¹ˆå›äº‹ï¼Œåƒç´ æ€»é‡è¾¾åˆ°äº†ä¸€äº¿ä¸¤åƒä¸‡ï¼ŒçŒœæµ‹æ˜¯å›¾ç‰‡è§£å‹ç¼©åˆ°å†…å­˜åå ç”¨å†…å­˜è¿‡å¤§ï¼Œå¯¼è‡´ç³»ç»Ÿå†…å­˜ç´§å¼ ï¼Œå› æ­¤ç³»ç»Ÿæ€æ­»äº† App è¿›ç¨‹ã€‚&lt;/p&gt;

&lt;h3 id=&quot;-13é—®é¢˜éªŒè¯&quot;&gt;&lt;a id=&quot;1_3&quot;&gt;&lt;/a&gt; 1.3ã€é—®é¢˜éªŒè¯&lt;/h3&gt;

&lt;p&gt;éªŒè¯æ˜¯å¦å› å¤§å°ºå¯¸å›¾ç‰‡å¼•èµ·çš„é”™è¯¯ã€‚éªŒè¯è¿‡ç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;å†™ä¸€ä¸ªç±»ä¼¼ä¸Šé¢è®¢å•åˆ—è¡¨çš„ Demoï¼Œç‚¹å‡» Cell é€ä¸ªåŠ è½½å¤§å›¾å›¾ç‰‡ï¼Œæµ‹è¯•ç”¨çš„æ‰‹æœºä¸º iPhone 7Pï¼Œå›¾ç‰‡å°ºå¯¸ä¸ºï¼ˆ15000px*15000pxï¼‰ï¼Œç‚¹å‡»åŠ è½½ç¬¬äºŒå¼ å›¾ç‰‡å°±å‘ç”Ÿäº† Crashï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒAPP å ç”¨ç³»ç»Ÿå†…å­˜ 60% å·¦å³å°±ä¼šè¢«æ€æ­»è¿›ç¨‹ã€‚iPhone 7P åŠ è½½å¤§å›¾åçš„å†…å­˜æˆªå›¾å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div style=&quot;float:left;border:solid 1px 000;margin:2px;&quot;&gt;&lt;img src=&quot;/images/posts/bugs/impressive1.3.1.png&quot; title=&quot;Demoåˆå§‹å ç”¨çš„å†…å­˜&quot; width=&quot;160&quot; /&gt;&lt;/div&gt;
&lt;div style=&quot;float:left;border:solid 1px 000;margin:2px;&quot;&gt;&lt;img src=&quot;/images/posts/bugs/impressive1.3.2.png&quot; title=&quot;åŠ è½½ä¸€å¼ 7000Ã—7000å¤§å›¾å†…å­˜&quot; width=&quot;160&quot; /&gt;&lt;/div&gt;
&lt;div style=&quot;float:left;border:solid 1px 000;margin:2px;&quot;&gt;&lt;img src=&quot;/images/posts/bugs/impressive1.3.3.png&quot; title=&quot;åŠ è½½ä¸¤å¼ 7000Ã—7000å¤§å›¾å†…å­˜&quot; width=&quot;160&quot; /&gt;&lt;/div&gt;
&lt;div style=&quot;clear:both;&quot;&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Tips:&lt;/strong&gt; ä¸åŒæ‰‹æœºç”±äºå†…å­˜å’Œå±å¹•ä¸ä¸€æ ·ï¼Œå†…å­˜è¶…é™ App å‘ç”Ÿ Crash çš„æ¡ä»¶ä¸ä¸€æ ·ï¼Œå…¶ä¸­ &lt;strong&gt;iPhone 6P&lt;/strong&gt; æ˜¯æœ€å®¹æ˜“ Crash çš„ï¼Œå› ä¸ºå®ƒæœ‰ 5.5 å¯¸çš„å±å¹•ï¼Œå´åªæœ‰ &lt;strong&gt;1G å†…å­˜&lt;/strong&gt;ï¼ŒåŠ è½½ Assets.xcassets å›¾ç‰‡æ—¶ä¼šåŠ è½½ 3x å›¾ç‰‡ï¼ŒåŒä¸€å¼ ç½‘ç»œå›¾ç‰‡ï¼ŒUIImageView å¸ƒå±€ä¸€èˆ¬ä¼šæŒ‰ç…§æ¯”ä¾‹æ”¾å¤§ï¼Œå¤§å±æ‰‹æœºå›¾ç‰‡ä¼šæ”¾å¤§ï¼Œè§£ç åå ç”¨å†…å­˜ä¹Ÿå°±æ›´å¤§ã€‚&lt;/p&gt;

&lt;h3 id=&quot;-14è§£å†³æ–¹æ¡ˆ&quot;&gt;&lt;a id=&quot;1_4&quot;&gt;&lt;/a&gt; 1.4ã€è§£å†³æ–¹æ¡ˆ&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;çº¦å®šå¤§äºé…ç½®ï¼Œä¸Šä¼ å›¾ç‰‡ä¹Ÿè¦éµå®ˆä¸€å®šçš„çº¦å®šã€‚&lt;/strong&gt; åŸºäº SDWebImage/YYImage ç­‰ç¬¬ä¸‰æ–¹åº“åŠ è½½è¶…å¤§å›¾å¼•èµ·çš„å´©æºƒï¼Œå¯é€šè¿‡ä¿®æ”¹æºç è§£å†³ï¼Œä½†ä¸å»ºè®®è¿™æ ·åšï¼›ä¿®æ”¹æºç å¯èƒ½ä¼šå¼•èµ·å…¶ä»– Bugï¼Œè€Œä¸”å¤§å›¾æ¯•ç«Ÿæ˜¯å°‘æ•°ï¼Œæ²¡å¿…è¦å¯¹æ‰€æœ‰å›¾ç‰‡éƒ½è¿›è¡Œåˆ¤æ–­ï¼Œä¸ªåˆ«å¤§å›¾å•ç‹¬å¤„ç†å³å¯ã€‚æŒ‰ç…§ä¸€å®šçº¦å®šï¼Œé€šè¿‡ç®¡ç†å¹³å°é™å®šä¸Šä¼ å›¾ç‰‡å°ºå¯¸å¤§å°ï¼Œå¢åŠ  APP æµç•…åº¦çš„åŒæ—¶ï¼Œè¿˜èƒ½å‡å°‘ç”¨æˆ·æµé‡æŸå¤±ï¼Œæ­¤ä¸ºæœ€ä½³æ–¹æ¡ˆã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ç¼©æ”¾å›¾ç‰‡å°ºå¯¸ã€‚&lt;/strong&gt; å¦‚æœæ˜¯å±•ç¤ºæ•´å¼ å›¾ç‰‡ï¼Œä¸éœ€è¦å±•ç¤ºå›¾ç‰‡ç»†èŠ‚ï¼Œå—é™äºå±å¹•åˆ†è¾¨ç‡ï¼Œå¤ªå¤§å°ºå¯¸çš„å›¾ç‰‡æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼›å¦‚æœéœ€è¦åšç±»ä¼¼äºå›¾ç‰‡æµè§ˆå™¨ï¼Œå¯å¯¹å›¾ç‰‡è¿›è¡Œæ”¾å¤§ç¼©å°æ“ä½œçš„éœ€æ±‚ï¼Œå¤§å›¾é¢„è§ˆçš„æ—¶å€™å¯åŠ è½½ç¼©ç•¥å›¾ï¼Œå±•ç¤ºçš„æ—¶å€™åˆ‡ç‰‡å¤„ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;-15ios-å›¾ç‰‡è§£ç &quot;&gt;&lt;a id=&quot;1_5&quot;&gt;&lt;/a&gt; 1.5ã€iOS å›¾ç‰‡è§£ç &lt;/h3&gt;

&lt;p&gt;æˆ‘ä»¬å¸¸è§çš„å›¾ç‰‡æ ¼å¼ä¾‹å¦‚ &lt;strong&gt;PNG/JPG/GIF&lt;/strong&gt; ç­‰æ ¼å¼éƒ½å±äº&lt;strong&gt;å›¾åƒå‹ç¼©æ ¼å¼&lt;/strong&gt;ï¼Œè§£å‹ä¸ºä½å›¾åå ç”¨çš„å†…å­˜ä¼šéå¸¸å¤§ã€‚&lt;/p&gt;

&lt;p&gt;å‡è®¾ iOS ç³»ç»Ÿä»ç£ç›˜åŠ è½½ä¸€å¼ å›¾ç‰‡ï¼Œé¦–å…ˆå°†æ–‡ä»¶æ•°æ®ä»ç£ç›˜è¯»åˆ°å†…å­˜ä¸­ï¼Œæ­¤æ—¶åœ¨å†…å­˜ä¸­ä»æ—§æ˜¯å‹ç¼©æ ¼å¼ï¼Œåªæœ‰åœ¨éœ€è¦çš„æ—¶æœºï¼Œæ‰ä¼šæŠŠå›¾ç‰‡è§£ç ä¸ºæ— å‹ç¼©çš„ä½å›¾æ ¼å¼ï¼Œæœ€å &lt;strong&gt;Core Animation&lt;/strong&gt; ä½¿ç”¨æœªå‹ç¼©çš„ä½å›¾æ•°æ®æ¸²æŸ“ &lt;strong&gt;UIImageView&lt;/strong&gt; çš„å›¾å±‚ã€‚&lt;/p&gt;

&lt;p&gt;å°†å‹ç¼©çš„å›¾ç‰‡æ•°æ®è§£ç æˆæœªå‹ç¼©çš„ä½å›¾å½¢å¼ï¼Œè¿™æ˜¯ä¸€ä¸ªè€—æ—¶çš„ CPU æ“ä½œï¼Œ&lt;strong&gt;SDWebimage/YYImage&lt;/strong&gt; ç­‰ç¬¬ä¸‰æ–¹æ¡†æ¶ä¸€èˆ¬éƒ½ä¼šæå‰å¼‚æ­¥å¼ºåˆ¶è§£ç å›¾ç‰‡ï¼Œä¿è¯äº† UI ç•Œé¢çš„æµç•…æ€§ã€‚&lt;/p&gt;

&lt;h3 id=&quot;-16å›¾ç‰‡è§£ç å ç”¨å†…å­˜è®¡ç®—&quot;&gt;&lt;a id=&quot;1_6&quot;&gt;&lt;/a&gt; 1.6ã€å›¾ç‰‡è§£ç å ç”¨å†…å­˜è®¡ç®—&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;å›¾ç‰‡è§£ç &lt;/strong&gt;åä¼šå ç”¨å¤šå°‘å†…å­˜å‘¢ï¼Ÿå…¶å®è¿™ä¸ªå¾ˆå¥½è®¡ç®—ï¼Œè‹¹æœæ‰‹æœºé‡‡ç”¨ 24 ä½çœŸå½©è‰²æ˜¾ç¤ºå›¾åƒï¼Œä¹Ÿå°±æ˜¯ 24bit(3 å­—èŠ‚ï¼ŒRGB çº¢ç»¿è“ä¸‰åŸè‰²åˆ†åˆ«å ç”¨ 8bitï¼Œæ¯ä¸ªé¢œè‰²æœ‰ 256 ç§çŠ¶æ€)ï¼Œå¦‚æœæ˜¯ä¸åŒ…å« Alpha é€šé“(é€æ˜åº¦)çš„ RGB å›¾ç‰‡ï¼Œé‚£æ¯ä¸ªåƒç´ å ç”¨çš„å°±æ˜¯ 3 å­—èŠ‚ï¼Œ15000px*15000px*3Byte = 644MBï¼Œå¦‚æœæ˜¯åŒ…å«é€æ˜åº¦çš„ RGBA å›¾ç‰‡ï¼Œåˆ™ä¸º 15000px*15000px*4Byte = 858MBï¼Œå¦‚å›¾2æ‰€ç¤ºï¼ŒåŠ è½½ä¸€å¼ é•¿å’Œå®½ 15000px çš„å›¾ç‰‡ï¼Œå†…å­˜æš´å¢ 858MBã€‚&lt;/p&gt;

&lt;h3 id=&quot;-17å›¾ç‰‡ç¼©æ”¾æœ€ä¼˜é€‰æ‹©&quot;&gt;&lt;a id=&quot;1_7&quot;&gt;&lt;/a&gt; 1.7ã€å›¾ç‰‡ç¼©æ”¾æœ€ä¼˜é€‰æ‹©&lt;/h3&gt;

&lt;p&gt;æœ€å¸¸ç”¨çš„å›¾ç‰‡ç¼©æ”¾æ–¹æ³•æ˜¯ä½¿ç”¨ &lt;strong&gt;CGContext&lt;/strong&gt; çš„ &lt;strong&gt;UIGraphicsGetImageFromCurrentImageContext&lt;/strong&gt; æ–¹æ³•å¯¹å›¾ç‰‡è¿›è¡Œè£å‰ªç¼©æ”¾ï¼Œèƒ½å¤Ÿæ»¡è¶³å¤§éƒ¨åˆ†éœ€æ±‚ã€‚ä½†å¦‚æœæ˜¯å¤„ç†å¤šå¼ å¤§å›¾ï¼Œè¿™æ—¶å€™å°±éœ€è¦ä¼˜åŒ–ç¼©æ”¾é€Ÿåº¦äº†ï¼Œå¯é€šè¿‡ Image I/O æ¡†æ¶å¯¹å›¾ç‰‡è¿›è¡Œç¼©æ”¾ï¼Œåœ¨å·¥ç¨‹ä¸­æ·»åŠ  &lt;strong&gt;Image I/O Framework&lt;/strong&gt;ï¼Œç„¶ååœ¨éœ€è¦ä½¿ç”¨çš„åœ°æ–¹ &lt;strong&gt;#import &amp;lt;ImageIO/ImageIO.h&amp;gt;&lt;/strong&gt; å³å¯ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//maxPixelSize MUST BE a valid value.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIImage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;thumbImageFromLargeFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;filePath&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;withConfirmedMaxPixelSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;maxPixelSize&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// Create the image source (from path)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;CGImageSourceRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;src&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CGImageSourceCreateWithURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFURLRef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;fileURLWithPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filePath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// Create thumbnail options&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;CFDictionaryRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__bridge&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFDictionaryRef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@{&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kCGImageSourceCreateThumbnailWithTransform&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;@YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kCGImageSourceCreateThumbnailFromImageAlways&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;@YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kCGImageSourceThumbnailMaxPixelSize&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;maxPixelSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// Generate the thumbnail&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;CGImageRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;thumbnail&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CGImageSourceCreateThumbnailAtIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;CFRelease&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;UIImage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIImage&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initWithCGImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;thumbnail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;CFRelease&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;thumbnail&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;-äºŒå¤ä»¤æ—¶å¼•èµ·æŸäº›æ—¶é—´æ®µè½¬æ¢ä¸º-nsdate-ä¸º-nil-é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ&quot;&gt;&lt;a id=&quot;2_0&quot;&gt;&lt;/a&gt; äºŒã€å¤ä»¤æ—¶å¼•èµ·æŸäº›æ—¶é—´æ®µè½¬æ¢ä¸º NSDate ä¸º nil é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ&lt;/h2&gt;

&lt;h3 id=&quot;-21é—®é¢˜æè¿°&quot;&gt;&lt;a id=&quot;2_1&quot;&gt;&lt;/a&gt; 2.1ã€é—®é¢˜æè¿°&lt;/h3&gt;

&lt;p&gt;å¼€å‘ä¸­æˆ‘ä»¬ç»å¸¸ä¼šå¤„ç†ç”¨æˆ·çš„ç”Ÿæ—¥ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼Œå°†ç”¨æˆ·ç”Ÿæ—¥è½¬æ¢ä¸ºNSDateï¼Œä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;birthStr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&quot;1986-05-04&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSDateFormatter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;formatter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDateFormatter&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;formatter&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setDateFormat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;yyyy-MM-dd&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSDate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;birDate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;formatter&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;dateFromString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;birthStr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;timeStr to date is %@ %@&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;birthStr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;birDate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™æ—¶å€™æˆ‘ä»¬ä¼šæƒŠå¥‡çš„å‘ç°ï¼ŒbirDate ä¸º nil ï¼Ÿå—¯ï¼Œnilã€‚&lt;/p&gt;

&lt;h3 id=&quot;-22é—®é¢˜åˆ†æ&quot;&gt;&lt;a id=&quot;2_2&quot;&gt;&lt;/a&gt; 2.2ã€é—®é¢˜åˆ†æ&lt;/h3&gt;

&lt;p&gt;é€šè¿‡Googleæœç´¢åŠæµ‹è¯•ï¼Œæœ€ç»ˆå®šä½åœ¨äº†å¤ä»¤æ—¶é—®é¢˜ä¸Šã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;æˆ‘å›½è§£æ”¾å‰å‡ å¹´åœ¨éƒ¨åˆ†åœ°åŒºä¹Ÿæ›¾å®è¡Œè¿‡å¤ä»¤æ—¶ã€‚1986å¹´4æœˆï¼Œä¸­å¤®æœ‰å…³éƒ¨é—¨å‘å‡ºâ€œåœ¨å…¨å›½èŒƒå›´å†…å®è¡Œå¤æ—¶åˆ¶çš„é€šçŸ¥â€ï¼Œå…·ä½“ä½œæ³•æ˜¯ï¼šæ¯å¹´ä»å››æœˆä¸­æ—¬ç¬¬ä¸€ä¸ªæ˜ŸæœŸæ—¥çš„å‡Œæ™¨2æ—¶æ•´ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰ï¼Œå°†æ—¶é’Ÿæ‹¨å¿«ä¸€å°æ—¶ï¼Œå³å°†è¡¨é’ˆç”±2æ—¶æ‹¨è‡³3æ—¶ï¼Œå¤ä»¤æ—¶å¼€å§‹ï¼›åˆ°ä¹æœˆä¸­æ—¬ç¬¬ä¸€ä¸ªæ˜ŸæœŸæ—¥çš„å‡Œæ™¨2æ—¶æ•´ï¼ˆåŒ—äº¬å¤ä»¤æ—¶ï¼‰ï¼Œå†å°†æ—¶é’Ÿæ‹¨å›ä¸€å°æ—¶ï¼Œå³å°†è¡¨é’ˆç”±2æ—¶æ‹¨è‡³1æ—¶ï¼Œå¤ä»¤æ—¶ç»“æŸã€‚ä»1986å¹´åˆ°1991å¹´çš„å…­ä¸ªå¹´åº¦ï¼Œé™¤1986å¹´å› æ˜¯å®è¡Œå¤æ—¶åˆ¶çš„ç¬¬ä¸€å¹´ï¼Œä»5æœˆ4æ—¥å¼€å§‹åˆ°9æœˆ14æ—¥ç»“æŸå¤–ï¼Œå…¶å®ƒå¹´ä»½å‡æŒ‰è§„å®šçš„æ—¶æ®µæ–½è¡Œã€‚1992å¹´èµ·ï¼Œå¤ä»¤æ—¶æš‚åœå®è¡Œã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;çœ‹å®Œè¿™æ®µæè¿°åº”è¯¥å°±æ˜ç™½åŸå› äº†ï¼Œåœ¨ä¸­å›½ä¸œå…«æ—¶åŒºæ—¶åŒºï¼ŒæŸäº›æ—¶é—´æ®µæ˜¯ä¸å­˜åœ¨çš„ï¼Œä¾‹å¦‚â€1988-04-10 00-00-00â€è‡³â€1988-04-10 01-00-00â€ä¸­é—´çš„æ—¶é—´æ®µã€‚&lt;/p&gt;

&lt;h3 id=&quot;-23è§£å†³æ–¹æ¡ˆ&quot;&gt;&lt;a id=&quot;2_3&quot;&gt;&lt;/a&gt; 2.3ã€è§£å†³æ–¹æ¡ˆ&lt;/h3&gt;

&lt;p&gt;æ—¢ç„¶æ˜¯æ—¶åŒºå¼•èµ·çš„é—®é¢˜ï¼Œé‚£å°±æŠŠæ—¶åŒºè½¬æ¢ä¸º UTC æˆ– GMT çš„æ—¶åŒºå³å¯ã€‚&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;birthStr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&quot;1988-04-10 00-00-00&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSDateFormatter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;formatter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDateFormatter&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;formatter&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setTimeZone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSTimeZone&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;timeZoneWithName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;GMT&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;// é›¶æ—¶åŒº&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;formatter&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setDateFormat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;yyyy-MM-dd HH-mm-ss&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSDate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;birDate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;formatter&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;dateFromString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;birthStr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;BirthStr convert to NSDate is %@&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;birDate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Tips:&lt;/strong&gt; &lt;strong&gt;ä¸è¦ç”¨æ¨¡æ‹Ÿå™¨æµ‹è¯•&lt;/strong&gt;ï¼Œæ¨¡æ‹Ÿå™¨æµ‹è¯•&lt;strong&gt;ç»“æœä¸æ­£ç¡®&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&quot;-ä¸‰æ—¥æœŸæ ¼å¼-yyyy-mm-dd-å’Œ-yyyy-mm-dd-åŒºåˆ«&quot;&gt;&lt;a id=&quot;3_0&quot;&gt;&lt;/a&gt; ä¸‰ã€æ—¥æœŸæ ¼å¼ YYYY-MM-dd å’Œ yyyy-MM-dd åŒºåˆ«&lt;/h2&gt;

&lt;h3 id=&quot;-31é—®é¢˜æè¿°&quot;&gt;&lt;a id=&quot;3_1&quot;&gt;&lt;/a&gt; 3.1ã€é—®é¢˜æè¿°&lt;/h3&gt;

&lt;p&gt;å¼€å‘ä¸­é‡åˆ°æœ‰äººä½¿ç”¨ YYYY-MM-dd å¤„ç†æ—¶é—´æ ¼å¼ï¼Œè§‰å¾—ä¸å¯¹åˆè¯´ä¸å‡ºä¸ºä»€ä¹ˆï¼Œå°±è°ƒç ”äº†ä¸€ä¸‹ã€‚&lt;/p&gt;

&lt;p&gt;å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè®¾ç½®æ—¶é—´æ ¼å¼ YYYY-MM-dd å’Œ yyyy-MM-dd è½¬æ¢çš„æ—¥æœŸæ˜¯ä¸€æ ·çš„ï¼Œåªæœ‰å½“åˆ°è¾¾ä¸€äº›ç‰¹ç‚¹çš„æ—¶é—´èŠ‚ç‚¹ï¼Œè·¨å¹´æ—¶ä½¿ç”¨ â€œYYYY-MM-ddâ€ å¯èƒ½ä¼šå‡ºç°å·®ä¸€å¹´çš„é—®é¢˜ã€‚å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// åŸå§‹çš„æ—¥æœŸå­—ç¬¦ä¸²&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;orginDateStr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&quot;2015-12-28&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// è½¬æ¢ä¸ºNSDate&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSDateFormatter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;orginFormatter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDateFormatter&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;orginFormatter&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setDateFormat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;yyyy-MM-dd&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSDate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;orginDate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;orginFormatter&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;dateFromString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;orginDateStr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;orginFormatter: orginDate is %@&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;orginDate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// å¦‚æœç”¨YYYYå°†orginDateè½¬æ¢å›å­—ç¬¦ä¸²æ—¶å°±å‡ºç°äº†é—®é¢˜&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSDateFormatter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;weekFormatter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDateFormatter&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;weekFormatter&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setDateFormat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;YYYY-MM-dd&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;weekDateStr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;weekFormatter&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;stringFromDate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;orginDate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;weekFormatter: weekDateStr is %@&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weekDateStr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;æ‰“å°ç»“æœï¼Œç›¸å·®ä¸€å¹´ï¼š&lt;/p&gt;

  &lt;p&gt;orginFormatter: orginDate is Mon Dec 28 00:00:00 2015&lt;/p&gt;

  &lt;p&gt;weekFormatter: weekDateStr is 2016-12-28&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;-32é—®é¢˜åˆ†æ&quot;&gt;&lt;a id=&quot;3_2&quot;&gt;&lt;/a&gt; 3.2ã€é—®é¢˜åˆ†æ&lt;/h3&gt;

&lt;p&gt;æˆ‘ä»¬å…ˆæ¥ç†è§£ YYYY å’Œ yyyy çš„åŒºåˆ«ï¼š&lt;/p&gt;

&lt;p&gt;â€œYYYY formatâ€ æ˜¯ â€œISO week numbering systemâ€&lt;/p&gt;

&lt;p&gt;â€œyyyy formatâ€ æ˜¯ â€œGregorian Calendarï¼ˆå…¬å†ï¼‰â€&lt;/p&gt;

&lt;p&gt;â€œYYYY specifies the week of the year (ISO) while yyyy specifies the calendar year (Gregorian)â€&lt;/p&gt;

&lt;p&gt;yyyy specifies the calendar year whereas YYYY specifies the year (of â€œWeek of Yearâ€), used in the ISO year-week calendar.&lt;/p&gt;

&lt;p&gt;ä¹Ÿå°±æ˜¯è¯´è½¬æ¢ä¸ºæ—¥æœŸæ—¶ï¼ŒDateFormatterå¦‚æœæ˜¯YYYYæ ¼å¼çš„è¯ï¼Œå¦‚æœ1æœˆ1æ—¥æ˜¯æ˜ŸæœŸä¸€ï¼Œæ˜ŸæœŸäºŒï¼Œæ˜ŸæœŸä¸‰æˆ–æ˜ŸæœŸå››ï¼Œå®ƒæ˜¯åœ¨01å‘¨ã€‚å¦‚æœä¸€æœˆ1æ—¥æ˜¯æ˜ŸæœŸäº”ï¼Œæ˜ŸæœŸå…­æˆ–æ˜ŸæœŸæ—¥ï¼Œå®ƒåœ¨å‰ä¸€å¹´çš„52å‘¨æˆ–53å‘¨ã€‚&lt;/p&gt;

&lt;p&gt;è‹¹æœå®˜æ–¹æ–‡æ¡£è¯´ä½¿ç”¨YYYYæ˜¯å¸¸è§é”™è¯¯ï¼Œæ­£ç¡®çš„åº”è¯¥æ˜¯ä½¿ç”¨yyyyæ ¼å¼ï¼Œå®˜æ–¹æ–‡æ¡£è§£é‡Šå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;It uses yyyy to specify the year component. A common mistake is to use YYYY. yyyy specifies the calendar year whereas YYYY specifies the year (of â€œWeek of Yearâ€), used in the ISO year-week calendar. In most cases, yyyy and YYYY yield the same number, however they may be different. Typically you should use the calendar year.&lt;/p&gt;

  &lt;p&gt;The representation of the time may be 13:00. In iOS, however, if the user has switched 24-Hour Time to Off, the time may be 1:00 pm.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;-33è§£å†³æ–¹æ¡ˆ&quot;&gt;&lt;a id=&quot;3_3&quot;&gt;&lt;/a&gt; 3.3ã€è§£å†³æ–¹æ¡ˆ&lt;/h3&gt;

&lt;p&gt;ä½¿ç”¨æ­£ç¡®çš„æ—¶é—´æ ¼å¼ &lt;strong&gt;yyyy-MM-dd&lt;/strong&gt; æ¥å¤„ç†æ—¥æœŸæ—¶é—´ã€‚&lt;/p&gt;

&lt;h2 id=&quot;-å››ios-å±€éƒ¨-bool-å˜é‡éšæœºå€¼&quot;&gt;&lt;a id=&quot;4_0&quot;&gt;&lt;/a&gt; å››ã€iOS å±€éƒ¨ BOOL å˜é‡éšæœºå€¼&lt;/h2&gt;

&lt;h3 id=&quot;-41é—®é¢˜æè¿°&quot;&gt;&lt;a id=&quot;4_1&quot;&gt;&lt;/a&gt; 4.1ã€é—®é¢˜æè¿°&lt;/h3&gt;

&lt;p&gt;æµ‹è¯•ç»™ä¸€ä¸ªå°ä¼™ä¼´æäº†ä¸€ä¸ªBugï¼Œç‚¹å‡»ä¸€ä¸ªåŠŸèƒ½æ—¶ä¼šä¸å®šæ—¶å‡ºç°é—®é¢˜ï¼Œèƒ½å¤Ÿå¤ç°ï¼Œä½†ä¸æ˜¯æ¯æ¬¡éƒ½å‡ºç°ã€‚å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isSuccess&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isSuccess&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;success&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;failed&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æµ‹è¯•ç»“æœï¼šåœ¨ Debug ç¯å¢ƒä¸‹çœŸæœºå’Œæ¨¡æ‹Ÿå™¨éƒ½æ˜¯ failedï¼Œä½†æ‰“åŒ…æˆå‡ºæ¥å®‰è£…åå¯èƒ½ä¸º success ä¹Ÿå¯èƒ½æ˜¯ failed äº†ã€‚&lt;/p&gt;

&lt;h3 id=&quot;-42é—®é¢˜åˆ†æ&quot;&gt;&lt;a id=&quot;4_2&quot;&gt;&lt;/a&gt; 4.2ã€é—®é¢˜åˆ†æ&lt;/h3&gt;

&lt;p&gt;å¾ˆæ˜æ˜¾æ˜¯å±€éƒ¨å˜é‡ isSuccess å‡ºç°äº†éšæœºå€¼å¯¼è‡´çš„ï¼Œè™½ç„¶æˆ‘ä¸ªäººå¹³æ—¶çš„ä¹ æƒ¯æ˜¯å£°æ˜éå†ä¸€å®šä¼šåˆå§‹åŒ–ï¼Œä½† Debug æ¨¡å¼ä¸‹æ­£å¸¸ï¼Œæ‰“åŒ…åå°±å‡ºç°éšæœºå€¼çš„åŸå› è¿˜æ˜¯ä¸æ¸…æ¥šï¼Œäºæ˜¯è°ƒç ”äº†ä¸€ä¸‹ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ ARC ç¯å¢ƒä¸‹ï¼Œæœ¬åœ°å¯¹è±¡åˆ›å»ºå¦‚æœæœªåˆå§‹åŒ–ï¼ŒæŒ‡é’ˆä¼šæŒ‡å‘é»˜è®¤å€¼ nilï¼›ä½†æ˜¯ç±»ä¼¼ BOOL çš„éå¯¹è±¡ç±»å‹çš„å±€éƒ¨å˜é‡ï¼Œæœªåˆå§‹åŒ–æ—¶ä¼šæŒ‡å‘æœ€åä¸€æ¬¡å†™å…¥è¯¥åœ°å€çš„å†…å®¹ï¼Œå¯èƒ½ä¸ºä»»æ„å€¼ï¼Œä¹Ÿå°±æ˜¯åƒåœ¾å€¼ï¼Œå‡ºç°éšæœºå€¼ä¹Ÿå°±ä¸ç¨€å¥‡äº†ã€‚&lt;/p&gt;

&lt;h3 id=&quot;-43è§£å†³æ–¹æ¡ˆ&quot;&gt;&lt;a id=&quot;4_3&quot;&gt;&lt;/a&gt; 4.3ã€è§£å†³æ–¹æ¡ˆ&lt;/h3&gt;

&lt;p&gt;åˆ›å»ºå˜é‡æ—¶è¦å…»æˆåˆå§‹åŒ–çš„å¥½ä¹ æƒ¯ï¼Œå°¤å…¶æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¾‹å¦‚:&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isSuccess&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;-äº”iphone-ç”¨æˆ·ååŒ…å«ç‰¹æ®Šç¬¦å·å¼•èµ·çš„åå°-crash&quot;&gt;&lt;a id=&quot;5_0&quot;&gt;&lt;/a&gt; äº”ã€iPhone ç”¨æˆ·ååŒ…å«ç‰¹æ®Šç¬¦å·å¼•èµ·çš„åå° Crash&lt;/h2&gt;

&lt;h3 id=&quot;-51é—®é¢˜æè¿°&quot;&gt;&lt;a id=&quot;5_1&quot;&gt;&lt;/a&gt; 5.1ã€é—®é¢˜æè¿°&lt;/h3&gt;

&lt;p&gt;é‡åˆ°ä¸€ä¸ªå·¥å•ï¼Œå®¢æˆ·åé¦ˆæ— æ³•æ­£å¸¸è¿›å…¥ Appï¼Œè¿›å…¥åå°±æŠ¥é”™ï¼Œè¿˜åé¦ˆäº†æœºå‹ã€ç³»ç»Ÿç‰ˆæœ¬ï¼ŒApp ç‰ˆæœ¬ç­‰ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;p&gt;æ’æŸ¥ä»£ç é€»è¾‘æ²¡æœ‰é—®é¢˜ï¼Œæ‰¾åˆ°ç›¸åŒç³»ç»Ÿçš„æœºå‹ï¼Œç›¸åŒ App ç‰ˆæœ¬æµ‹è¯•æ²¡æœ‰é—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;æœŸé—´ä¹Ÿå›å¤äº†ç”¨æˆ·è½¯ä»¶æ²¡æœ‰é—®é¢˜ï¼Œä½†è¿™ä¸ªç”¨æˆ·é”²è€Œä¸èˆï¼Œæœ€ç»ˆç»™è¿™ä¸ªç”¨æˆ·å‘äº†ä¸€ä¸ª Debug ç‰ˆæœ¬ï¼ŒæŠ¥é”™æ—¶ Debug æ—¥å¿—å±•ç¤ºåœ¨ç•Œé¢ä¸Šï¼Œå¤åˆ¶ç²˜è´´å‘è¿‡æ¥ã€‚æœ€ç»ˆé—®é¢˜å®šä½åœ¨äº†&lt;strong&gt;ç”¨æˆ·å&lt;/strong&gt;ä¸Šé¢ï¼Œè¿™ä½ç”¨æˆ·çš„ç”¨æˆ·åç±»ä¼¼äºè¿™æ ·çš„ &amp;amp;&amp;amp;###???###&amp;amp;&amp;amp;ã€‚&lt;/p&gt;

&lt;h3 id=&quot;-52é—®é¢˜åˆ†æ&quot;&gt;&lt;a id=&quot;5_2&quot;&gt;&lt;/a&gt; 5.2ã€é—®é¢˜åˆ†æ&lt;/h3&gt;

&lt;p&gt;è¿™æ—¶å€™å¯èƒ½å·²ç»æƒ³æ˜ç™½æ€ä¹ˆå›äº‹äº†ï¼Œç‰¹æ®Šç¬¦å·è½¬ä¹‰å¼•èµ·çš„åå°Bugã€‚ä¾‹å¦‚ä¸€äº›ç‰¹æ®Šçš„ç¬¦å·ï¼Œä¾‹å¦‚ !#$&amp;amp;â€™()*+,/:;=?@[] è¿™äº›ç‰¹æ®Šç¬¦å·ï¼Œæ‹¼æ¥åœ¨ URL æˆ–è€… Body é‡Œé¢ï¼Œä¼ é€åˆ°åå°æ—¶éƒ½å¯èƒ½å¼•èµ·è½¬ä¹‰ï¼Œä¸èƒ½æ­£å¸¸è§£æï¼Œä¸åŒçš„åå°è¡¨ç°é€»è¾‘ä¸ä¸€è‡´ã€‚&lt;/p&gt;

&lt;h3 id=&quot;-53è§£å†³æ–¹æ¡ˆ&quot;&gt;&lt;a id=&quot;5_3&quot;&gt;&lt;/a&gt; 5.3ã€è§£å†³æ–¹æ¡ˆ&lt;/h3&gt;

&lt;p&gt;æ—¢ç„¶æ˜¯ç‰¹æ®Šå­—ç¬¦å¼•èµ·çš„ï¼Œåœ¨ç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œå¯¹ç‰¹æ®Šå­—ç¬¦è¿› URLEncode å³å¯ï¼ŒæœåŠ¡å™¨æ¥æ”¶åˆ°è¿›è¡Œ URLDecode å³å¯ã€‚&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// ç”¨æˆ·æ‰‹æœºè®¾ç½®çš„ç”¨æˆ·å&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userPhoneName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&quot;abc&amp;amp;&amp;amp;&amp;amp;???dd**%###!!!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// è®¾ç½®éœ€è¦è½¬ä¹‰çš„ç‰¹æ®Šå­—ç¬¦ï¼Œä¾‹å¦‚@&quot;/+=\n&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;characterSetStr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&quot;?!@#$^&amp;amp;%*+,:;=&apos;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;`&amp;lt;&amp;gt;()[]{}/&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;| &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSCharacterSet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;characterSet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSCharacterSet&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;characterSetWithCharactersInString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;characterSetStr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;invertedSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// è¿”å›è½¬ä¹‰åçš„å­—ç¬¦ä¸²&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlEncodeStr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userPhoneName&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;stringByAddingPercentEncodingWithAllowedCharacters&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;characterSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;UserPhoneName Encoding is %@&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlEncodeStr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// ç§»é™¤ç™¾åˆ†å·è½¬ä¹‰&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;removeEncodingStr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urlEncodeStr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stringByRemovingPercentEncoding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;UserPhoneName removeEncoding is %@&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;removeEncodingStr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;æ‰“å°ç»“æœï¼š&lt;/p&gt;

  &lt;p&gt;UserPhoneName Encoding is abc%26%26%26%3F%3F%3Fdd%2A%2A%25%23%23%23%21%21%21&lt;/p&gt;

  &lt;p&gt;UserPhoneName removeEncoding is abc&amp;amp;&amp;amp;&amp;amp;???dd**%###!!!&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;å¤‡æ³¨ï¼š&lt;/strong&gt; ç»å†è¿™æ¬¡äº‹ä»¶ï¼Œåœ¨å¤„ç†ç‰¹æ®Šå­—ç¬¦é—®é¢˜ä¸Šç•™ä¸‹äº†æ·±åˆ»çš„å°è±¡ï¼Œæ— è®ºæ˜¯å¤„ç†ç”¨æˆ·è¾“å…¥ï¼Œè¿˜æ˜¯å–å€¼ç”¨æˆ·å­—ç¬¦ä¸²ï¼Œéƒ½ä¼šæ³¨æ„ç‰¹æ®Šå­—ç¬¦çš„è½¬ä¹‰é—®é¢˜äº†ã€‚&lt;/p&gt;

&lt;h2 id=&quot;-å…­å‚è€ƒé“¾æ¥&quot;&gt;&lt;a id=&quot;6_0&quot;&gt;&lt;/a&gt; å…­ã€å‚è€ƒé“¾æ¥&lt;/h2&gt;

&lt;p&gt;https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html&lt;/p&gt;

&lt;p&gt;http://blog.leichunfeng.com/blog/2017/02/20/talking-about-the-decompression-of-the-image-in-ios/#jtss-tsina&lt;/p&gt;
</description>
        <pubDate>Thu, 25 Oct 2018 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2018/10/%E8%AE%B0%E4%B8%80%E4%BA%9B%E5%8D%B0%E8%B1%A1%E6%B7%B1%E5%88%BB%E7%9A%84-Bug/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/10/%E8%AE%B0%E4%B8%80%E4%BA%9B%E5%8D%B0%E8%B1%A1%E6%B7%B1%E5%88%BB%E7%9A%84-Bug/</guid>
        
        <category>iOS</category>
        
        
      </item>
    
  </channel>
</rss>
