---
layout: post
title: "å¼€å‘è€…å¿«é€Ÿé…ç½®ç¯å¢ƒæŒ‡å—"
date: 2020-08-08
description: "å¼€å‘è€…åœ¨å›½å†…å¦‚ä½•ä½¿ç”¨é•œåƒæºåŠ å¿«ç¯å¢ƒé…ç½®é€Ÿåº¦ã€‚"
tag: é•œåƒæº
--- 

## å‰è¨€

å¼€å‘é…ç½®ç¯å¢ƒæˆ–æ›´æ–°æ—¶ï¼Œç»å¸¸è¢«ç½‘ç»œæå¾—ç²¾ç–²åŠ›ç«­ï¼Œ`403 Forbidden`ã€`443 Timeout`ï¼Œ`SSL_ERROR_SYSCALL`ç­‰å„ç§é”™è¯¯ï¼Œä¸ç»å†å¦‚å°åª³å¦‡ç›¼å¤«å½’èˆ¬çš„ç­‰å¾…è¿›åº¦æ¡`########    9.1%`æ…¢æ…¢çˆ¬è¡Œï¼Œ`clone`è‡³ 99% æ—¶çªç„¶`error`çš„ç»æœ›å¿ƒæƒ…ï¼Œæ˜¯ä¸ä¼šç†è§£è¿™ç§å¿ƒæƒ…çš„ ğŸ˜¤ ã€‚

ç©¶å…¶åŸå› ï¼Œæ˜¯å›½å¤–ç½‘ç»œè¢«å±è”½ã€é€Ÿåº¦æ…¢ï¼Œæ‰çº¿ç­‰å„ç§å› ç´ é€ æˆçš„ï¼›æƒ³å­¦ä¹ æ—¶ï¼Œå¯èƒ½èŠ±äº†ä¸€å¤©é…ç½®ç¯å¢ƒï¼Œç¯å¢ƒé…ç½®å¥½æ—©å·²æ²¡äº†å¿ƒæƒ…ã€‚å¹¸è¿çš„æ˜¯å›½å†…é«˜æ ¡å’Œå¤§å…¬å¸éƒ½æä¾›äº†é•œåƒæºï¼Œé€Ÿåº¦å’Œç¨³å®šæ€§éƒ½å¤§å¹…åº¦æå‡ï¼Œå›½å†…ç›´è¿ï¼Œæ¯”ä»˜è´¹ VPN é€Ÿåº¦æ›´å¿«ï¼Œç¨³å®šæ€§æ›´é«˜ã€‚

é•œåƒæºå¯ç®€å•ç†è§£ä¸ºâ€œå¤åˆ¶çš„ä¸‹è½½æºâ€ï¼Œä¾‹å¦‚ä¸‹è½½ä¸€éƒ¨ç”µå½±ï¼ŒåŸå§‹é“¾æ¥`https://movie.***.com`æ˜¯å›½å¤–æœåŠ¡å™¨çš„ä¸‹è½½é“¾æ¥ï¼Œå›½å†…ç›´æ¥ä¸‹è½½å¯èƒ½é€Ÿåº¦åªæœ‰ 20KBï¼›è¿™æ—¶å¦‚æœå›½å†…æœ‰äººèŠ±è´¹ä¸€æ•´å¤©æŠŠç”µå½±ä¸‹è½½åï¼ŒæŠŠè¿™éƒ¨ç”µå½±æ”¾åˆ°å›½å†…æœåŠ¡å™¨ä¸Šï¼Œå¹¶å‘å¤–å¼€æ”¾ä¸‹è½½åœ°å€`https://movie.***.cn`ï¼Œè¿™æ—¶å›½å†…æœ‰äººæƒ³ä¸‹è½½è¿™éƒ¨ç”µå½±ï¼Œä½¿ç”¨åé¢åˆ†äº«çš„è¿™ä¸ªé“¾æ¥ï¼Œä¸‹è½½é€Ÿåº¦å¯èƒ½å°±è¾¾åˆ° 2MB äº†ï¼›è¿™é‡Œçš„æ¯”å–»å¯èƒ½ä¸å¤ªæ°å½“ï¼Œä»…ç”¨äºç†è§£é•œåƒæºã€‚

æœ¬æ–‡æä¾› brewã€pypiã€dockerï¼Œgithub ç­‰éƒ¨åˆ†è§£å†³æ–¹æ¡ˆï¼Œè¯¦ç»†è¯´æ˜å¯æŸ¥çœ‹é•œåƒæºçš„å¸®åŠ©æ–‡æ¡£ã€‚

## é•œåƒæº

å›½å†…é•œåƒæºåšçš„æ¯”è¾ƒå¥½çš„æ˜¯**ä¸­ç§‘å¤§**å’Œæ¸…åï¼Œå…¶ä»–å¤§å…¬å¸ä¹Ÿæä¾›äº†é•œåƒæºï¼Œä¾‹å¦‚é˜¿é‡Œã€è…¾è®¯ï¼Œç½‘æ˜“ç­‰ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸­ç§‘å¤§å’Œæ¸…åé•œåƒæºå®Œå…¨èƒ½æ»¡è¶³å¼€å‘éœ€æ±‚ï¼Œä»¥**ä¸­ç§‘å¤§**é•œåƒæºä¸¾ä¾‹ã€‚

[ä¸­ç§‘å¤§é•œåƒæºåœ°å€](https://mirrors.ustc.edu.cn/) `https://mirrors.ustc.edu.cn/`ï¼Œè¿™æ˜¯è‡ªåŠ¨è§£æçº¿è·¯ï¼Œè¿˜å¯ä»¥æ ¹æ®è‡ªå·±çš„ç½‘ç»œé€‰æ‹©å¦‚ä¸‹é€Ÿåº¦å¿«çš„çº¿è·¯ï¼š

* [è‡ªåŠ¨è§£æ https://mirrors.ustc.edu.cn/](https://mirrors.ustc.edu.cn/)
* [IPv4 çº¿è·¯ https://ipv4.mirrors.ustc.edu.cn/](https://ipv4.mirrors.ustc.edu.cn/)
* [IPv6 çº¿è·¯ https://ipv6.mirrors.ustc.edu.cn/](https://ipv6.mirrors.ustc.edu.cn/)
* [æ•™è‚²ç½‘çº¿è·¯ https://cernet.mirrors.ustc.edu.cn/](https://cernet.mirrors.ustc.edu.cn/)
* [ç”µä¿¡çº¿è·¯ https://chinanet.mirrors.ustc.edu.cn/](https://chinanet.mirrors.ustc.edu.cn/)
* [è”é€šçº¿è·¯ https://unicom.mirrors.ustc.edu.cn/](https://unicom.mirrors.ustc.edu.cn/)
* [ç§»åŠ¨çº¿è·¯ https://cmcc.mirrors.ustc.edu.cn/](https://cmcc.mirrors.ustc.edu.cn/)
* [Rsync çº¿è·¯ https://rsync.mirrors.ustc.edu.cn/](https://rsync.mirrors.ustc.edu.cn/)

**å¦‚ä½•è®¾ç½®é•œåƒæº**ï¼Œå¯æŸ¥çœ‹[å¸®åŠ©æ–‡æ¡£](https://mirrors.ustc.edu.cn/help/)`https://mirrors.ustc.edu.cn/help/`ã€‚

**å…¶ä»–é•œåƒæº**

* [æ¸…åé•œåƒæº https://mirrors.tuna.tsinghua.edu.cn/](https://mirrors.tuna.tsinghua.edu.cn/)
* [é˜¿é‡Œäº‘é•œåƒæº https://developer.aliyun.com/mirror](https://developer.aliyun.com/mirror)
* [è…¾è®¯é•œåƒæº https://ipv6.mirrors.ustc.edu.cn/](https://mirrors.cloud.tencent.com/)
* [ç½‘æ˜“é•œåƒæº http://mirrors.163.com/](http://mirrors.163.com/)

## brew

**æ›¿æ¢ brew æº**

```shell
# æ›¿æ¢ brew.git:
cd "$(brew --repo)"
git remote set-url origin https://mirrors.ustc.edu.cn/brew.git

# æ›¿æ¢ homebrew-core.git:
cd "$(brew --repo)/Library/Taps/homebrew/homebrew-core"
git remote set-url origin https://mirrors.ustc.edu.cn/homebrew-core.git

# æ›¿æ¢ Homebrew Cask
cd "$(brew --repo)"/Library/Taps/homebrew/homebrew-cask
git remote set-url origin https://mirrors.ustc.edu.cn/homebrew-cask.git

# å¯¹äº bash ç”¨æˆ·ï¼Œæ›¿æ¢ Homebrew-bottles
echo 'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles' >> ~/.bash_profile
source ~/.bash_profile

# å¯¹äº zsh ç”¨æˆ·ï¼Œæ›¿æ¢ Homebrew-bottles
echo 'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles' >> ~/.zshrc
source ~/.zshrc
```

**è¿˜åŸ brew ä¸ºå®˜æ–¹åœ°å€**

`Homebrew-bottles`è¿˜åŸï¼Œæ‰“å¼€`.zshrc`æˆ–`.bash_profile`æ–‡ä»¶ï¼Œåˆ é™¤ä¸Šé¢æ·»åŠ çš„`HOMEBREW_BOTTLE_DOMAIN`è¡Œå³å¯ã€‚

```sh
# é‡ç½® brew.git ä¸ºå®˜æ–¹åœ°å€
cd "$(brew --repo)"
git remote set-url origin https://github.com/Homebrew/brew.git

# é‡ç½® homebrew-core.git ä¸ºå®˜æ–¹åœ°å€
cd "$(brew --repo)/Library/Taps/homebrew/homebrew-core"
git remote set-url origin https://github.com/Homebrew/homebrew-core.git

# é‡ç½® homebrew-cask ä¸ºå®˜æ–¹åœ°å€
cd "$(brew --repo)"/Library/Taps/homebrew/homebrew-cask
git remote set-url origin https://github.com/Homebrew/homebrew-cask
```

## pypi(pip)

pip æ˜¯ Python åŒ…ç®¡ç†å·¥å…·ï¼Œpip å‘½ä»¤é»˜è®¤ä½¿ç”¨çš„æ˜¯å›½å¤–çš„ pypi é•œåƒï¼ˆpypi.python.orgï¼‰ï¼Œé€Ÿåº¦æ…¢æ˜“æ‰çº¿ï¼Œåˆ‡æ¢ä¸ºå›½å†…é•œåƒæºã€‚

**æ–¹æ³• 1ï¼š**

```shell
# ä¸´æ—¶ä½¿ç”¨
pip install -i https://mirrors.ustc.edu.cn/pypi/web/simple package
# è®¾ä¸ºé»˜è®¤ï¼Œå‡çº§ pip åˆ°æœ€æ–°çš„ç‰ˆæœ¬ (>=10.0.0) åè¿›è¡Œé…ç½®
pip install -i https://mirrors.ustc.edu.cn/pypi/web/simple pip -U
pip config set global.index-url https://mirrors.ustc.edu.cn/pypi/web/simple
```

**æ–¹æ³• 2ï¼š**

å½“æ–¹æ³• 1 ä¸èµ·ä½œç”¨æ—¶ï¼Œå¯å°è¯•æ­¤æ–¹æ³•ï¼Œåœ¨å½“å‰ç”¨æˆ·æ ¹ç›®å½•ä¸‹`~/.pip/pip.conf`ï¼Œå†™å…¥å¦‚ä¸‹é…ç½®ï¼Œæ²¡æœ‰æ–‡ä»¶å¤¹å’Œæ–‡ä»¶åˆ›å»ºå³å¯ã€‚

```shell
[[tool.poetry.source]]
name = "tsinghua"
url = "https://pypi.tuna.tsinghua.edu.cn/simple"
default = true
```

## Docker

å®‰è£…å®Œ Docker CE ä¹‹åï¼Œæ›¿æ¢æ‰å®˜æ–¹çš„ Docker Registry æœåŠ¡ï¼Œå¯åŠ å¿«æ‹‰å– Docker é•œåƒçš„é€Ÿåº¦ï¼Œä¸åŒç³»ç»Ÿçš„æ›´æ¢æ–¹æ³•ä¸ä¸€è‡´ï¼Œå‚è€ƒé•œåƒæºå¸®åŠ©æ–‡æ¡£å³å¯ã€‚

ä»¥ macOS Catalina çš„ Docker ä¸ºä¾‹ï¼Œåœ¨ Preferences -> Docker Engine ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼Œé‡å¯ Dockerï¼š

```shell
"registry-mirrors" : [
   "http://docker.mirrors.ustc.edu.cn",
   "http://hub-mirror.c.163.com",
   "https://mirror.ccs.tencentyun.com",
   "http://registry.docker-cn.com"
 ],
 "insecure-registries" : [
   "registry.docker-cn.com",
   "docker.mirrors.ustc.edu.cn"
 ],
```

## CocoaPods

CocoaPods çš„ trunk ä»“åº“å¤§éƒ¨åˆ†æ—¶å€™å°šå¯ï¼Œå½“é€Ÿåº¦æ…¢æˆ–è€…å¤±è´¥æ—¶ï¼Œå¯å°è¯•å¦‚ä¸‹é…ç½®ã€‚

**å¯¹äºæ—§ç‰ˆçš„ CocoaPods å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ä½¿ç”¨ tuna çš„é•œåƒï¼š**

```shell
pod repo remove master
pod repo add master https://mirrors.tuna.tsinghua.edu.cn/git/CocoaPods/Specs.git
pod repo update
```

**æ–°ç‰ˆçš„ CocoaPods ä¸å…è®¸ç”¨pod repo addç›´æ¥æ·»åŠ masteråº“äº†ï¼Œä½†æ˜¯ä¾ç„¶å¯ä»¥ï¼š**

```shell
cd ~/.cocoapods/repos 
pod repo remove master
git clone https://mirrors.tuna.tsinghua.edu.cn/git/CocoaPods/Specs.git master
```

**æœ€åè¿›å…¥è‡ªå·±çš„å·¥ç¨‹ï¼Œåœ¨è‡ªå·±å·¥ç¨‹çš„podFileç¬¬ä¸€è¡ŒåŠ ä¸Šï¼š**

```shell
source 'https://mirrors.tuna.tsinghua.edu.cn/git/CocoaPods/Specs.git'
```

## github

**github åŸŸåæ±¡æŸ“**

éƒ¨åˆ†ç½‘ç»œå¯èƒ½ç”±äºåŸŸåæ±¡æŸ“ï¼Œgithub å‡ºç°è®¿é—®å¤±è´¥ã€å›¾ç‰‡åŠ è½½ä¸å‡ºæ¥çš„æƒ…å†µï¼Œè¿™æ—¶å€™å¯ä»¥å‚è€ƒä¿®æ”¹ hosts æ–‡ä»¶ï¼Œæ·»åŠ  IPä¸åŸŸåæ˜ å°„ï¼Œé€šè¿‡ç›´æ¥è®¿é—® IP åœ°å€çš„æ–¹å¼æ¥è®¿é—®ï¼Œç»“åˆ[switchhosts](https://github.com/oldj/SwitchHosts)ï¼Œå¯ä»¥å®ç°è‡ªåŠ¨ä¿®æ”¹æ›´æ–° hosts æ–‡ä»¶ã€‚

github çš„ IP è‡ªåŠ¨æŒ‡å‘å¯å‚è€ƒ[GitHub520](https://github.com/521xueweihan/GitHub520)ï¼Œæ­¤æ–¹æ³•æœ‰æ•ˆä½†ä½œç”¨æœ‰é™ï¼Œgithub ç»å¸¸è®¿é—®å¤±è´¥çš„åŒå­¦å¯å°è¯•ä¸€ä¸‹ã€‚

**github ä¸‹è½½é€Ÿåº¦æ…¢**

`git clone`è¾ƒå¤§é¡¹ç›®æ—¶ï¼Œé€Ÿåº¦æ…¢ã€æ€»æ˜¯å¤±è´¥çš„æƒ…å†µï¼Œå¯ä½¿ç”¨ VPN åŠ é€Ÿï¼Œæ•ˆæœæ˜æ˜¾ï¼Œæ­¤æ–¹æ³•åªé€‚åˆæœ‰ VPN æˆ–å…¶ä»–å·¥å…·çš„ç”¨æˆ·ã€‚

ä¾‹å¦‚ VPN çš„ socks5 ç«¯å£æ˜¯ 49526ï¼Œå‚è€ƒä¸‹æ–¹**socks5åè®®**é…ç½®ï¼š

```shell
# socks5åè®®ï¼Œ49526 ç«¯å£ä¿®æ”¹æˆè‡ªå·±çš„æœ¬åœ°ä»£ç†ç«¯å£
git config --global http.https://github.com.proxy socks5://127.0.0.1:49526
git config --global https.https://github.com.proxy socks5://127.0.0.1:49526

# httpåè®®ï¼Œ49527 ç«¯å£ä¿®æ”¹æˆè‡ªå·±çš„æœ¬åœ°ä»£ç†ç«¯å£127.0.0.1:49527
git config --global http.proxy http://127.0.0.1:49527
git config --global https.proxy https://127.0.0.1:49527

# httpåè®®ï¼Œ49527 ç«¯å£ä¿®æ”¹æˆè‡ªå·±çš„æœ¬åœ°ä»£ç†ç«¯å£
git config --global http.https://github.com.proxy https://127.0.0.1:49527
git config --global https.https://github.com.proxy https://127.0.0.1:49527

# reset ä»£ç†è®¾ç½®
git config --global --unset http.https://github.com.proxy
git config --global --unset https.https://github.com.proxy
```

